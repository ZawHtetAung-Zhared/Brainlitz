<app-header *ngIf="!showFormCreate" [ngClass]="{'stick': isSticky == true}"></app-header>
<!-- <div *ngIf="!showFormCreate" class="full-width">
	<div class="sticky-menu" [ngClass]="{'stickywrap' : navIsFixed == true}">
		<div class="display-flex mr-top-menu">
			<div class="col-md-4 pad-0">
				<h3>Staffs</h3>
			</div>
			<div class="col-md-8 pad-0">
				<button type="button" class="btn btn-primary create-button-pos" (click)="goCreateForm()">Add new staff</button>
			</div>
		</div>
	</div>
</div>	 -->
<div *ngIf="!showFormCreate" class="inner-wrapper" [ngClass]="{'pdactive': isSticky == true}">
		<div class="display-flex mr-top-menu">
			<div class="col-md-4 pad-0">
				<h3>Staffs</h3>
			</div>
			<div class="col-md-8 pad-0">
				<button type="button" class="btn btn-primary create-button-pos" (click)="goCreateForm()">Add new staff</button>
			</div>
		</div>
		<div class="col-md-12 pad-0" style="margin-top: 35px;">
			<div class="input-group col-md-12 pad-0">
			    <input 
			    	class="form-control py-2 input-search-bg" 
			    	type="search" 
			    	placeholder="Search staff here"
			    	id="staff-search-input"
			    	(input)="userSearch($event.target.value, 'staff')"
        			autocomplete="off"
			    	>
			    <span class="input-group-append">
			        <button class="bt btn-design btn-outline-secondary" type="button">
			            <i class="fa fa-search search-size"></i>
			        </button>
			     </span>
			</div>
		</div>
		<div class="row display-flex user-group">
			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 col-xl-4 mr-box display-block" *ngFor="let staff of staffLists; let i = index">
				<div class="box-design d-flex flex-row align-items-center">
					<div class="circular-image">
						<img *ngIf="staff.profilePic == 'undefined'" src="assets/img/user.svg">
						<img *ngIf="staff.profilePic != 'undefined'" src="{{staff.profilePic}}">
					</div>
					<div class="info-side d-flex flex-column justify-content-center">
						<div><label class="staff-label">Staff</label></div>
						<h5>{{staff.preferredName}}</h5>
						<p class="info-mail">{{staff.email}}</p>
						<p class="info-about" *ngIf="staff.about == 'undefined'">
							-
						</p>
						<p class="info-about" *ngIf="staff.about != 'undefined'">
							{{ (staff.about.length>48)? (staff.about | slice:0:48)+'...' : (staff.about) }}
						</p>
					</div>
					<div class="right-arrow ml-auto" style="display: none;">
						<i class="fa fa-angle-right"></i>
					</div>
				</div>
			</div>
		</div>
</div>
<div *ngIf="staffLists.length >= 20 && !showFormCreate" class="d-flex justify-content-center load-more">
	<button class="btn" (click)="showMore('staff', staffLists.length)">load more</button>
</div>

<div *ngIf="showFormCreate" class="sticky-back-user" [ngClass]="{'sticky-bar' : isCreateFix == true}">
	<button type="button" class="back-button display-flex" (click)="back()">
		<i class="fa fa-angle-left left-arrow"></i> <p class="back-staff-txt">Staffs</p>
	</button>
</div>
<div class="inner-wrapper-detail" *ngIf="showFormCreate">
	<button type="button" class="back-button display-flex" (click)="back()">
		<i class="fa fa-angle-left left-arrow"></i> <p class="back-staff-txt">Staffs</p>
	</button>
	<div class="col-md-12 pad-0 mr-bt-top">
		<h3>Create staff account</h3>
	</div>
	<form class="form-wrap" novalidate #createForm="ngForm">
		<div class="row display-flex">
			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-7">
				<div class="form-group form-divider">
		  	    	<div class="d-flex justify-content-between">
		  	    		<label for="" class="label-txt">What should we call you? <br> <span>e.g. How your call you or like your preferred name</span></label> 
		  	    		<div class="limit-wordcount">
							<span>{{wordLength}}/60characters</span>
						</div>
		  	    	</div>	
		  	    	<input type="text" class="form-control " placeholder="Type preferred name here" name="preferredname" [(ngModel)]="formFields.preferredname" #preferredname="ngModel" (focus)="focusMethod($event, $event.target.value)" (blur)="blurMethod($event)" maxlength="60" (input)="changeMethod($event.target.value)" required>
		  	    	<div *ngIf="preferredname.invalid && (preferredname.dirty || preferredname.touched)" class="alert alert-danger">
				        <div [hidden]="!preferredname.errors.required">
				          Display name is required!
				        </div>
				    </div>
		  	  	</div>
		  	  	<div class="form-group form-divider">
		  	    	<label for="firstname" class="label-txt">First name</label> 	
		  	    	<input type="text" class="form-control" placeholder="Type first name here" name="firstname" [(ngModel)]="formFields.firstname" #firstname="ngModel" required>
		  	    	<div *ngIf="firstname.errors && (firstname.dirty || firstname.touched)" class="alert alert-danger">
				        <div [hidden]="!firstname.errors.required">
				          First name is required!
				        </div>
				    </div>
		  	  	</div>
		  	  	<div class="form-group form-divider">
		  	    	<label for="lastname" class="label-txt">Last name</label> 	
		  	    	<input type="text" class="form-control" placeholder="Type last name here" name="lastname" [(ngModel)]="formFields.lastname" #lastname="ngModel" required>
		  	    	<div *ngIf="lastname.errors && (lastname.dirty || lastname.touched)" class="alert alert-danger">
				        <div [hidden]="!lastname.errors.required">
				          Last name is required!
				        </div>
				    </div>
		  	  	</div>
		  	  	<div class="form-group form-divider">
		  	    	<label for="about" class="label-txt">About</label> 	
		  	    	<textarea class="form-control" rows="3" placeholder="Type about here" name="about" [(ngModel)]="formFields.about" #about="ngModel"></textarea>
		  	  	</div>
		  	  	<div class="form-group form-divider">
		  	    	<label for="" class="label-txt">Email address</label> 	
		  	    	<input type="email" class="form-control" placeholder="Type email address here" (keyup)="validateEmail(formFields.email)" name="email" [(ngModel)]="formFields.email" #email="ngModel" required>
		  	    	<div *ngIf="email.errors && (email.dirty || email.touched)" class="alert alert-danger">
				        <div [hidden]="!email.errors.required">
				          Email is required!
				        </div>
				    	</div>
				    	<div *ngIf="emailAlert" class="alert alert-danger">
		  	    		Please provide a valid email
		  	    	</div>
		  	  	</div>
		  	  	<div class="form-group form-divider">
		  	    	<label for="" class="label-txt">Password</label> 	
		  	    	<input type="password" class="form-control" placeholder="Type password here" name="password" [(ngModel)]="formFields.password" #password="ngModel" required>
		  	    	<div *ngIf="password.errors && (password.dirty || password.touched)" class="alert alert-danger">
				        <div [hidden]="!password.errors.required">
				          Password is required!
				        </div>
				    </div>
		  	  	</div>
			</div>
			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-5" style="display: block;">
				<label for="upload">
					<div *ngIf="!imgDemoSlider" class="profile-box label-txt">
						<div class="form-group">
							<label for="upload" class="profile-label">Profile</label><br>
							<div class="circular-wrap">
								<div class="circular-profile">
									<img src="assets/img/user.svg">
								</div>	
							</div>	
						    <p>Update photo</p>							
						</div>
						<div class="demo-wrap upload-demo">
	          	<div class="container">
		            <div class="grid">
	              	<div class="col-1-2">
	                	<div class="actions">
	                		<a class="btn file-btn">
	                  		<input type="file" class="upload-jpg form-control" id="upload" #cropper (change)='uploadCropImg($event)' value="Choose a file" accept="image/*" style="display:none" />
	                		</a>
	                	</div>
	              	</div><br />
		            </div>
	       			</div>
				    </div>
					</div>
				</label>
				<div class="frame-upload">
					<div class="upload-demo-wrap">
            	<div id="upload-demo"></div>
          </div>
          <div class="row mr-button">
          	<div class="col-md-6 crop-box" style="border-bottom-left-radius: 10px;">
            	<div class="br-right">
            		<button *ngIf="blankCrop" class="upload-result btn1" (click)="backToUpload()" >Cancel</button>
            	</div>
            </div>
          	<div class="col-md-6 crop-box" style="border-bottom-right-radius: 10px;">
            	<button *ngIf="blankCrop" class="upload-result btn2" id="sizeDisable" (click)="cropResult()" [value]="blankCrop">Crop</button>
            </div>
          </div>
				</div>
			</div>
			<div class="col-md-12 pad-bottom">
				<div style="border-bottom: 1px solid #e3e4e6;"  class="form-group" ngFor="let user of permissionLists">
  	  	  	    	<label class="label-txt radio" style="padding-bottom: 10px">Permission as</label> 	
  	  	  	    	<div class="d-flex flex-wrap">
  	  	  	    		<div class="permission-width1" *ngFor="let user of permissionLists; let i = index;" >
  	  	  	    			<label for={{user._id}} style="cursor: pointer; position: relative;">
  	  		  	    			<div class="permission-box permission-name">
  	  								<input type="radio" id="{{user._id}}" value="{{user._id}}" name="role" [(ngModel)]="formFields.permission" #permission="ngModel" (click)="checkUser(user._id, $event)"><br>
  	  							  	<span class="capitalize">{{user.name|lowercase}}</span>
  	  							  	<span class="check"></span>
  	  							</div>
  	  						</label>	
  	  					</div>
  	  	  	    	</div>
  	  	  	  	</div>
			</div>
		</div>
		<div class="d-flex justify-content-end button-group">
			<button type="button" class="bt cancel-button" (click)="back()">Cancel</button>
        	<button *ngIf="isupdate  == false" type="submit" (click)="createUser(formFields, 'create')" class="btn create-button" [disabled]="!createForm.form.valid || permissionCount== false">Create
			</button>
			<button *ngIf="isupdate  == true" type="submit" (click)="createUser(formFields, 'edit')" class="btn create-button" [disabled]="!createForm.form.valid">Update
			</button>
		</div>
	</form>	
</div>
<block-ui message="Deafult Message"></block-ui> 