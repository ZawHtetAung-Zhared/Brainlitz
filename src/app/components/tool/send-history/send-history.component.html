<div class="d-flex justify-content-center">
  <div class="d-flex flex-column w-100 h-100 main-wrapper">
    <h3 class="title-heading margin-heading h1-strong text-c300">
      Sent history
    </h3>
    <div
      class="notiGroup-wrap"
      *ngFor="let notiGroup of notiLists | groupBy: 'sentdate'"
    >
      <h5
        *ngIf="notiGroup.key == today"
        class="title-padding body-l text-c300 bg-s0"
      >
        Today, {{ notiGroup.key | date }}
      </h5>
      <h5
        *ngIf="notiGroup.key == yesterday"
        class="title-padding body-l text-c300 bg-s0"
      >
        Yesterday, {{ notiGroup.key | date }}
      </h5>
      <h5
        *ngIf="notiGroup.key != today && notiGroup.key != yesterday"
        class="title-padding body-l text-c300 bg-s0"
      >
        {{ notiGroup | getDay }}, {{ notiGroup.key | date }}
      </h5>
      <div
        class="history-wrap"
        *ngFor="let noti of notiGroup.value; let isLast = last"
      >
        <div class="flex-wrap">
          <div class="col-sm-2 oo" [ngClass]="{ notlast: !isLast }">
            <div class="same-label"></div>
            <label class="sentTime body-l text-c100">{{
              noti.senttime | convertTimeFormat
            }}</label>
          </div>
          <div
            [ngClass]="{
              borderOne: !isLast,
              borderTwo: isLast,
              'horizontal-line': isLast
            }"
            class="col-sm-10 noti-info"
          >
            <div class="same-label small text-c100">
              Sent to
            </div>
            <div class="user-info">
              <span class="text-c300">{{ noti.group.name }}</span>
              <span
                *ngIf="noti.count > 1"
                class="count-wrap bg-s20 small text-c100"
                >{{ noti.count }} users</span
              >
              <span
                *ngIf="noti.count == 1"
                class="count-wrap bg-s20 small text-c100"
                >{{ noti.count }} user</span
              >
              <span class="social-links">
                <a
                  ><i id="mobile" class="fa fa-mobile" aria-hidden="true"></i
                ></a>
              </span>
              <span class="social-links">
                <a><i id="envelope" class="fa fa-envelope-o"></i></a>
              </span>
            </div>
            <div class="subject-wrap light-body-m text-c100 bg-s20">
              <div class="xxx" [ngClass]="{ notlast: !isLast }">
                <div class="xx1" [ngClass]="{ line1: isLast }"></div>
                <div class="xx2" [ngClass]="{ line1: isLast }"></div>
              </div>
              <div class="noti-subject">
                <div class="noti-title body-m text-c100">
                  {{ noti.title }}
                </div>
                <read-more [text]="noti.message"></read-more>
              </div>
            </div>
            <div class="sender-info text-c100 small ">
              <span>Sent by</span>
              <ul>
                <li>
                  <span id="senderName text-c300">{{
                    noti.sender.preferredName
                  }}</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      *ngIf="notiLists.length >= 20"
      class="load-more body-m text-b100 bg-s0"
    >
      <button
        class="btn remove-outline text-b100 bg-s0"
        (click)="showMore(notiLists.length)"
      >
        load more
      </button>
    </div>
  </div>
</div>
