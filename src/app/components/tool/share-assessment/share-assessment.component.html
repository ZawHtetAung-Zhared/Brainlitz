<div class="d-flex justify-content-center">
  <div class="main-wrapper">
    <div class="back-wrap">
      <div class="d-flex justify-content-between">
        <div class="back-to" (click)="goToback()">
          <i class="fa fa-angle-left"></i>
          <p class="body-l text-c300">
            Creating assessment tracking module
          </p>
        </div>
        <!-- <a class="back-to" (click)="goToBack('share')">< Creating progress APG</a> -->
        <a class="cancel-back body-l text-c300" (click)="cancelapg()">Cancel</a>
      </div>
    </div>
    <div class="apg-form">
      <form novalidate #createapgForm="ngForm">
        <div>
          <div class="input-group w-100">
            <input
              class="form-control py-2 input-search-bg bg-s20"
              type="search"
              placeholder="Search tracking module"
              id="template-search-input"
              (input)="sharedApgSearch2($event.target.value, '', '')"
              (keyup.enter)="sharedApgSearch($event.target.value, '', '')"
              autocomplete="off"
            />
            <span class="input-group-append">
              <button
                class="btn btn-design btn-outline-secondary"
                type="button"
                (click)="sharedApgSearch(keyword, '', '')"
              >
                <i class="fa fa-search search-size"></i>
              </button>
            </span>
          </div>
          <div class="apg-share-content">
            <div class="col1">
              <div
                *ngFor="
                  let template of templateList | slice: 0:half;
                  let i = index
                "
                class="assement-shared-apg share-input"
              >
                <div
                  class="header"
                  [ngClass]="{ selected: sharechecked == template._id }"
                >
                  <label class="form-check-label data">
                    <div class="d-flex justify-content-between">
                      <div>
                        <span class="eval-name small text-c100"
                          >Evaluation</span
                        >
                        <span class="temp-name body-xl text-c300">{{
                          template.name
                        }}</span>
                      </div>
                      <div>
                        <div
                          class="label-checked data"
                          style="float:right"
                        ></div>

                        <input
                          class="form-check-input"
                          type="radio"
                          name="inlineRadioOptions"
                          id="temp._id"
                          value="{{ template.name }}"
                          (click)="chooseShareAPG(template._id, template.name)"
                        />
                      </div>
                    </div>
                  </label>
                </div>
                <div class="accesspoint-name-wrapper">
                  <div
                    *ngFor="
                      let accessPoint of template.accessPoints;
                      let ind = index
                    "
                    class="accesspoint-name"
                  >
                    <div
                      class="head"
                      [ngClass]="{
                        'no-mb': ind == template.accessPoints.length - 1
                      }"
                    >
                      <span [ngClass]="{ changeColor: accessPoint.isExpand }">{{
                        accessPoint.name
                      }}</span>
                      <span
                        class="down-arrow"
                        [ngClass]="{ 'transform-y': accessPoint.isExpand }"
                        (click)="expandAccessPoint(i, ind)"
                      >
                        <i
                          class="fa fa-angle-down"
                          style="font-size: 25px;"
                        ></i>
                        <!-- <img src="../../../assets/images/system-icons-down.png"> -->
                      </span>
                      <!-- <span class="down-arrow"  *ngIf="!accessPoint.isExpand" (click)="expandAccessPoint(i,ind)">Up</span> -->
                      <!-- <span class="down-arrow">Up</span> -->
                      <div class="dot-wrapper" *ngIf="!accessPoint.isExpand">
                        <span
                          class="dot"
                          *ngFor="
                            let dot of accessPoint.data.evaluation.details
                          "
                        ></span>
                      </div>
                      <div class="after-expand" *ngIf="accessPoint.isExpand">
                        <div
                          class="d-flex flex-row"
                          *ngFor="
                            let dot of accessPoint.data.evaluation.details;
                            let id = index
                          "
                        >
                          <span class="detail-dot"></span>
                          <div
                            class="mb-0 list-dot-wrap detail-line apg-desc w-100 body-m text-c100"
                            [ngClass]="{
                              'hide-border':
                                accessPoint.data.evaluation.details?.length ==
                                id + 1
                            }"
                          >
                            {{ dot.name }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col2">
              <div
                *ngFor="
                  let template of templateList | slice: half;
                  let i2 = index
                "
                class="assement-shared-apg share-input"
              >
                <div
                  class="header"
                  [ngClass]="{ selected: sharechecked == template._id }"
                >
                  <label class="form-check-label data">
                    <div class="d-flex justify-content-between">
                      <div>
                        <span class="eval-name small text-c100"
                          >Evaluation</span
                        >
                        <span class="temp-name body-xl text-c300">{{
                          template.name
                        }}</span>
                      </div>
                      <div>
                        <div
                          class="label-checked data"
                          style="float:right"
                        ></div>

                        <input
                          class="form-check-input"
                          type="radio"
                          name="inlineRadioOptions"
                          id="temp._id"
                          value="{{ template.name }}"
                          (click)="chooseShareAPG(template._id, template.name)"
                        />
                      </div>
                    </div>
                  </label>
                </div>
                <div class="accesspoint-name-wrapper">
                  <div
                    *ngFor="
                      let accessPoint of template.accessPoints;
                      let ind = index
                    "
                    class="accesspoint-name"
                  >
                    <div
                      class="head"
                      [ngClass]="{
                        'no-mb': ind == template.accessPoints.length - 1
                      }"
                    >
                      <span [ngClass]="{ changeColor: accessPoint.isExpand }">{{
                        accessPoint.name
                      }}</span>
                      <span
                        class="down-arrow"
                        [ngClass]="{ 'transform-y': accessPoint.isExpand }"
                        (click)="expandAccessPoint(i2 + half, ind)"
                      >
                        <i
                          class="fa fa-angle-down"
                          style="font-size: 25px;"
                        ></i>
                        <!-- <img src="../../../assets/images/system-icons-down.png"> -->
                      </span>
                      <!-- <span class="down-arrow"  *ngIf="!accessPoint.isExpand" (click)="expandAccessPoint(i,ind)">Up</span> -->
                      <!-- <span class="down-arrow">Up</span> -->
                      <div class="dot-wrapper" *ngIf="!accessPoint.isExpand">
                        <span
                          class="dot"
                          *ngFor="
                            let dot of accessPoint.data.evaluation.details
                          "
                        ></span>
                      </div>
                      <div class="after-expand" *ngIf="accessPoint.isExpand">
                        <div
                          class="d-flex flex-row"
                          *ngFor="
                            let dot of accessPoint.data.evaluation.details;
                            let id = index
                          "
                        >
                          <span class="detail-dot"></span>
                          <div
                            class="mb-0 list-dot-wrap detail-line apg-desc w-100 body-m text-c100"
                            [ngClass]="{
                              'hide-border':
                                accessPoint.data.evaluation.details?.length ==
                                id + 1
                            }"
                          >
                            {{ dot.name }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex justify-content-end apg-share-bottom">
            <div class=" align-self-end ">
              <button
                [disabled]="
                  sharechecked == null ||
                  sharechecked == '' ||
                  sharechecked == undefined
                "
                type="button"
                class="btn btn-submit bg-b100 text-s0"
                (click)="setShareAPG(temp)"
              >
                Create
              </button>
            </div>
          </div>
          <div class="d-flex justify-content-center shareApgLoadMore loadMore1">
            <div
              *ngIf="templateList.length >= 20 && result.length == 20"
              class="load-more1 bg-s0"
            >
              <button
                class="btn remove-outline body-m text-b100 "
                (click)="showMoreShareApg(templateList.length)"
              >
                load more
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
