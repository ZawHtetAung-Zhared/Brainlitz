<div class="d-flex flex-column">
  <div class="d-flex align-items-center mt-4">
    <span class="mastery-title">Mastery reports</span>
    <span class="sw-wrap"> <img src="./assets/img/tiny-brainlitz.svg"/></span>
  </div>
  <div
    *ngIf="!masteriesReports && !noData"
    class="d-flex justify-content-center pt-5 mt-5"
  >
    Not enough data to generate reports.
  </div>
  <div *ngIf="masteriesReports && !noData" class="d-flex flex-column">
    <div *ngFor="let report of masteriesReports; let i = index">
      <div class="d-flex justify-content-between align-items-center mt-4">
        <div class="d-flex flex-column">
          <span class="mastery-title">
            {{ report.name }}
          </span>
          <div class="d-flex align-items-center light-txt pt-1">
            <span> {{ report.masteryCount }} masteries </span>
            <span class="dotted"></span>
            <span> {{ report.enrolledStudentCount }} students </span>
          </div>
        </div>

        <button
          class="btn-detail btn"
          (click)="expandGraph(report._id)"
          routerLinkActive="active"
          routerLink="/masteriesdetail/{{ report._id }}"
        >
          View detail
        </button>
      </div>

      <div class="d-flex pt-3">
        <div class="mt-4 mb-4" style="width: 30%">
          <div class="d-flex flex-column">
            <div
              *ngIf="report.masteryCountInPercentage"
              class="d-flex flex-column w-90"
            >
              <span class="light-txt mb-3">Overall percentage</span>
              <div
                class="d-flex justify-content-between pb-16 light-txt body-m"
              >
                <span> Struggling</span>
                <span>{{ report.masteryCountInPercentage.STRUGGLE }}%</span>
              </div>
              <div
                class="d-flex justify-content-between pb-16 light-txt body-m"
              >
                <span> Not started</span>
                <span>{{ report.masteryCountInPercentage.NEW }}%</span>
              </div>
              <div
                class="d-flex justify-content-between pb-16 light-txt body-m"
              >
                <span> Inconclusive</span>
                <span>{{ report.masteryCountInPercentage.INPROGRESS }}%</span>
              </div>
              <div
                class="d-flex justify-content-between pb-16 light-txt body-m"
              >
                <span> Mastered w/ difficulties</span>
                <span
                  >{{
                    report.masteryCountInPercentage.MASTERED_WITH_DIFFICULT
                  }}%</span
                >
              </div>
              <div
                class="d-flex justify-content-between pb-16 light-txt body-m"
              >
                <span> Mastered w/ ease</span>
                <span
                  >{{
                    report.masteryCountInPercentage.MASTERED_WITH_EASE
                  }}%</span
                >
              </div>
            </div>
          </div>
        </div>
        <div
          id="{{ report._id }}"
          class="mt-4 mb-4 ml-3"
          style="width:70%; min-height: 200px;"
          (click)="expandGraph(report._id)"
          routerLinkActive="active"
          routerLink="/masteriesdetail/{{ report._id }}"
        ></div>
      </div>
      <!-- <div class="d-flex">
        <div class="mt-4 mb-4" style="width: 30%">
          <div class="d-flex flex-column">
            <span class="mastery-title">
              {{ report.name }}
            </span>
            <div class="d-flex">
              <span class="light-txt">
                {{ report.masteries.length }} masteries
              </span>
              <span> 100 students </span>
            </div>
            
            <button
              class="btn-detail btn mt-4"
              (click)="expandGraph(report._id)"
              routerLinkActive="active"
              routerLink="/masteriesdetail/{{ report._id }}"
            >
              View detail
            </button>
            <div *ngIf="report.masteryCountInPercentage" class="d-flex mt-4">
              <div class="d-flex flex-column w-50">
                <div class="d-flex flex-column struggle body-m">
                  <span>{{ report.masteryCountInPercentage.STRUGGLE }}%</span>
                  <span> struggling</span>
                </div>
                <div class="d-flex flex-column mastered body-m">
                  <span>{{ report.masteryCountInPercentage.MASTERED }}%</span>
                  <span> mastered</span>
                </div>
              </div>
              <div class="d-flex flex-column w-50">
                <div class="d-flex flex-column fine body-m">
                  <span>{{ report.masteryCountInPercentage.INPROGRESS }}%</span>
                  <span> doing fine</span>
                </div>
                <div class="d-flex flex-column notstarted body-m">
                  <span>{{ report.masteryCountInPercentage.NEW }}%</span>
                  <span> not started</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          id="{{ report._id }}"
          class="mt-4 mb-4 ml-3"
          style="width:70%; min-height: 200px;"
          (click)="expandGraph(report._id)"
          routerLinkActive="active"
          routerLink="/masteriesdetail/{{ report._id }}"
        ></div>
      </div> -->
      <div *ngIf="i < masteriesReports.length - 1" class="split-line"></div>
    </div>
    <div class="footer d-flex justify-content-center align-items-center">
      <div class="d-flex color-wrap">
        <div class="color-box" style="background: #BF2926;"></div>
        <span class="color-txt"> Struggling </span>
      </div>
      <div class="d-flex color-wrap">
        <div class="color-box" style="background: #EDEEF0;"></div>
        <span class="color-txt"> Not started </span>
      </div>
      <div class="d-flex color-wrap">
        <div class="color-box" style="background: #D4D5D6;"></div>
        <span class="color-txt"> Inconclusive </span>
      </div>
      <div class="d-flex color-wrap">
        <div class="color-box" style="background: #6DC000;"></div>
        <span class="color-txt"> Mastered w/ difficulties </span>
      </div>
      <div class="d-flex color-wrap">
        <div class="color-box" style="background: #4FDD00;"></div>
        <span class="color-txt"> Mastered w/ ease </span>
      </div>
    </div>
  </div>
  <div *ngIf="noData" class="d-flex">
    <!-- left loading start -->
    <div class="mt-4 mb-4" style="width: 30%">
      <content-loader>
        <svg:rect x="0" y="0" rx="3" ry="3" width="80%" height="25px" />
        <svg:rect x="0" y="30" rx="3" ry="3" width="50%" height="20px" />
        <svg:rect x="0" y="80" rx="15" ry="15" width="60%" height="50px" />
      </content-loader>
    </div>
    <!-- left loading end -->
    <!-- right loading start -->
    <div class="mt-4 mb-4 ml-2" style="width:70%; min-height: 200px;">
      <content-loader>
        <svg:rect x="0" y="0" rx="3" ry="3" width="80%" height="15px" />
        <svg:rect x="0" y="20" rx="3" ry="3" width="60%" height="10px" />
        <svg:rect x="0" y="40" rx="3" ry="3" width="70%" height="20px" />
      </content-loader>
    </div>
    <!-- right loading end -->
  </div>
</div>

<router-outlet></router-outlet>
