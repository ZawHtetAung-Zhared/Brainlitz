<app-header
  *ngIf="isCourse == false"
  [ngClass]="{ stick: isSticky == true, hide: hideMenu }"
></app-header>
<!-- <app-course *ngIf="isCourse == true"></app-course> -->
<!-- <div *ngIf="!showFormCreate" class="full-width">
	<div class="sticky-menu" [ngClass]="{'stickywrap' : navIsFixed == true}">
		<div class="display-flex mr-top-menu">
			<div class="col-md-4 pad-0">
				<h3>Customers</h3>
			</div>
			<div class="col-md-8 pad-0">
				<button type="button" class="btn btn-primary create-button-pos" (click)="goCreateForm()">Add new customer</button>
			</div>
		</div>
	</div>
</div>	 -->
<div class="d-flex flex-column justify-content-center align-items-center">
  <div
    *ngIf="
      !showFormCreate &&
      !showCustDetail &&
      customerPermission.length > 0 &&
      !isCourse
    "
    class="inner-wrapper "
    [ngClass]="{ pdactive: isSticky == true }"
  >
    <div class="d-flex mr-top-menu">
      <div class="col-md-5 pad-0">
        <div class="d-flex flex-row">
          <h3>Customers</h3>
          <span class="location-name">{{ locationName }}</span>
        </div>
      </div>
      <div class="col-md-7 pad-0">
        <button
          *ngIf="customerDemo.createCustomer != ''"
          type="button"
          class="btn btn-primary create-button-pos"
          (click)="goCreateForm('create')"
        >
          Add new customer
        </button>
      </div>
    </div>
    <p class="input-recommend col-md-9 pl-0 col-lg-9 col-xl-9 col-sm-9">
      See the list of all your customers. ‘Customers’ include students or
      parents whose email ID has been registered. Click on a ‘customer’ to see
      their profile details, classes enrolled, progress, activity etc.
    </p>
    <div
      *ngIf="customerDemo.viewCustomer != ''"
      class="col-md-12 pad-0"
      style="margin-top: 35px;"
    >
      <div class="input-group col-md-12 pad-0">
        <input
          class="form-control py-2 input-search-bg"
          type="search"
          placeholder="Search customer here"
          id="customer-search-input"
          (focusout)="clearSearch($event)"
          (input)="userSearch($event.target.value, 'customer', '', '')"
          autocomplete="off"
        />
        <span class="input-group-append">
          <button class="bt btn-design btn-outline-secondary" type="button">
            <i class="fa fa-search search-size"></i>
          </button>
        </span>
      </div>
    </div>
    <div class="row display-flex user-group">
      <div
        class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-6 mr-box display-block"
        *ngFor="let customer of customerLists; let i = index"
      >
        <div
          class="box-design d-flex flex-row align-items-center"
          (click)="showDetails(customer.userId)"
        >
          <div class="profileimg-wrap">
            <div class="circular-image">
              <img
                *ngIf="customer.profilePic == 'undefined'"
                src="assets/img/user.svg"
              />
              <img
                *ngIf="customer.profilePic != 'undefined'"
                src="{{ customer.profilePic }}"
              />
            </div>
            <div
              style="margin-left: 60px;margin-top: -30px;position: relative;"
            >
              <div
                *ngIf="
                  customer.userGrading.grade.point != undefined &&
                  customer.userGrading.grade.point != null
                "
                class="b-white justify-content-center d-flex"
                [style.background]="customer.userGrading.sepalColor.background"
                [ngClass]="{
                  'test-circle': customer.userGrading.grade.point.length == 1,
                  circle: customer.userGrading.grade.point.length > 1
                }"
              >
                <span [style.color]="customer.userGrading.sepalColor.text">
                  {{ customer.userGrading.grade.point }}
                </span>
              </div>
            </div>
          </div>
          <div class="info-side d-flex flex-column justify-content-center">
            <h5 *ngIf="customer.preferredName" style="margin-bottom: 0.3rem">
              {{
                customer.preferredName.length > 20
                  ? (customer.preferredName | slice: 0:20) + '...'
                  : customer.preferredName
              }}
            </h5>
            <p class="info-mail" style="margin-bottom: 0.8rem">
              {{ customer.email }}
            </p>
            <p class="info-about" *ngIf="customer.about == 'undefined'">-</p>
            <p class="info-about" *ngIf="customer.about != 'undefined'">
              {{
                customer.about.length > 25
                  ? (customer.about | slice: 0:25) + '...'
                  : customer.about
              }}
            </p>
          </div>
          <div
            *ngIf="customerDemo.viewCustomer != ''"
            class="ml-auto right-arrow"
          >
            <i class="fa fa-angle-right"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  *ngIf="
    customerLists.length >= 20 &&
    !showFormCreate &&
    !showCustDetail &&
    result?.length > 0
  "
  class="d-flex justify-content-center load-more"
>
  <button
    type="button"
    class="btn"
    (click)="showMore('customer', customerLists.length)"
  >
    load more
  </button>
</div>
<div class="d-flex flex-column justify-content-center align-items-center">
  <div
    *ngIf="showCustDetail"
    class="content-wrapper w-100"
    [ngClass]="{ pdactive: isSticky == true }"
  >
    <div class="main-wrapper">
      <div class="d-flex heading-space">
        <div class="back" (click)="backToCustomer()">
          <i
            class="fa fa-angle-left"
            style="color: #3d5266;font-size: 20px;"
          ></i
          ><span>Customers</span>
        </div>
        <div class="ml-auto">
          <span
            *ngIf="customerDemo.editCustomer != ''"
            class="back"
            (click)="getSingleInfo(editId)"
            >Edit Profile</span
          >
        </div>
      </div>
      <div class="user-info-wrap d-flex -justify-content-between">
        <div class="d-flex col-left">
          <div class="img-wrap">
            <div class="circular-image">
              <!-- <img *ngIf="custDetail.user.profilePic == 'undefined'" src="assets/img/user.svg"> -->
              <img src="{{ custDetail.user.profilePic }}" />
            </div>
            <div class="user-grade">
              <div
                *ngIf="
                  custDetail.user.userGrading?.grade.point != undefined &&
                  custDetail.user.userGrading?.grade.point != null
                "
                class="b-white justify-content-center d-flex"
                [style.background]="
                  custDetail.user.userGrading.sepalColor.background
                "
                [ngClass]="{
                  'test-circle':
                    custDetail.user.userGrading.grade.point.length == 1,
                  circle: custDetail.user.userGrading.grade.point.length > 1
                }"
              >
                <span
                  [style.color]="custDetail.user.userGrading.sepalColor.text"
                >
                  {{ custDetail.user.userGrading.grade.point }}
                </span>
              </div>
            </div>
          </div>
          <div class="pad-left-15" style="width: 80%">
            <div class="infoGp-wrap">
              <!-- <p>{{custDetail.user.profilePic}}</p> -->
              <h5>{{ custDetail.user.preferredName }}</h5>
              <p class="info-mail mb-0">{{ custDetail.user.email }}</p>
            </div>
            <div class="infoGp-wrap mb-0 info-p">
              <p *ngIf="custDetail.user.about" class="mb-0">
                {{ custDetail.user.about }}
              </p>
              <p
                *ngIf="!custDetail.user.about"
                class="mb-0 info-p"
                style="margin-top: -20px"
              >
                -
              </p>
            </div>
            <div
              *ngIf="custDetail.user.guardians?.length > 0"
              class="infoGp-wrap"
              style="border-top: 1px dotted #64707d;"
            >
              <label class="info-mail">Guardians</label>
              <div class="guardian-main-wrap d-flex">
                <div
                  *ngFor="let guardian of custDetail.user.guardians"
                  class="g-inner-wrap d-flex"
                >
                  <div class="small-circular-image">
                    <img
                      *ngIf="
                        guardian.profilePic == undefined ||
                        guardian.profilePic == ''
                      "
                      src="assets/img/user.svg"
                    />
                    <img
                      *ngIf="guardian.profilePic != undefined"
                      src="{{ guardian.profilePic }}"
                    />
                  </div>

                  <div class="guar-name">
                    {{
                      guardian.fullName == '' || guardian.fullName == null
                        ? guardian.email
                        : guardian.fullName
                    }}
                  </div>
                </div>
              </div>
              <!-- <div class="" style="overflow-x: scroll;">
									<div class="gurdian-wrap" *ngFor="let gurdian of custDetail.user.guardians">
										<div class="small-circular-image">
											<img *ngIf="gurdian.profilePic == undefined || gurdian.profilePic == ''" src="assets/img/user.svg">
											<img *ngIf="gurdian.profilePic != undefined" src="{{gurdian.profilePic}}">
										</div>
										<p>{{ (gurdian.fullname == null )? ("-") : (gurdian.fullname) }}</p>
									</div>
								</div> -->
              <!-- <div class="d-flex gurdian-wrap" *ngFor="let gurdian of custDetail.user.guardians">
										<div *ngIf="gurdian.length<=0">
											-
										</div>
										<div class="small-circular-image">
											<img src="{{gurdian.profilePic}}">
	
										</div>
										<div class="d-flex justify-content-center flex-column info-p padL-5">
											{{ (gurdian.fullname == null )? ("-") : (gurdian.fullname) }}
										</div>
									</div> -->
            </div>
          </div>
        </div>
        <div class="pad-left-15 col-right">
          <div>
            <div class="infoGp-wrap" *ngIf="custDetail.user.fullName != ''">
              <label class="info-mail">Full name</label>
              <!-- <p class="mb-0 info-p">{{ custDetail.user.fullName }} <span style="padding: 1px"></span>{{custDetail.user.lastName}}</p> -->
              <p class="mb-0 info-p">{{ custDetail.user.fullName }}</p>
            </div>
            <div class="infoGp-wrap" *ngIf="custDetail.user.fullName == ''">
              <label class="info-mail">Full name</label>
              <!-- <p class="mb-0 info-p">{{ custDetail.user.fullName }} <span style="padding: 1px"></span>{{custDetail.user.lastName}}</p> -->
              <p class="mb-0 info-p">
                -
              </p>
            </div>
            <div class="d-flex info-wrap details-list-wrap">
              <div class="list-wrapper detail-list">
                <div
                  *ngFor="let detail of custDetail.user.details"
                  class="child-detail"
                >
                  <label class="info-mail" *ngIf="detail.value.length != 0">{{
                    detail.name
                  }}</label>
                  <p class="mb-0 info-p" *ngIf="detail.value.length != 0">
                    {{ detail.value }}
                  </p>
                </div>
              </div>
            </div>
            <!-- <div class="d-flex infoGp-wrap info-wrap">
							<div class="timetable-col">
								<label class="info-mail">Weight</label>
								<p class="mb-0 info-p">-</p>
							</div>
							<div class="timetable-col">
								<label class="info-mail">Height</label>
								<p class="mb-0 info-p">-</p>
							</div>
						</div> -->
          </div>
        </div>
      </div>
      <div class="btn-wrap">
        <div></div>
      </div>
      <div
        class="section-wrap"
        [ngClass]="{ 'bg-makeup': activeTab == 'makeup' }"
      >
        <div class="d-flex tab-section">
          <button
            [ngClass]="{ active: activeTab == 'class' }"
            class="btn tab-btn"
            (click)="clickTab('class')"
          >
            Class
          </button>
          <button
            [ngClass]="{ active: activeTab == 'makeup' }"
            class="btn tab-btn"
            (click)="clickTab('makeup')"
          >
            Makeup pass
          </button>
          <button
            [ngClass]="{ active: activeTab == 'achievements' }"
            class="btn tab-btn"
            (click)="clickTab('achievements')"
          >
            Achievements
          </button>
        </div>
        <div *ngIf="activeTab == 'class'" class="pb-20">
          <div class="d-flex title-space">
            <div class="d-flex flex-column justify-content-center">
              <h4 class="mb-0 tab-title">Attending Lessons</h4>
            </div>
            <button
              *ngIf="customerDemo.enrollStudent != ''"
              (click)="
                callEnrollModal(
                  classEnrollModal,
                  custDetail.user.userId,
                  'enroll'
                )
              "
              class="ml-auto enroll-btn"
            >
              Enroll new class
            </button>
          </div>

          <!-- <div>
            <div
              class="btn-wrap no-item"
              style="padding-left: 20px;padding-right: 20px"
              *ngIf="custDetail.courses?.length <= 0"
            >
              There is no course from this customer!
            </div>
            <div class="child_two" *ngFor="let course of custDetail.courses">
              <div class="section-one">
                <div
                  class="d-flex justify-content-between"
                  style="padding-left: 20px"
                >
                  <label class="class-label-12"
                    ><i
                      class="fa fa-map-marker"
                      style="font-size:12px;padding-right: 4px"
                    ></i
                    >{{ course.location.name }}</label
                  >
                </div>
                <div>
                  <p
                    class="info-p clickable"
                    (click)="onClickCourse(course)"
                    style="padding-left: 20px"
                  >
                    {{ course.name }}
                  </p>

                  <div class="d-flex row info-wrap" style="padding-left: 20px">
                    <div
                      *ngIf="course.type != 'ONLINE'"
                      class="col-4 info-wrap"
                    >
                      <label
                        class="class-label-14 mb-0"
                        *ngFor="let day of course.repeatDays | weekDays"
                        >{{ day }}</label
                      >
                      <p
                        *ngIf="course.duration != undefined"
                        class="medium-label-14 mb-0"
                      >
                        {{ course.duration.startDate | utcTime }} -
                        {{ course.duration.endDate | utcTime }}
                      </p>
                    </div>

                    <div class="d-flex  col-4 day-wrap info-wrap">
                      <div *ngIf="course.startDate" class="timetable-col ml-3">
                        <label class="medium-label-14 mb-0">From</label>
                        <p class="class-label-14 mb-0">
                          {{ course.startDate | utcDate }}
                        </p>
                      </div>
                      <div class="timetable-col">
                        <label
                          *ngIf="course.endDate"
                          class="medium-label-14 mb-0"
                          >To</label
                        >
                        <label
                          *ngIf="course.lessonCount"
                          class="medium-label-14 mb-0"
                        ></label>
                        <p *ngIf="course.endDate" class="class-label-14 mb-0">
                          {{ course.endDate | utcDate }}
                        </p>
                        <p
                          *ngIf="course.lessonCount"
                          class="class-label-14 mb-0"
                        >
                          {{ course.lessonCount }} Lessons
                        </p>
                      </div>
                    </div>
                    <div class="col-4 info-wrap">
                      <div
                        class="d-flex flex-row day-wrap"
                        *ngIf="course.invoice != null"
                      >
                        <div
                          *ngIf="course.invoice.status == 'UNPAID'"
                          class="ml-3"
                        >
                          <img src="./assets/images/unpaid_indicator.png" />
                        </div>
                        <div
                          *ngIf="course.invoice.status == 'PAID'"
                          class="ml-3"
                        >
                          <img src="./assets/images/paid indicator.png" />
                        </div>
                        <div
                          *ngIf="course.invoice.status == 'PAID[PARTIAL]'"
                          class="ml-3"
                        >
                          <img src="./assets/images/paid indicator.png" />
                        </div>

                        <div>
                          <label
                            *ngIf="course.invoice.status == 'UNPAID'"
                            class="unpaid-text medium-label-14 mb-0"
                            style="color: #F23A30;"
                            >Unpaid</label
                          >
                          <label
                            *ngIf="course.invoice.status == 'PAID'"
                            class="paid-text"
                            style="color: #009940;"
                            >Paid</label
                          >
                          <label
                            *ngIf="course.invoice.status == 'PAID[PARTIAL]'"
                            class="paid-text"
                            style="color: #009940;"
                            >Paid[Partial]</label
                          >
                          <div
                            *ngIf="course.invoice != null; currency"
                            style="font-family: 'Inter-UI-Semibold', Arial, sans-serif;
                          font-size:14px;color: #2E3D4D;"
                          >
                            <span
                              style="padding-left: 16px;font-family: 'Inter-UI-Semibold', Arial, sans-serif;
                            font-size:14px;color: #2E3D4D;"
                              class="currency"
                              >{{ course.invoice.currency.sign }}</span
                            >
                            {{ course.invoice.total }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="page-footer flex-wrap mt-2">
                    <div
                      class="d-flex justify-content-between mt-2"
                      style="padding-left: 20px"
                    >
                      <div class="d-flex">
                        <label
                          class="view-invoice"
                          (click)="rolloverCourse(course._id, course)"
                          >Rollover this course</label
                        >
                        <div class="d-flex">
                          <span class="dot">&#8226;</span>
                          <label
                            class="btn view-invoice"
                            (click)="
                              viewJournal(
                                journalContent,
                                course,
                                course.teacher.preferredName
                              )
                            "
                          >
                            View Journal
                          </label>
                        </div>
                      </div>

                      <button
                        class="btn view-invoice"
                        (click)="viewInvoice(classEnrollModal, course)"
                        [disabled]="course.invoice == null"
                      >
                        View invoice
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div> -->
          <!-- Attending lessons -->
          <div>
            <div
              class="btn-wrap no-item"
              style="padding-left: 20px;padding-right: 20px"
              *ngIf="custDetail.courses?.length <= 0"
            >
              There is no course from this customer!
            </div>
            <div
              class="child_two"
              *ngFor="
                let course of custDetail.courses
                  | slice
                    : 0
                    : [
                        selectedId.indexOf('course') != -1
                          ? custDetail.courses.length
                          : 2
                      ]
              "
            >
              <div class="section-one">
                <div class="row d-flex">
                  <div class="col-7">
                    <div
                      class="d-flex justify-content-between"
                      style="padding-left: 20px"
                    >
                      <label class="class-label-12"
                        ><i
                          class="fa fa-map-marker"
                          style="font-size:12px;padding-right: 4px"
                        ></i
                        >{{
                          course.location == null ? '-' : course.location?.name
                        }}</label
                      >
                    </div>
                    <p
                      class="info-p clickable"
                      (click)="onClickCourse(course)"
                      style="padding-left: 20px"
                    >
                      {{ course.name }}
                    </p>
                    <div class="d-flex">
                      <div class="d-flex info-wrap justify-content-between">
                        <div class="d-flex">
                          <div
                            *ngIf="course.startDate"
                            class="timetable-col"
                            style="padding-left: 20px"
                          >
                            <label class="medium-label-14 mb-0">From</label>
                            <p class="class-label-14 mb-0">
                              {{ course.startDate | utcDate }}
                            </p>
                          </div>
                          <!-- <div
                            class="timetable-col"
                            *ngIf="
                              course.type != 'ONLINE' &&
                              course.type != 'REGULAR'
                            "
                          >
                            <label
                              class="medium-label-14"
                              style="line-height: 0.5"
                              >Continuous</label
                            >
                            <p class="medium-label-14">with no end date</p>
                          </div> -->
                          <div class="timetable-col">
                            <label
                              *ngIf="course.endDate"
                              class="medium-label-14 mb-0"
                              >To</label
                            >
                            <label
                              *ngIf="course.lessonCount"
                              class="medium-label-14 mb-0"
                            ></label>
                            <p
                              *ngIf="course.endDate"
                              class="class-label-14 mb-0"
                            >
                              {{ course.endDate | utcDate }}
                            </p>
                            <!-- <p
                              *ngIf="course.lessonCount"
                              class="class-label-14 mb-0"
                            >
                              {{ course.lessonCount }} Lessons
                            </p> -->
                          </div>
                        </div>
                        <div class="d-flex tchr-img">
                          <div class="tchr-img-wraper">
                            <img
                              src="{{ course.teacher?.profilePic }}"
                              alt=""
                              class="teacher-pic"
                            />
                          </div>
                          <div class="teacher">
                            <label class="medium-label-14 mb-0">Teacher</label>
                            <p class="class-label-14">
                              {{ course.teacher?.preferredName }}
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="d-flex info-wrap justify-content-between">
                      <div>
                        <label
                          class="class-label-14 mb-0"
                          style="padding-left: 20px"
                          *ngFor="let day of course.repeatDays | weekDays"
                          >{{ course.type == 'ONLINE' ? '' : day }}</label
                        >
                        <p
                          style="padding-left: 20px"
                          *ngIf="course.duration != undefined"
                          class="medium-label-14 mb-0"
                        >
                          {{
                            course.type == 'ONLINE'
                              ? ''
                              : (course.duration.startDate | utcTime)
                          }}
                          {{ course.type == 'ONLINE' ? '' : '-' }}
                          {{
                            course.type == 'ONLINE'
                              ? ''
                              : (course.duration.endDate | utcTime)
                          }}
                        </p>
                      </div>
                      <div class="remaining">
                        <span class="medium-label-14"
                          >{{ course.upComingLessonCount }} remaining
                          lessons</span
                        >
                      </div>
                    </div>
                    <div class="line mt-3"></div>
                    <div class="d-flex justify-content-between">
                      <div class="d-flex" style="padding-left: 20px">
                        <img src="./assets/icons/journal.svg" />
                        <label
                          class="btn view-invoice ml-2"
                          (click)="
                            viewJournal(
                              journalContent,
                              course,
                              course.teacher.preferredName
                            )
                          "
                        >
                          View Journal
                        </label>
                      </div>
                      <!-- <div class="d-flex auto-enroll">
                        <label class="switch-label" for="online"
                          >Auto enroll for next term</label
                        >
                        <div
                          class="toggle-wrap"
                          (click)="this.isGlobal = !isGlobal"
                        >
                          <label class="switch">
                            <input
                              type="checkbox"
                              (click)="isGlobal = !this.isGlobal"
                              [checked]="isGlobal"
                            />
                            <span class="slider round"></span>
                          </label>
                        </div>
                      </div> -->
                    </div>
                  </div>
                  <div class="show-invoice col-5 ">
                    <div class="scrollbar">
                      <div class="d-flex invoice-change align-items-center">
                        <label class="invoice-label">Invoice</label>
                        <span
                          class="invoiceOflength"
                          *ngIf="course.invoicesOfCourse != undefined"
                          >{{ course.invoicesOfCourse.length }}</span
                        >
                      </div>
                      <div
                        class=" invoice-list"
                        *ngFor="let invoice of course.invoicesOfCourse"
                      >
                        <div class="d-flex">
                          <div class="first-one d-flex flex-column">
                            <p class="lesson">
                              {{ invoice.studentLessonsCount }} lessons
                            </p>
                            <span
                              class="date"
                              *ngIf="
                                invoice.courseDuration != undefined &&
                                invoice.courseDuration.startDate != undefined &&
                                invoice.courseDuration.endDate != undefined
                              "
                            >
                              {{ invoice.courseDuration.startDate | utcDate }} -
                              {{ invoice.courseDuration.endDate | utcDate }}
                            </span>
                            <label class="payment">Payment date</label>
                            <p class="date1">
                              {{ invoice.updatedDate | utcDate }}
                            </p>
                          </div>
                          <div class="second-one" style="padding-left: 10px">
                            <div class="d-flex" style="margin-top: 14px">
                              <div
                                class="paybill"
                                [ngClass]="{
                                  'paid-status': invoice.status == 'PAID',
                                  'unpaid-status': invoice.status == 'UNPAID',
                                  'partially-paid-status':
                                    invoice.status == 'PAID[PARTIAL]'
                                }"
                              >
                                <p>
                                  {{
                                    invoice.status == 'PAID[PARTIAL]'
                                      ? 'Partially paid'
                                      : invoice.status == 'PAID'
                                      ? 'Paid'
                                      : 'Unpaid'
                                  }}
                                </p>
                              </div>
                              <span class="right"></span>
                            </div>
                            <div
                              class="date"
                              *ngIf="course.invoice != null; currency"
                            >
                              <span class="currency date">{{
                                invoice.currency.sign
                              }}</span>
                              {{ invoice.total }}
                            </div>
                            <!-- (click)="viewInvoice(classEnrollModal, course)"
                  [disabled]="course.invoice == null" -->
                            <button
                              class="btn view-invoice"
                              (click)="
                                viewFlexyInvoice(
                                  classEnrollModal,
                                  course,
                                  invoice
                                )
                              "
                            >
                              View invoice
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div>
            <div *ngIf="custDetail.courses?.length > 2">
              <button
                *ngIf="selectedId.indexOf('course') == -1"
                class="btn-showmore pad-0"
                (click)="showMoreItem('course')"
              >
                <span>Show More</span
                ><i class="fa fa-angle-down" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
        <div *ngIf="activeTab == 'makeup'" class="pb-20">
          <div class="d-flex justify-content-center">
            <ul class="pass-list">
              <li
                [ngClass]="{ active: activePass == 'available' }"
                (click)="clickPass('available')"
              >
                Available
              </li>
              <li
                [ngClass]="{ active: activePass == 'claimed' }"
                (click)="clickPass('claimed')"
              >
                Claimed
              </li>
              <li
                [ngClass]="{ active: activePass == 'expired' }"
                (click)="clickPass('expired')"
              >
                Expired
              </li>
            </ul>
          </div>
          <div *ngIf="makeupLists" class="row makeup-wrap">
            <div class="col-md-4" *ngFor="let list of makeupLists">
              <div class="single-makeup">
                <div *ngIf="activePass == 'available'" class="makeup-head">
                  <p>
                    Valid until
                    <span class="valid-date"
                      >{{ list.expirationDate.day }}
                      {{ list.expirationDate.month - 1 | TTmonth }}
                      {{ list.expirationDate.year }}</span
                    >
                  </p>
                </div>
                <div class="makeup-body">
                  <h5 class="makeup-title">{{ list.name }}</h5>
                  <p class="makeup-desc">{{ list.reason }}</p>
                  <div class="makeup-box">
                    <p>
                      Issued on {{ list.issueDate.day }}
                      {{ list.issueDate.month - 1 | TTmonth }}
                      {{ list.issueDate.year }}
                    </p>
                    <div class="issue-box d-flex flex-column">
                      <strong>{{ list.course.name }}</strong>
                      <label *ngIf="list.course.type !== 'ONLINE'">
                        <span
                          >{{ list.course.startTime.hr | timeFormat }} :
                          {{ list.course.startTime.min | timeFormat }}
                          {{ list.course.startTime.meridiem }}</span
                        >
                        -
                        <span
                          >{{ list.course.endTime.hr | timeFormat }} :
                          {{ list.course.endTime.min | timeFormat }}
                          {{ list.course.endTime.meridiem }}</span
                        ></label
                      >

                      <div *ngIf="list.cancelledLesson">
                        <strong
                          *ngIf="list.cancelledLesson.startDate != undefined"
                        >
                          <span>{{
                            list.cancelledLesson.startDate | timelineDate
                          }}</span>
                          <span>{{
                            list.cancelledLesson.startDate | yearFormat
                          }}</span>
                        </strong>

                        <strong
                          *ngIf="list.cancelledLesson.startDate == undefined"
                        >
                          <span *ngIf="list.course.type !== 'ONLINE'">-</span>
                        </strong>
                      </div>
                      <strong *ngIf="!list.cancelledLesson"
                        ><span *ngIf="list.course.type !== 'ONLINE'">-</span>
                      </strong>
                    </div>
                    <div *ngIf="activePass == 'claimed'">
                      <p>
                        Claimed on {{ list.filingDate.day }}
                        {{ list.filingDate.month - 1 | TTmonth }}
                        {{ list.filingDate.year }}
                      </p>
                      <div
                        class="claimed-box d-flex flex-column"
                        *ngIf="list.makeupCourse"
                      >
                        <strong>{{ list.makeupCourse.name }}</strong>
                        <label
                          *ngIf="
                            list.course.type !== 'ONLINE' &&
                            list.makeupCourse.startTime
                          "
                        >
                          <span
                            >{{ list.makeupCourse.startTime.hr | timeFormat }} :
                            {{ list.makeupCourse.startTime.min | timeFormat }}
                            {{ list.makeupCourse.startTime.meridiem }}</span
                          >
                          -
                          <span>
                            {{ list.makeupCourse.endTime.hr | timeFormat }} :
                            {{ list.makeupCourse.endTime.min | timeFormat }}
                            {{ list.makeupCourse.endTime.meridiem }}
                          </span>
                        </label>

                        <div *ngIf="list.claimedDateFor">
                          <strong *ngIf="list.claimedDateFor.day != null">
                            {{ list.claimedDateFor.day }}
                            {{ list.claimedDateFor.month - 1 | TTmonth }}
                            {{ list.claimedDateFor.year }}
                          </strong>
                          <strong *ngIf="list.claimedDateFor.day == null">
                            <span *ngIf="list.course.type !== 'ONLINE'">-</span>
                          </strong>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="left-scoope"></div>
                <div class="right-scoope"></div>
                <div
                  *ngIf="activePass == 'available'"
                  class="makeup-footer d-flex justify-content-center"
                >
                  <p
                    (click)="openClaimModal(claimModal, list)"
                    class="claim-text"
                  >
                    Claim this pass
                  </p>
                </div>
                <div
                  *ngIf="activePass == 'claimed'"
                  class="makeup-footer d-flex justify-content-center"
                >
                  <img src="./assets/img/badge-tick.png" class="claim-img" />
                  <p class="pass-text">Claimed pass</p>
                </div>
                <div
                  *ngIf="activePass == 'expired'"
                  class="makeup-footer d-flex justify-content-center"
                >
                  <img src="./assets/img/badge-minus.png" class="claim-img" />
                  <p class="expired-text">Expired</p>
                </div>
              </div>
            </div>
          </div>
          <!-- <div *ngIf="activePass == 'claimed'" class="d-flex makeup-wrap flex-column">
						<div class="d-flex makeup-wrap">
							<div class="col-md-4">
								<div class="single-expired">
									<div class="makeup-body">
										<h5 class="makeup-title">MoeGuitar101</h5>
										<p class="makeup-desc">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
										<div class="makeup-box">
											<p>Issued on 12 Aug 2018</p>
											<div class="issue-box">
												<strong>From Piano Grade 2 SATURDAY</strong>
												<label>11:00 AM - 12:00 AM</label>
											</div>
											<p>Claimed on 12 Aug 2018</p>
											<div class="claimed-box">
												<strong>From Piano Grade 2 SATURDAY</strong>
												<label>11:00 AM - 12:00 AM</label>
											</div>
										</div>
									</div>
									<div class="left-scoope"></div>
									<div class="right-scoope"></div>
									<div class="makeup-footer d-flex justify-content-center">
										<p class="pass-text">Claimed pass</p>
									</div>
								</div>
							</div>
						</div>
					</div>
	
					<div *ngIf="activePass == 'expired'" class="d-flex makeup-wrap flex-column">
						<div class="d-flex makeup-wrap">
							<div class="col-md-4">
								<div class="single-expired">
									<div class="makeup-body">
										<h5 class="makeup-title">MoeGuitar101</h5>
										<p class="makeup-desc">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
										<div class="makeup-box">
											<p>Issued on 12 Aug 2018</p>
											<div class="issue-box">
												<strong>From Piano Grade 2 SATURDAY</strong>
												<label>11:00 AM - 12:00 AM</label>
											</div>
											<p>Claimed on 12 Aug 2018</p>
											<div class="claimed-box">
												<strong>From Piano Grade 2 SATURDAY</strong>
												<label>11:00 AM - 12:00 AM</label>
											</div>
										</div>
									</div>
									<div class="left-scoope"></div>
									<div class="right-scoope"></div>
									<div class="makeup-footer d-flex justify-content-center">
										<p class="expired-text">Expired</p>
									</div>
								</div>
							</div>
						</div>
					</div> -->
        </div>
        <div
          *ngIf="activeTab == 'achievements'"
          class="pb-20"
          style="overflow:hiiden"
        >
          <div class="achievements-main" *ngIf="achievementProgess.length != 0">
            <div class="achievements-header">
              <h6 class="title-space">Progress</h6>
            </div>

            <div class="row progress-list">
              <div
                class="col-xs-12 col-sm-12 col-md-12 col-lg-6 col-xl-4 mt-1 mb-1 display-block"
                *ngFor="let progress of achievementProgess"
              >
                <div class="progress-box">
                  <p class="course-name">{{ progress.course.name }}</p>

                  <span class="score">{{ progress.score }}% accomplished</span>
                  <div class="bar-wrapper achievements-progress">
                    <ngb-progressbar
                      [value]="progress.score"
                      height="0.3rem"
                    ></ngb-progressbar>
                  </div>
                  <div class="progress-footer">
                    <span class="update-date"
                      >Update on {{ progress.createdDate | utcDate }}</span
                    >
                    <span class="by-name"
                      >by {{ progress.by.preferredName }}</span
                    >
                  </div>
                  <!-- </div> -->
                </div>
              </div>
            </div>
          </div>
          <div
            class="achievements-main"
            *ngIf="achievementEvaluation.length != 0"
          >
            <div class="achievements-header">
              <h6 class="title-space">Evaluation</h6>
            </div>

            <div class="card-columns evaluation-list">
              <div
                class="card"
                *ngFor="let evaluation of achievementEvaluation"
              >
                <div class="evaluation-main">
                  <div class="evaluation-header">
                    <p class="apg-name">
                      {{ evaluation.apg.name }}
                    </p>
                  </div>
                  <div class="evaluation-body">
                    {{ evaluation.assessments.isLoadmore }}
                    <carousel>
                      <ng-container *ngFor="let ass of evaluation.assessments">
                        <ng-container *carouselItem>
                          <div
                            class="createdDate"
                            *ngIf="ass.createdDate != null"
                          >
                            {{ ass.createdDate | utcDate }}
                          </div>

                          <div
                            class="createdDate-boder"
                            *ngIf="ass.createdDate == null"
                          ></div>

                          <div class="assessment-list-gp">
                            <div
                              class="assessment-list"
                              *ngFor="let evaluate of ass.evaluations"
                            >
                              <p class="assessment-name">
                                {{ evaluate.apName }}
                              </p>
                              <span
                                class="evaluation-status noData"
                                *ngIf="evaluate.status == 'NEUTRAL'"
                                >No Data</span
                              >
                              <span
                                class="evaluation-status in-Progess"
                                *ngIf="evaluate.status == 'IN-PROGRESS'"
                                >In Progess</span
                              >
                              <span
                                class="evaluation-status achieved"
                                *ngIf="evaluate.status == 'PASS'"
                                >Achieved</span
                              >
                              <div
                                class="d-flex flex-wrap"
                                style="max-width: 300px;"
                              >
                                <span
                                  class="list-dot-wrap"
                                  *ngFor="
                                    let detail of evaluate.details;
                                    let i = index
                                  "
                                >
                                  <span
                                    class="noData-dot"
                                    *ngIf="detail.selectedIndex == 'null'"
                                  ></span>
                                  <span
                                    class="exitData-dot zero"
                                    *ngIf="detail.selectedIndex == '0'"
                                    >{{ detail.selectedIndex }}</span
                                  >
                                  <span
                                    class="exitData-dot one"
                                    *ngIf="detail.selectedIndex == '1'"
                                    >{{ detail.selectedIndex }}</span
                                  >
                                  <span
                                    class="exitData-dot two"
                                    *ngIf="detail.selectedIndex == '2'"
                                    >{{ detail.selectedIndex }}</span
                                  >
                                </span>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </ng-container>
                    </carousel>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="d-flex" *ngIf="activeTab == 'class'">
          <div class="firstCol">
            <div>
              <h6 class="title-space">Ratings and reviews</h6>
              <div>
                <div
                  class="btn-wrap no-item"
                  *ngIf="custDetail.ratings?.length <= 0"
                >
                  There is no rating and review from this customer!
                </div>
                <div class="card-columns">
                  <div
                    *ngFor="
                      let rating of custDetail.ratings
                        | slice
                          : 0
                          : [
                              selectedId.indexOf('rating') != -1
                                ? custDetail.ratings?.length
                                : 2
                            ]
                    "
                    class="card card-wrap"
                  >
                    <div class="d-flex">
                      <ngb-rating
                        [(rate)]="rating.rating"
                        readonly="true"
                        max="5"
                      >
                        <ng-template let-fill="fill" let-index="index">
                          <span
                            *ngIf="fill === 100"
                            class="star"
                            [class.filled]="fill === 100"
                            >&#9733;</span
                          >
                          <span
                            *ngIf="fill !== 100"
                            class="star"
                            [class.notfilled]="fill !== 100"
                            >&#9734;</span
                          >
                        </ng-template>
                      </ngb-rating>
                      <span class="ml-auto medium-label-12">{{
                        rating.updatedDate
                      }}</span>
                    </div>
                    <p class="medium-label-14" style="color: #2e3d4d">
                      <read-more
                        class="cust-readmore"
                        [text]="rating.message"
                      ></read-more>
                    </p>
                    <div class="d-flex info-wrap">
                      <div class="timetable-col d-flex">
                        <div class="small-circular-image">
                          <img src="{{ rating.teacher_info.profilePic }}" />
                        </div>
                        <div class="padL-5">
                          <label class="medium-label-12 mb-0">Teacher</label>
                          <p
                            *ngIf="rating.teacher_info.preferredName"
                            class="teacher-label-12 mb-0"
                          >
                            {{
                              rating.teacher_info.preferredName.length > 20
                                ? (rating.teacher_info.preferredName
                                    | slice: 0:20) + '...'
                                : rating.teacher_info.preferredName
                            }}
                          </p>
                        </div>
                      </div>
                      <div class="timetable-col course-wrap">
                        <label class="medium-label-12 mb-0">Course</label>
                        <p class="teacher-label-12 mb-0">
                          {{ rating.course_info.name }}
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="btn-wrap">
                <div *ngIf="custDetail.ratings?.length > 2">
                  <button
                    *ngIf="selectedId.indexOf('rating') == -1"
                    class="btn-showmore pad-0"
                    (click)="showMoreItem('rating')"
                  >
                    <span>Show More</span
                    ><i class="fa fa-angle-down" aria-hidden="true"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="secondCol">
            <div class="inner-secondCol">
              <h6>Activity</h6>
              <div class="no-item" *ngIf="custDetail.journals?.length <= 0">
                There is no activity for this customer!
              </div>
              <div style="overflow: scroll;" [style.height.px]="divHeight">
                <div
                  class="activity-wrapper"
                  *ngFor="
                    let activity of custDetail.journals
                      | slice
                        : 0
                        : [
                            selectedId.indexOf('activity') != -1
                              ? custDetail.journals?.length
                              : 2
                          ]
                  "
                >
                  <div class="d-flex">
                    <div class="teacher-label-12" style="width: 100%">
                      {{ activity.message }}
                    </div>
                    <div class="icon-img"></div>
                  </div>
                  <label class="medium-label-12 mb-0">{{
                    activity.time
                  }}</label>
                </div>
                <div>
                  <div *ngIf="custDetail.journals?.length > 4">
                    <button
                      *ngIf="selectedId.indexOf('activity') == -1"
                      class="btn-showmore pad-0"
                      style="font-size: 14px"
                      (click)="showMoreItem('activity')"
                    >
                      <span>See all activities</span
                      ><i class="fa fa-angle-right" aria-hidden="true"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    *ngIf="showFormCreate"
    class="sticky-back-user"
    [ngClass]="{ 'sticky-bar': isCreateFix == true }"
  >
    <button
      type="button"
      class="back-button display-flex"
      (click)="backToCustomer()"
    >
      <i class="fa fa-angle-left left-arrow"></i>
      <p class="back-staff-txt fl-txt-rt">Customers</p>
    </button>
  </div>

  <div class="d-flex justify-content-center w-100">
    <div class="inner-wrapper-detail" *ngIf="showFormCreate">
      <button
        type="button"
        class="back-button display-flex"
        (click)="backToCustomer()"
      >
        <i class="fa fa-angle-left left-arrow"></i>
        <p class="back-staff-txt fl-txt-rt">Customers</p>
      </button>
      <div class="col-md-12 pad-0 mr-bt-top">
        <h3 *ngIf="isupdate == false">Create Customer account</h3>
        <h3 *ngIf="isupdate == true">Update Customer account</h3>
      </div>
      <form class="form-wrap" novalidate #customerForm="ngForm">
        <div class="row display-flex">
          <div class="col-xs-12 col-sm-6 col-md-6 col-lg-7 pad-bottom">
            <div class="form-group form-divider">
              <div class="d-flex justify-content-between">
                <label for="prename" class="label-txt">
                  <!-- What should we call you? <br /> -->
                  Display name
                  <!-- <span
                  >e.g. How your call you or like your preferred name</span
                > -->
                </label>
                <div class="limit-wordcount">
                  <span>{{ wordLength }}/15characters</span>
                </div>
              </div>
              <input
                type="text"
                class="form-control "
                placeholder="Type preferred name here"
                name="preferredName"
                [(ngModel)]="formFieldc.preferredName"
                #preferredName="ngModel"
                (focus)="focusMethod($event, 'name', $event.target.value)"
                (blur)="blurMethod($event, 'name')"
                (input)="changeMethod($event.target.value)"
                maxlength="15"
                required
              />
              <div
                *ngIf="
                  preferredName.invalid &&
                  (preferredName.dirty || preferredName.touched)
                "
                class="alert alert-danger"
              >
                <div [hidden]="!preferredName.errors.required">
                  Display name is required!
                </div>
              </div>
            </div>
            <div class="form-group form-divider">
              <div class="d-flex justify-content-between">
                <label for="fullName" class="label-txt">Full name</label>
                <div class="limit-wordcount2">
                  <span>{{ wordLength }}/60characters</span>
                </div>
              </div>
              <input
                type="text"
                class="form-control"
                placeholder="Type full name here"
                name="fullName"
                [(ngModel)]="formFieldc.fullName"
                #fullName="ngModel"
                (focus)="focusMethod($event, 'fullname', $event.target.value)"
                (blur)="blurMethod($event, 'fullname')"
                (input)="changeMethod($event.target.value)"
                maxlength="60"
                required
              />
              <div
                *ngIf="fullName.errors && (fullName.dirty || fullName.touched)"
                class="alert alert-danger"
              >
                <div [hidden]="!fullName.errors.required">
                  Full name is required!
                </div>
              </div>
            </div>
            <!-- <div class="form-group form-divider">
                <label for="lastName" class="label-txt">Last name</label> 	
                <input type="text" class="form-control" placeholder="Type last name here" name="lastName" [(ngModel)]="formFieldc.lastName" #lastName="ngModel" required>
                <div *ngIf="lastName.errors && (lastName.dirty || lastName.touched)" class="alert alert-danger">
                  <div [hidden]="!lastName.errors.required">
                    Last name is required!
                  </div>
              </div>
              </div> -->

            <div class="form-group form-divider" *ngIf="!customerEmail">
              <div
                class="d-flex align-items-center cursor-on"
                (click)="customerEmail = true"
              >
                <div class="plus-circle"></div>
                <span class="addEmail-text">Add customer's email address</span>
              </div>
            </div>

            <div class="form-group form-divider" *ngIf="customerEmail">
              <label for="email" class="label-txt">Email address</label>
              <!-- <label for="guardian" class="m-0 p-0 d-flex">
              <input
                type="radio"
                id="email"
                (click)="isGuardian = !isGuardian"
                name="customer"
                class="d-none"
              />
              <div *ngIf="!isGuardian" class="rounded-box"></div>
              <div *ngIf="isGuardian" class="rounded-checked">
                <span class="radio-checked"></span>
              </div>
              <div class="box-label" [ngClass]="{ checkedDate: isGuardian }">
                Guardian email?
              </div>
            </label> -->
              <input
                type="email"
                class="form-control"
                placeholder="Type email address here"
                (keyup)="validateEmail(formFieldc.email)"
                name="email"
                [(ngModel)]="formFieldc.email"
                #email="ngModel"
              />
              <div *ngIf="emailAlert" class="alert alert-danger">
                Please provide a valid email
              </div>
            </div>

            <div class="form-group form-divider" *ngIf="!guardianEmail">
              <div
                class="d-flex align-items-center cursor-on"
                (click)="guardianEmail = true"
              >
                <div class="plus-circle"></div>
                <span class="addEmail-text">Add guardian's email address</span>
              </div>
            </div>

            <div class="form-group form-divider" *ngIf="guardianEmail">
              <label for="guardmail" class="label-txt">Guardian email</label>
              <input
                type="email"
                class="form-control"
                placeholder="Type guardian email here"
                name="guardianEmail"
                [(ngModel)]="formFieldc.guardianEmail"
                (keyup)="validateGuarmail(formFieldc.guardianEmail)"
                #guardianEmail="ngModel"
              />
              <div *ngIf="guardianAlert" class="alert alert-danger">
                Please provide a valid email!
              </div>
            </div>
            <div *ngIf="isupdate == true" class="form-group form-divider">
              <label for="password" class="label-txt">Password</label>
              <input
                type="password"
                class="form-control"
                placeholder="Type password here"
                name="password"
                [(ngModel)]="formFieldc.password"
                #password="ngModel"
                (anyEventName)="whateverEventHandler($event)"
              />
              <div
                *ngIf="password.errors && (password.dirty || password.touched)"
                class="alert alert-danger"
              >
                <div [hidden]="!password.errors.required">
                  Password is required!
                </div>
              </div>
            </div>

            <div class="form-group form-divider">
              <div class="d-flex justify-content-between">
                <label for="about" class="label-txt">About</label>
                <div class="limit-wordcount1">
                  <span>{{ wordLength }}/280characters</span>
                </div>
              </div>
              <textarea
                class="form-control"
                rows="3"
                placeholder="Type about here"
                name="about"
                (focus)="focusMethod($event, 'about', $event.target.value)"
                (blur)="blurMethod($event, 'about')"
                maxlength="280"
                (input)="changeMethod($event.target.value)"
                [(ngModel)]="formFieldc.about"
                #about="ngModel"
              ></textarea>
            </div>
            <!-- <div class="form-group form-divider">
            <label for="guardmail" class="label-txt">Guardian email</label>
            <input
              type="email"
              class="form-control"
              placeholder="Type guardian email here"
              name="guardianEmail"
              [(ngModel)]="formFieldc.guardianEmail"
              (keyup)="validateGuarmail(formFieldc.guardianEmail)"
              #guardianEmail="ngModel"
            />
            <div *ngIf="guardianAlert" class="alert alert-danger">
              Please provide a valid email!
            </div>
          </div> -->
            <div
              class="form-group form-divider"
              *ngFor="let field of customFields; let i = index"
            >
              <label class="label-txt">{{ field.name }}</label>
              <div *ngIf="field.controlType == 'Textarea'">
                <input
                  *ngIf="field.dataType == 'Number'"
                  type="number"
                  placeholder="{{ field.description }}"
                  name="{{ field.name }}"
                  [(ngModel)]="field.value"
                  class="date-field"
                  (keypress)="numberOnly($event)"
                />
                <textarea
                  *ngIf="field.dataType === 'String'"
                  class="form-control"
                  rows="3"
                  placeholder="{{ field.description }}"
                  name="{{ field.name }}"
                  [(ngModel)]="field.value"
                ></textarea>
              </div>

              <div *ngIf="field.controlType === 'Datepicker'">
                <div class="input-wrap">
                  <div class="customField-dp">
                    <!-- <span class="dp-icon">
                    <img src="./assets/img/course-dp.png" />
                  </span> -->
                    <input
                      type="text"
                      placeholder="{{ field.description }}"
                      class="input-day dropD startInput"
                      name="{{ 'date' + i }}"
                      (click)="date.toggle()"
                      ngbDatepicker
                      [(ngModel)]="field.value"
                      (document:click)="closeDropdown($event, 'start', date)"
                      #date="ngbDatepicker"
                      readonly
                    />
                  </div>
                </div>
              </div>

              <div *ngIf="field.controlType === 'Radio'">
                <div
                  class="d-flex"
                  style="padding-bottom: 24px;cursor: pointer;"
                  *ngFor="let item of field.inputValues; let j = index"
                >
                  <label
                    for="{{ 'radio' + i + j }}"
                    class="m-0 p-0 d-flex align-items-center"
                  >
                    <input
                      type="radio"
                      id="{{ 'radio' + i + j }}"
                      (click)="radioCheck(item, field.inputValues)"
                      name="{{ 'radio' + i + j }}"
                      class="d-none"
                    />
                    <div *ngIf="!item.isCheck" class="rounded-box"></div>
                    <div *ngIf="item.isCheck" class="rounded-checked">
                      <span class="radio-checked"></span>
                    </div>
                    <div
                      class="box-label"
                      [ngClass]="{ checkedDate: item.isCheck }"
                    >
                      {{ item.name }}
                    </div>
                  </label>
                </div>
              </div>

              <div *ngIf="field.controlType === 'Checkbox'">
                <div
                  class="d-flex "
                  *ngFor="let item of field.inputValues; let j = index"
                  style="padding-bottom: 24px;cursor: pointer;"
                >
                  <label class="d-flex p-0 m-0 align-items-center">
                    <div *ngIf="!item.isCheck" class="square-box">
                      <!-- <i class="fa fa-check"></i> -->
                    </div>
                    <div *ngIf="item.isCheck" class="square-checked">
                      <i class="fa fa-check"></i>
                    </div>

                    <input
                      type="checkbox"
                      id="{{ 'checkBox' + i + j }}"
                      (click)="checkBoxCheck(item)"
                      name="{{ 'checkBox' + i + j }}"
                      class="regular-checkbox"
                      [checked]="item.isCheck"
                    />
                    <div
                      class="box-label"
                      [ngClass]="{ checkedDate: item.isCheck }"
                    >
                      {{ item.name }}
                    </div>
                  </label>
                </div>
              </div>
            </div>
            <!-- <div class="form-group form-divider" *ngFor="let field of formFieldc.details;">
                <label for="guardmail" class="label-txt">{{ field.name }}</label>
                <textarea class="form-control" rows="3" placeholder="{{ field.description }}" name="{{field.name}}" [(ngModel)]="field.value"></textarea>
              </div> -->
          </div>
          <div class="col-xs-12 col-sm-6 col-md-6 col-lg-5">
            <label for="upload">
              <div *ngIf="!imgDemoSlider" class="profile-box label-txt">
                <div class="form-group">
                  <label for="upload" class="profile-label">Profile</label
                  ><br />
                  <div class="circular-wrap">
                    <div class="circular-profile">
                      <img
                        *ngIf="isupdate == false"
                        src="assets/img/user.svg"
                      />
                      <img *ngIf="isupdate == true" src="{{ returnProfile }}" />
                    </div>
                  </div>
                  <div class="demo-wrap upload-demo">
                    <div class="container">
                      <div class="grid">
                        <div class="col-1-2">
                          <div class="actions">
                            <a class="btn file-btn">
                              <input
                                type="file"
                                class="upload-jpg form-control"
                                id="upload"
                                #cropper
                                (change)="uploadCropImg($event)"
                                value="Choose a file"
                                accept="image/*"
                                style="display:none"
                              />
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <p>Update photo</p>
                </div>
              </div>
            </label>
            <div class="frame-upload">
              <div class="upload-demo-wrap">
                <div id="upload-demo"></div>
              </div>
              <div class="row mr-button">
                <div
                  class="col-md-6 crop-box"
                  style="border-bottom-left-radius: 10px;"
                >
                  <div class="br-right">
                    <button
                      *ngIf="blankCrop"
                      class="upload-result btn1"
                      (click)="backToUpload()"
                    >
                      Cancel
                    </button>
                  </div>
                </div>
                <div
                  class="col-md-6 crop-box"
                  style="border-bottom-right-radius: 10px;"
                >
                  <button
                    *ngIf="blankCrop"
                    class="upload-result btn2"
                    id="sizeDisable"
                    (click)="cropResult()"
                    [value]="blankCrop"
                  >
                    Crop
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-end button-group">
          <button
            *ngIf="isupdate == false"
            type="button"
            class="bt cancel-button"
            (click)="back()"
          >
            Cancel
          </button>
          <button
            *ngIf="isupdate == true"
            type="button"
            class="bt cancel-button"
            (click)="backToDetails()"
          >
            Cancel
          </button>
          <button
            type="button"
            *ngIf="isupdate == false"
            type="submit"
            (click)="createUser(formFieldc, 'create')"
            class="btn create-button"
            [disabled]="
              !customerForm.valid || emailAlert || guardianAlert || sameMail
            "
          >
            Create
          </button>
          <button
            type="button"
            *ngIf="isupdate == true"
            type="submit"
            (click)="createUser(formFieldc, 'edit')"
            class="btn create-button"
            [disabled]="
              !customerForm.valid || emailAlert || guardianAlert || sameMail
            "
          >
            Update
          </button>
        </div>
        <!-- <div class="d-flex justify-content-end button-group">
        <button type="button" class="bt cancel-button" (click)="back()" >Cancel</button>
            <button *ngIf="isupdate == false" type="submit" (click)="createUser(formFieldc, 'create')" class="btn create-button" [disabled]="!customerForm.valid || (emailAlert || !formFieldc.email || !formFieldc.password ) && (guardianAlert || !formFieldc.guardianEmail)">Create
        </button>
        <button *ngIf="isupdate == true" type="submit" (click)="createUser(formFieldc, 'edit')" class="btn create-button" [disabled]="!customerForm.valid || (emailAlert || !formFieldc.email || !formFieldc.password ) && (guardianAlert || !formFieldc.guardianEmail)">Update
        </button>
      </div> -->
      </form>
    </div>
  </div>

  <ng-template #journalContent let-modal let-c="close" let-d="dismiss">
    <div class="modal-body" style="padding-top:0px !important;">
      <form>
        <div class="form-group">
          <div class="" style="padding-right:5px">
            <p class="cus-name col-md-10">
              {{ custDetail.user.preferredName }}
            </p>
            <button
              (click)="closeModal()"
              aria-label="Close"
              class="modal-close ml-auto"
              type="button"
              style="width:15% ; text-align: right"
            >
              <span class="closemark">
                <div class="closemark_stem"></div>
                <div class="closemark_kick"></div>
              </span>
              <!-- <span aria-hidden="true" >×</span> -->
            </button>
          </div>

          <p class="learn-journal  col-md-12">Progress Book</p>
          <p class="class-name  col-md-12">{{ className }}</p>
          <div class="no-journal" *ngIf="toShowNoJournl">
            <img
              class="no-journal-img"
              src="./assets/images/noJournal@2x.png"
            />
            <div
              style="color:#64707B; top:65%;position:absolute;text-align: center;width:100%"
            >
              No Journal Yet
            </div>
          </div>
          <div class="bull-shit-gp">
            <div
              class="bull-shit"
              *ngFor="let journal of journals; let last = last"
            >
              <div
                class="row eachJournl"
                *ngIf="journal.type == 1 && !journal.teacherOnly"
              >
                <div class="journal-side-bar">
                  <div class="img-container" style="background:#cce6ff">
                    <img
                      class="journal-img"
                      src="./assets/images/msg-journal@2x.png"
                      style="width:22px !important"
                    />
                  </div>
                  <div class="side-line" [class.last-side-line]="last"></div>
                </div>

                <div class="journal-content" [class.border-bott]="last">
                  <div class="journal-header">
                    Message
                    <div>
                      <p class="from">
                        from {{ journal.sender.preferredName }}
                      </p>
                      <p class="date float-right">
                        {{ journal.updatedDate | date: 'd MMM y' }}
                      </p>
                    </div>
                  </div>
                  <div class="journal-detail">
                    <p>
                      {{ journal.message }}
                    </p>
                    <img
                      class="message-img"
                      *ngIf="journal.photo != null"
                      src="{{ journal.photo }}"
                    />
                  </div>
                </div>
              </div>
              <div
                class="row eachJournl"
                *ngIf="journal.type == 1 && journal.teacherOnly"
              >
                <div class="journal-side-bar">
                  <div class="img-container" style="background:#b7cfe6">
                    <img
                      class="journal-img"
                      src="./assets/images/private-padlock@2x.png"
                      style="width:14px;height:18px;margin-top:32%"
                    />
                  </div>
                  <div class="side-line" [class.last-side-line]="last"></div>
                </div>
                <div class="journal-content" [class.border-bott]="last">
                  <div class="journal-header">
                    Private notes
                    <div>
                      <p class="from">
                        from {{ journal.sender.preferredName }}
                      </p>
                      <p class="date float-right">
                        {{ journal.updatedDate | date: 'd MMM y' }}
                      </p>
                    </div>
                  </div>
                  <div class="journal-detail">
                    <p>
                      {{ journal.message }}
                    </p>
                    <img
                      class="message-img"
                      *ngIf="journal.photo != null"
                      src="{{ journal.photo }}"
                    />
                  </div>
                </div>
              </div>
              <div class="row eachJournl" *ngIf="journal.type == 2">
                <div class="journal-side-bar">
                  <div class="img-container" tyle="background:#f23a30">
                    <img
                      class="journal-img"
                      src="./assets/images/journal-unpaid@2x.png"
                    />
                  </div>
                  <div class="side-line" [class.last-side-line]="last"></div>
                </div>
                <div class="journal-content" [class.border-bott]="last">
                  <div class="journal-header">
                    Payment
                    <div>
                      <p class="from">
                        from {{ journal.sender.preferredName }}
                      </p>
                      <p class="date float-right">
                        {{ journal.updatedDate | date: 'd MMM y' }}
                      </p>
                    </div>
                  </div>
                  <div class="journal-detail">
                    <p>
                      {{ journal.message }}
                    </p>
                    <img
                      class="message-img"
                      *ngIf="journal.photo != null"
                      src="{{ journal.photo }}"
                    />
                  </div>
                </div>
              </div>
              <div class="row eachJournl" *ngIf="journal.type == 3">
                <div class="journal-side-bar">
                  <div class="img-container" style="background:#c2f2d6">
                    <img
                      class="journal-img"
                      src="./assets/images/journal-tick@2x.png"
                    />
                  </div>
                  <div class="side-line" [class.last-side-line]="last"></div>
                </div>
                <div class="journal-content" [class.border-bott]="last">
                  <div class="journal-header">
                    Attendance
                    <div>
                      <p class="from">
                        from {{ journal.sender.preferredName }}
                      </p>
                      <p class="date float-right">
                        {{ journal.updatedDate | timezoneDate }}
                      </p>
                    </div>
                  </div>
                  <div class="journal-detail">
                    <p>
                      {{ journal.message }}
                    </p>
                    <img
                      class="message-img"
                      *ngIf="journal.photo != null"
                      src="{{ journal.photo }}"
                    />
                  </div>
                  <div
                    class="attendance-time"
                    [ngSwitch]="journal.type_detail.attendance"
                  >
                    <p class="atten-time">
                      {{ journal.type_detail.date | utcTime }}
                    </p>
                    <img
                      class="attendance-img"
                      src="assets/images/journal-check@2x.png"
                      *ngSwitchCase="true"
                    />
                    <img
                      class="attendance-img"
                      src="assets/images/journalCross@2x.png"
                      *ngSwitchCase="false"
                    />
                    <img
                      class="attendance-img"
                      src="assets/images/journalMinus@2x.png"
                      *ngSwitchCase="null"
                    />
                  </div>
                </div>
              </div>

              <div
                class="row j-load-more"
                *ngIf="toShowLoadMore && last"
                (click)="jLoadMore()"
              >
                <span style="margin-left:auto; margin-right: auto"
                  >load more</span
                >
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </ng-template>
  <ng-template #classEnrollModal let-c="close" let-d="dismiss">
    <app-invoice
      *ngIf="showInvoice == true || showPaidInvoice == true"
      [custDetail]="custDetail"
      [course]="selectedCourse"
      [invoiceId]="invoiceID2"
      (closed)="closeModal('closeInv')"
      class="app-inv-wrap"
    >
    </app-invoice>
    <div class="overlayModal" *ngIf="showcb" (click)="clickOverlay()"></div>
    <div
      class="flexiModal"
      *ngIf="showInvoice == false && showflexyCourse == true"
    >
      <div class="innerFlexiModal">
        <div class="d-flex" style="margin: 20px 20px 0px 32px;">
          <div class="d-flex back" (click)="backtoCustomer()">
            <i class="fa fa-angle-left flexiBackicon"></i>
            <p class="mb-0 font-medium ">Add customer</p>
          </div>
          <button
            (click)="closeModal('close')"
            aria-label="Close"
            class="modal-close ml-auto"
            type="button"
          >
            <span class="closemark">
              <div class="closemark_stem"></div>
              <div class="closemark_kick"></div>
            </span>
            <!-- <span aria-hidden="true" >×</span> -->
          </button>
        </div>
        <app-flexi
          [flexyarr]="flexyarr"
          [selectedCustomer]="selectedCustomer"
          [course]="selectedCourse"
          [showcb]="showcb"
          (passDataconflictBoxShow)="conflictBoxShow($event)"
          (checkObjArr)="lessionObjArr($event)"
        >
        </app-flexi>
      </div>
      <div
        class="modal-footer d-flex justify-content-between"
        style=" padding: 18px 25px 18px 25px;box-shadow: 0px -2px 4px rgba(0, 0, 0, 0.08);"
      >
        <div class="d-flex flex-column">
          <div class="d-flex">
            <div class="toggle-wrap" (click)="this.isProrated = !isProrated">
              <label class="switch">
                <input
                  type="checkbox"
                  (click)="isProrated = !this.isProrated"
                  [checked]="isProrated"
                />
                <span class="slider round"></span>
              </label>
            </div>
            <label class="switch-label" for="online">Prorated</label>
          </div>
          <p class="defaultLessonCount">
            Default lessons count: {{ selectedCourse.defaultlessonCount }}
          </p>
          <p class="textCount">Number of lessons required:</p>
          <div class="selectedCountBox">
            <p class="selectedTest">
              Selected lessons: {{ checkobjArr.length }}
            </p>
          </div>
        </div>
        <div class="">
          <button
            type="button"
            class="btn modal-cancel-btn"
            d-flex
            tab-section
            (click)="closeModal('close')"
          >
            Cancel
          </button>
          <button
            type="submit"
            class="btn btn-submit"
            *ngIf="checkobjArr.length != 0"
            (click)="flexicomfirm()"
          >
            Confirm
          </button>
          <button
            type="submit"
            *ngIf="checkobjArr.length == 0"
            class="btn btn-submit"
            disabled
          >
            Confirm
          </button>
        </div>
      </div>
    </div>
    <div
      *ngIf="
        showInvoice == false &&
        showPayment == false &&
        showPaidInvoice == false &&
        showflexyCourse == false
      "
    >
      <div class="d-flex modal-header">
        <h3 class="modal-title d-flex mr-auto">Enroll new class</h3>
        <div
          class="d-flex flex-column justify-content-center align-items-center mr-auto"
        >
          <div class="user-image">
            <img
              *ngIf="custDetail.user.profilePic == undefined"
              src="assets/img/user.svg"
            />
            <img
              *ngIf="custDetail.user.profilePic != undefined"
              src="{{ custDetail.user.profilePic }}"
            />
          </div>
          <p class="user-name">{{ custDetail.user.preferredName }}</p>
        </div>
        <button
          (click)="closeModal('close')"
          aria-label="Close"
          class="modal-close ml-auto"
          type="button"
        >
          <span class="closemark">
            <div class="closemark_stem"></div>
            <div class="closemark_kick"></div>
          </span>
        </button>
      </div>
      <form novalidate #cfees="ngForm">
        <div class="modal-body confirm-text">
          <div class="d-flex flex-column mt-37" style="position: relative;">
            <div class="d-flex">
              <input
                class="form-control py-2 input-search-bg"
                type="search"
                placeholder="Search class"
                id="example-search-input"
                name="search"
                #search="ngModel"
                [(ngModel)]="searchData.searchText"
                (input)="
                  changeSearch(
                    $event.target.value,
                    custDetail.user.userId,
                    '',
                    ''
                  )
                "
              />
              <span class="input-group-append">
                <button
                  class="bt btn-design btn-outline-secondary btn-right-radius"
                  type="button"
                >
                  <i class="fa fa-search search-size"></i>
                </button>
              </span>
            </div>
          </div>
          <div *ngIf="noSetting == true" class="seat-taken">
            You should set invoice setting and payment setting first.
          </div>
          <div class="mt-20 mb40 class-group">
            <div class="card-columns pd-zero">
              <div
                class="card"
                *ngFor="let course of availableCourses; let i = index"
              >
                <div class="single-class">
                  <div class="no-seat" *ngIf="course.seat_left == 0">
                    All seat taken
                  </div>
                  <div
                    class="seat-left"
                    *ngIf="course.seat_left != 0 && course.seat_left != null"
                  >
                    {{ course.seat_left }} seats left
                  </div>
                  <div class="seat-left" *ngIf="course.seat_left == null">
                    unlimited seats
                  </div>
                  <div class="class-info-head">
                    <h5 class="mt-03">
                      <i class="fa fa-map-marker" style="font-size:15px"></i>
                      {{ course.location.name }}
                    </h5>
                    <b>{{ course.name }}</b>
                  </div>
                  <div class="class-info-body">
                    <div
                      [hidden]="
                        !course.paymentPolicy.courseFee &&
                        !course.paymentPolicy.deposit &&
                        !course.paymentPolicy.miscFee &&
                        !course.paymentPolicy.proratedLessonFee
                      "
                      class="class-body-one row"
                    >
                      <div
                        class="col-sm-6 col-md-6 col-lg-6 col-xl-6 col-xxl-6"
                      >
                        <div *ngIf="course.paymentPolicy.courseFee != null">
                          <h5>Course fee</h5>
                          <sup>{{ currency.invCurrencySign }}</sup
                          ><b>{{ course.paymentPolicy.courseFee }}</b>
                        </div>
                        <div
                          *ngIf="course.paymentPolicy.proratedLessonFee != null"
                          class="mt-16"
                        >
                          <h5>Prorate class fee</h5>
                          <sup>{{ currency.invCurrencySign }}</sup
                          ><b>{{ course.paymentPolicy.proratedLessonFee }}</b>
                        </div>
                      </div>
                      <div
                        class="col-sm-6 col-md-6 col-lg-6 col-xl-6 col-xxl-6 pl-zero"
                      >
                        <div>
                          <div *ngIf="course.paymentPolicy.deposit">
                            <h5>Deposit</h5>
                            <sup>{{ currency.invCurrencySign }}</sup
                            ><b>{{ course.paymentPolicy.deposit.amount }}</b>
                          </div>
                        </div>
                        <div
                          class="mt-16"
                          *ngIf="course.paymentPolicy.miscFee != null"
                        >
                          <h5>Miscellaneous fee</h5>
                          <sup>{{ currency.invCurrencySign }}</sup
                          ><b>{{ course.paymentPolicy.miscFee }}</b>
                        </div>
                      </div>
                    </div>
                    <div class="class-body-two row">
                      <div
                        *ngIf="course.type != 'ONLINE'"
                        class="col-sm-6 col-md-6 col-lg-6 col-xl-6 col-xxl-6"
                      >
                        <b *ngFor="let day of course.repeatDays | weekDays">{{
                          day
                        }}</b>
                        <h5
                          *ngIf="
                            course.duration != undefined &&
                            course.duration.endDate != undefined
                          "
                        >
                          {{ course.duration.startDate | utcTime }} -
                          {{ course.duration.endDate | utcTime }}
                        </h5>
                      </div>
                      <div
                        class="col-sm-6 col-md-6 col-lg-6 col-xl-6 col-xxl-6 pl-zero"
                      >
                        <div class="d-flex detail-fees">
                          <div
                            class="col-sm-6 col-md-6 col-lg-6 col-xl-6 col-xxl-6 pl-zero pr-03"
                          >
                            <h5>From</h5>
                            <b>{{ course.startDate | utcDate }}</b>
                          </div>
                          <div
                            class="col-sm-6 col-md-6 col-lg-6 col-xl-6 col-xxl-6 pl-zero pr-zero"
                          >
                            <h5 *ngIf="course.endDate != null" class="mt-03">
                              To
                            </h5>
                            <h5
                              *ngIf="course.endDate == null"
                              class="pt-13"
                            ></h5>
                            <b *ngIf="course.endDate">{{
                              course.endDate | utcDate
                            }}</b>

                            <b *ngIf="course.endDate == null"
                              >{{
                                course.type == 'FLEXY'
                                  ? course.lessons.length
                                  : course.lessonCount
                              }}
                              Lessons</b
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="row d-flex justify-content-center class-info-footer"
                  >
                    <button
                      type="button"
                      class="btn"
                      (click)="enrollUser(course, course.type)"
                      [disabled]="course.isDisabled || noSetting == true"
                    >
                      Enroll on this course
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div
              *ngIf="availableCourses.length >= 20 && acResult?.length > 0"
              class="load-more1 d-flex justify-content-center"
            >
              <button
                type="button"
                class="btn"
                (click)="
                  showMoreAC(availableCourses.length, custDetail.user.userId)
                "
              >
                load more
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
    <!-- <div *ngIf="showInvoice == true && showPayment == false && showPaidInvoice == false" class="container-height">
    <div *ngIf="feesBox == true" class="overlayInv"></div>
    <div *ngIf="invStatus == 'PAID[PARTIAL]'" class="paid-header">PAID[PARTIAL]</div>
    <div class="invoice-container">
      <div class="d-flex justify-content-between">
        <div class="logo-wrapper">
          <img src="{{logo}}">
        </div>
        <div class="text-right">
          <h3 class="modal-title">Invoice</h3>
          <label class="mr-auto mb-0 invoice-info">{{ refInvID }}</label>
        </div>
      </div>
      <div class="pt-4">
        <h5 *ngIf="invoiceInfo.companyName != ''" class="invoice-label">{{ invoiceInfo.companyName }}</h5>
        <h5 *ngIf="invoiceInfo.companyName == ''" class="invoice-label"> - </h5>
        <div class="d-flex">
          <div class="col-md-6 col-lg-6 pl-zero">
            <p *ngIf="invoiceInfo.address != '' || invoiceInfo.address != undefined" class="invoice-info">{{
              invoiceInfo.address }}</p>
            <p *ngIf="invoiceInfo.address == ''" class="invoice-info"> - </p>
          </div>
          <div class="col-md-3 col-lg-3 text-right">
            <label class="invoice-label">Invoice date</label>
            <p class="invoice-info">{{ updatedDate }}</p>
          </div>
          <div class="col-md-3 col-lg-3 text-right">
            <label class="invoice-label">Due date</label>
            <p class="invoice-info">{{ dueDate }}</p>
          </div>
        </div>
        <p class="invoice-info">{{ invoiceInfo.email }}<p>
      </div>
      <div class="pb-4">
        <label class="invoice-label mb-0">Bill to: <span class="p2 price-info">{{ custDetail.user.preferredName }}</span></label>
        <div class="d-flex">
          <p class="invoice-info label-height mb-0">
            <span *ngIf="custDetail.user.email != ''">{{ custDetail.user.email }}</span>
            <span *ngFor="let mail of custDetail.user.guardians">{{ mail.email }}</span>
            <span *ngIf="custDetail.user.email == '' && custDetail.user.guardians?.length == 0">-</span>
          </p>
        </div>
      </div>
      <div *ngIf="invPayment?.length > 0">
        <div class="d-flex">
          <div class="col-md-4 p-0">
            <label class="invoice-label">Amount</label>
          </div>
          <div class="col-md-4">
            <label class="invoice-label">Billed paid</label>
          </div>
          <div class="col-md-4">
            <label class="invoice-label">Payment method</label>
          </div>
        </div>
        <div *ngFor="let payment of invPayment">
          <div *ngIf="payment.status == 'COMPLETE'" class="d-flex pb-4">
            <div class="col-md-4 p-0 d-flex invoice-label">
              <span>{{invCurrency.sign}}</span>
              <div>{{ payment.amount }}</div>
            </div>
            <div class="col-md-4">
              <p class="invoice-info">{{payment.updatedDate | dateFormat}}</p>
            </div>
            <div class="col-md-4">
              <div class="d-flex">
                <div style="width: 55px;">
        
                  <i class="fa fa-credit-card" style="font-size: 30px;"></i>
                </div>
                <div class="pl-3" *ngIf="payment.brandName || payment.cardNumber">
                  <label class="mb-0 c-label">{{ payment.brandName }}</label>
                  <div class="d-flex price-info">
                    {{ payment.cardNumber }}
                  </div>
                </div>
                <div class="c-label" *ngIf="payment.paymentMethod == 0">
                  Cash
                </div>
                <div class="c-label" *ngIf="payment.paymentMethod == 1">
                  Credit/Debit Card
                </div>
                <div class="c-label" *ngIf="payment.paymentMethod == 2">
                  Cheque
                </div>
                <div class="c-label" *ngIf="payment.paymentMethod == 3">
                  Others
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex invoice-label fees-header bg-label">
        <div class="col-md-5 p-0">Course</div>
        <div class="col-md-1 p-0 text-right">Quantity</div>
        <div class="col-md-2 p-0 text-right">Unit price</div>
        <div class="col-md-2 p-0 text-right">Tax<span *ngIf="invTaxName">({{invTaxName}})</span></div>
        <div class="col-md-2 p-0 text-right">Amount</div>
      </div>
      <div *ngFor="let data of invoice">
        <div>
          <div class="inv-Cname">
            {{ invoiceCourse.name }}
            <div>
              <span>From: {{ invoiceCourse.startDate|utcDate }}</span><span class="pl-3" *ngIf="invoiceCourse.endDate">To:
                {{ invoiceCourse.endDate|utcDate }}</span><span class="pl-3" *ngIf="invoiceCourse.lessonCount">{{
                invoiceCourse.lessonCount }} lessons</span>
            </div>
          </div>
          <div class="d-flex inv-courseFee">
            <div class="cFee-w"></div>
            <div class="d-flex w-100 mlr-15">
              <div class="col-md-5 p-0 price-info">Course Fee</div>
              <div class="col-md-1 p-0 text-right price-info">1</div>
              <div class="col-md-2 p-0 text-right price-info">
                <div *ngIf="feesBox == true" class="popup-box price-box text-left">
                  <div id="rectangle"></div>
                  <div class="p-3">
                    <h5>CourseFee</h5>
                    <div class="d-flex popup-input">
                      <div class="input-sign">
                        {{ invCurrency.sign }}
                      </div>
                      <input type="number" name="discount" class="w-100 input-txt" placeholder="0" [(ngModel)]="value.courseFee">
                    </div>
                  </div>
                </div>
                <div *ngIf="feesBox == true" class="d-flex btns-wrap">
                  <button type="submit" class="btn" (click)="cancelPopup('courseFee')">
                    <span class="closemark">
                      <div class="closemark_stem"></div>
                      <div class="closemark_kick"></div>
                    </span>
                  </button>
                  <button type="submit" class="btn" (click)="updateCfee(value.courseFee)" [disabled]="value.courseFee == undefined || value.courseFee == '' || value.courseFee == data.courseFee.fee">
                    <span class="checkmark">
                      <div class="checkmark_stem"></div>
                      <div class="checkmark_kick"></div>
                    </span>
                  </button>
                </div>
                <p class="mb-0" (click)="showPopup('courseFee',data.courseFee.fee)">{{data.courseFee.fee}}</p>
              </div>
              <div class="col-md-2 p-0 text-right price-info">
                {{data.courseFee.tax}} <span *ngIf="data.courseFee.taxInclusive == true" class="tax-status">(inclusive)</span>
                <span *ngIf="data.courseFee.taxInclusive == false" class="tax-status">(exclusive)</span>
              </div>
              <div class="col-md-2 p-0 text-right price-info">{{invCurrency.sign}}{{data.courseFee.amount}}</div>
            </div>
          </div>
        </div>
        <div class="inv-bordered">
          <div *ngIf="hideReg == false" class="d-flex inv-row">
            <div class="row-icon cursor-on" (click)="hideInvoiceRow('reg')">
              <img src="./assets/images/withdraw-ico@2x.png">
            </div>
            <div class="d-flex w-100 b-bottom mlr-15">
              <div class="col-md-5 p-0 price-info">
                Registration Fee
              </div>
              <div class="col-md-1 p-0 text-right price-info">1</div>
              <div class="col-md-2 p-0 text-right price-info">
                <p class="mb-0">{{data.registrationFee.fee}}</p>
              </div>
              <div class="col-md-2 p-0 text-right price-info">
                {{data.registrationFee.tax}} <span *ngIf="data.registrationFee.taxInclusive == true" class="tax-status">(inclusive)</span>
                <span *ngIf="data.registrationFee.taxInclusive == false" class="tax-status">(exclusive)</span>
              </div>
              <div class="col-md-2 p-0 text-right price-info">{{invCurrency.sign}}{{data.registrationFee.amount}}</div>
            </div>
          </div>
          <div *ngIf="hideMisc == false" class="d-flex inv-row">
            <div class="row-icon cursor-on" (click)="hideInvoiceRow('misc')">
              <img src="./assets/images/withdraw-ico@2x.png">
            </div>
            <div class="d-flex w-100 b-bottom mlr-15">
              <div class="col-md-5 p-0 price-info">
                Miscellaneous fee
              </div>
              <div class="col-md-1 p-0 text-right price-info">1</div>
              <div class="col-md-2 p-0 text-right price-info">
                <p class="mb-0">{{data.miscFee.fee}}</p>
              </div>
              <div class="col-md-2 p-0 text-right price-info">
                {{data.miscFee.tax}} <span *ngIf="data.miscFee.taxInclusive == true" class="tax-status">(inclusive)</span>
                <span *ngIf="data.miscFee.taxInclusive == false" class="tax-status">(exclusive)</span>
              </div>
              <div class="col-md-2 p-0 text-right price-info">{{invCurrency.sign}} {{data.miscFee.amount}}</div>
            </div>
          </div>
          <div *ngIf="hideDeposit == false" class="d-flex inv-row">
            <div class="row-icon cursor-on" (click)="hideInvoiceRow('deposit')">
              <img src="./assets/images/withdraw-ico@2x.png">
            </div>
            <div class="d-flex w-100 b-bottom mlr-15">
              <div class="col-md-5 p-0 price-info">Deposit</div>
              <div class="col-md-1 p-0 text-right price-info">1</div>
              <div class="col-md-2 p-0 text-right price-info">
                <p class="mb-0">{{data.deposit}}</p>
              </div>
              <div class="col-md-2 p-0 text-right price-info"></div>
              <div class="col-md-2 p-0 text-right price-info">{{invCurrency.sign}} {{data.deposit}}</div>
            </div>
          </div>
        </div>
        <hr class="invoice-hr">
        <div class="d-flex justify-content-end">
          <div class="w-50">
            <div class="d-flex pad-10 price-info">
              <div class="col-md-8 d-flex p-0">
                <div class="col-sm-7 text-right p-0">
                  Sub total
                </div>
                <div class="col-sm-5 p-0">
                </div>
              </div>
              <div class="col-md-4 text-right">{{invCurrency.sign}} {{ data.subtotal }}</div>
            </div>
            <div class="d-flex invoice-label amount-result pad-10 mb-4 mt-3">
              <div class="col-md-8 d-flex p-0">
                <div class="col-sm-7 text-right p-0">
                  Amount due
                </div>
                <div class="col-sm-5 text-right p-0"></div>
              </div>
              <div class="col-md-4 text-right">{{invCurrency.sign}} {{ total }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer justify-content-between">
      <div class="d-flex">
        <button type="button" class="btn invModal-cancel" (click)="closeModal('closeInv')">Close</button>
        <div class="l-border">
          <button class="btn-print cursor-on" (click)="printInvoice()"><img src="./assets/images/print@2x.png"></button>
        </div>
      </div>
      <div>
        <button *ngIf="isEditInv == false" class="btn send-btn" [disabled]="custDetail.user.email == '' && custDetail.user.guardians?.length == 0"
          (click)="sendInvoice()">Send invoice</button>
        <button *ngIf="isEditInv == true" class="btn send-btn" [disabled]="custDetail.user.email == '' && custDetail.user.guardians?.length == 0"
          (click)="updateInvoice()">Save</button>
      </div>
    </div>
  </div> -->
    <div *ngIf="showPayment == true">
      <div class="invoice-container">
        <div class="logo-wrapper">
          <img src="{{ logo }}" />
        </div>
        <div class="mt-40">
          <label class="payment-label">Choose payment method</label>
          <div class="d-flex mt-1">
            <div class="payment-item" *ngFor="let provider of paymentProviders">
              <label
                [ngClass]="{ selectedItem: selectedPayment == provider.name }"
                class="form-check-label"
              >
                <input
                  class="form-check-input"
                  type="radio"
                  name="payment"
                  id="payment1"
                  value="provider.name"
                  [(ngModel)]="paymentItem.type"
                  #payment="ngModel"
                  (click)="choosePayment(provider)"
                />
                {{ provider.name }}
              </label>
            </div>
          </div>
          <div>
            <form #paymentForm="ngForm" nonvalidate>
              <div class="mt-30">
                <label class="payment-label">Reference number</label>
                <div>
                  <input
                    type="text"
                    name="ref"
                    class="w-75 cash-input"
                    placeholder="Reference number"
                    [(ngModel)]="paymentItem.refNumber"
                    #refNumber="ngModel"
                  />
                </div>
              </div>
              <div class="mt-30">
                <label class="payment-label">Amount</label>
                <div class="d-flex popup-input w-75">
                  <div class="input-sign">
                    {{ currency.invCurrencySign }}
                  </div>
                  <input
                    type="number"
                    name="amount"
                    class="w-100 cash-input"
                    placeholder="0"
                    [(ngModel)]="paymentItem.amount"
                    #amount="ngModel"
                    required
                  />
                </div>
                <div
                  *ngIf="amount.invalid && (amount.dirty || amount.touched)"
                  class="alert alert-danger alert-m-right w-75 mt-3"
                >
                  <div [hidden]="!amount.errors.required">
                    Amount is required!
                  </div>
                  <!-- <div *ngIf="paymentItem.amount <= 0 && !amount.errors.required">
					    	Amount should be grater than 0;
					    </div> -->
                </div>
              </div>
            </form>
          </div>
          <!-- <div *ngIf="selectedPayment != 'Cash'">
				<div class="mt-30">
					<label class="payment-label">Reference number</label>
					<div>
					  <input type="text" name="ref" class="w-75 cash-input" placeholder="Reference number" [(ngModel)]="refInvID" readonly>
					</div>
				</div>
	        </div> -->
        </div>
      </div>
      <div
        *ngIf="selectedPayment != ''"
        class="modal-footer d-flex justify-content-between payment-footer"
      >
        <button class="back-inv cursor-on" (click)="backToInvoice()">
          <i class="fa fa-angle-left"></i><span>Back</span>
        </button>
        <button
          class="btn btn-submit cursor-on"
          (click)="payNow(selectedPayment)"
          [disabled]="
            paymentItem.amount == '' ||
            paymentItem.amount == undefined ||
            paymentItem.amount <= 0
          "
        >
          Pay now
        </button>
        <!-- <button *ngIf="selectedPayment != 'Cash'" class="btn btn-submit cursor-on" (click)="payNow(selectedPayment)">
	      	Pay now
	      </button> -->
      </div>
    </div>
  </ng-template>

  <ng-template #claimModal let-c="close" let-d="dismiss">
    <div class="modal-header d-flex justify-content-between">
      <div>
        <p class="valid-until">
          Valid until
          <span
            >{{ currentPassObj.expirationDate.day }}
            {{ currentPassObj.expirationDate.month - 1 | TTmonth }}
            {{ currentPassObj.expirationDate.year }}</span
          >
        </p>
        <h3 class="modal-title">{{ currentPassObj.name }}</h3>
      </div>
      <button
        type="button"
        class="close"
        aria-label="Close"
        (click)="closeModal('close')"
      >
        <span class="closepass">
          <div class="closepass_stem"></div>
          <div class="closepass_kick"></div>
        </span>
      </button>
    </div>
    <div class="modal-body confirm-text">
      <div>
        <input
          type="search"
          name=""
          class="form-control course-search-input"
          placeholder="Search courses"
          (input)="searchMakeup($event.target.value)"
        />
      </div>
      <div class="mt-20 class-group">
        <div class="card-columns pd-zero" *ngIf="claimCourses">
          <div class="card" *ngFor="let claim of claimCourses; let i = index">
            <div class="single-class">
              <div class="no-seat" *ngIf="claim.seat_left == 0">
                All seat taken
              </div>
              <div
                class="seat-left"
                *ngIf="claim.seat_left != 0 && claim.seat_left != null"
              >
                {{ claim.seat_left }} seats left
              </div>
              <div class="seat-left" *ngIf="claim.seat_left == null">
                unlimited seats
              </div>
              <div class="class-info-head">
                <h5 class="mt-03">
                  <i class="fa fa-map-marker" style="font-size:15px"></i>
                  {{ claim.location.name }}
                </h5>
                <b>{{ claim.name }}</b
                ><br />
                <label class="makeup-plan">
                  <span *ngIf="claim.startTime"
                    >{{ claim.startTime.hr | timeFormat }} :
                    {{ claim.startTime.min | timeFormat }}
                    {{ claim.startTime.meridiem }}</span
                  >
                  -
                  <span *ngIf="claim.endTime"
                    >{{ claim.endTime.hr | timeFormat }} :
                    {{ claim.endTime.min | timeFormat }}
                    {{ claim.endTime.meridiem }}</span
                  >
                </label>
              </div>
              <div class="d-flex flex-column count-wrap w-100">
                <div class="d-flex justify-content-between">
                  <p class="valid-until">Pick a date to claim makeup pass</p>
                  <div>
                    <img
                      src="./assets/img/chevron-right-s.png"
                      (click)="backward('timeline-' + i)"
                      class="mr-32"
                    />
                    <img
                      src="./assets/img/chevron-left-s.png"
                      (click)="forward('timeline-' + i)"
                    />
                  </div>
                </div>

                <div id="timeline-{{ i }}" class="timeline">
                  <div
                    *ngFor="let lesson of claim.lessons"
                    class=" form-check-inline tool-checked"
                  >
                    <label
                      [ngClass]="{ selected: isChecked == lesson._id }"
                      class="form-check-label"
                    >
                      <input
                        class="form-check-input"
                        type="radio"
                        name="passForm"
                        id="course"
                        value="{{ lesson }}"
                        [(ngModel)]="passForm.lesson"
                        #course="ngModel"
                        [checked]="false"
                        (click)="chooseDate(lesson, claim)"
                      />
                      <p class="xxxdate">
                        {{ lesson.startDate | timelineDate }}
                      </p>
                      <p class="xxxday">{{ lesson.startDate | timelineDay }}</p>
                    </label>
                  </div>
                </div>

                <!-- <div id="timeline-{{i}}" class="d-flex timeline flex-nowrap">
	    					<div class="d-flex flex-nowrap">
		    					<div *ngFor="let lesson of claim.lessons" class="form-check form-check-inline tool-checked">
		    						<label [ngClass]="{'selected': isChecked == lesson.startDate}" class="form-check-label">
		    						  <input class="form-check-input" type="radio" name="passForm" id="course" value="{{lesson}}" [(ngModel)]="passForm.lesson" #course="ngModel" [checked]='false' (click)="chooseDate(lesson, claim)"> 
		    						  <p class="xxxdate">{{lesson.startDate | timelineDate}}</p>
		    						  <p class="xxxday">{{lesson.startDate | timelineDay}}</p>
		    						</label>
		    					</div>
	    					</div>
	    				</div> -->
              </div>
              <div class="row d-flex justify-content-center class-info-footer">
                <button
                  type="button"
                  class="btn enroll-button"
                  (click)="enrollPass(claim, currentPassObj.course.courseId)"
                  [disabled]="checkCourse != claim.courseId"
                >
                  Claim class
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <block-ui message="Deafult Message"></block-ui>
</div>
