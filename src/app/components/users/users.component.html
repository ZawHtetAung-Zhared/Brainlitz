<!-- <app-header></app-header> -->
<!-- <div style="padding: 30px 50px;">
	<button type="button" class="btn btn-primary" data-toggle="modal" (click)="open1(staffModal)">
		+ Create Staff
	</button>
	<button type="button" class="btn btn-primary" data-toggle="modal" (click)="open2(customerModal)">
		+ Create Customer
	</button>
</div> -->

<!-- Staff Modal -->
<!-- <ng-template #staffModal let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title">Create Staff</h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
	      <span aria-hidden="true">&times;</span>
	    </button>
    </div>
    <form novalidate #s="ngForm">
  		<div class="modal-body">
      	<div class="form-group">
  	    	<label for="fname">First Name</label> 	
  	    	<input type="text" class="form-control" placeholder="Enter user name" name="fname" [(ngModel)]="formFields.firstName" #fname="ngModel">
  	  	</div>
  	  	<div class="form-group">
  	    	<label for="lname">Last Name</label> 	
  	    	<input type="text" class="form-control" placeholder="Enter user name" name="lname" [(ngModel)]="formFields.lastName" #lname="ngModel">
  	  	</div>
  	  	<div class="form-group">
  	    	<label for="dname">Display Name</label> 	
  	    	<input type="text" class="form-control" placeholder="Enter user name" name="preferredName" [(ngModel)]="formFields.preferredName" #preferredName="ngModel" maxlength="15" required>
  	    	<span style="color:red" *ngIf="formFields.preferredName?.length >= 15 ">
			      Display Name cannot be more than 15 characters long.
			</span>
			<div *ngIf="preferredName.errors && (preferredName.dirty || preferredName.touched)" class="alert alert-danger">
		        <div [hidden]="!preferredName.errors.required">
		          Display name is required!
		        </div>
		    </div>
  	  	</div>
  	  	
  	  	<div class="form-group">
  	    	<label for="mail">Email</label> 	
  	    	<input type="email" (keyup)="validateEmail(formFields.email)" class="form-control" placeholder="Enter user name" name="mail" [(ngModel)]="formFields.email" required #mail="ngModel">
  	    	<div *ngIf="emailAlert" class="alert alert-danger">
  	    		Please provide a valid email
  	    	</div>
  	    	<div *ngIf="!emailAlert">
  	    		<div *ngIf="mail.errors && (mail.dirty || mail.touched)" class="alert alert-danger">
			        <div [hidden]="!mail.errors.required">
			          Email is required!
			        </div>
			    </div>
  	    	</div>
  	  	</div>
  	  	<div class="form-group" *ngIf="notShowEdit">
		  	<label for="pwd">Password</label>
		  	<input type="password" class="form-control" placeholder="Enter password" name="pwd" [(ngModel)]="formFields.pwd" required #password="ngModel">
			<div *ngIf="password.errors && (password.dirty || password.touched)" class="alert alert-danger">
		        <div [hidden]="!password.errors.required">
		          Password is required!
		        </div>
		    </div>
		</div>
			<div class="form-group">
				<label>Permission as</label><br>
				<div class="form-check form-check-inline" *ngFor="let user of permissionLists; let i = index;" >
					<input type="radio" id="{{user._id}}" value="{{user._id}}" name="role" [(ngModel)]="formFields.permission" [checked]="permissionId.indexOf(user._id) != -1" #permis="ngModel" required>
				  	<label for={{user._id}} class="form-check-label mr-lt">{{user.name}}</label>
				  	<div *ngIf="permis.errors && (permis.dirty || permis.touched)" class="alert alert-danger">
				        <div [hidden]="!permis.errors.required">
				          Permission is required!
				        </div>
				    </div>
				</div>
			</div>	
		  	<div class="form-group">
		  		<label for="exampleInputFile">Upload Profile</label>
				<div class="demo-wrap upload-demo">
		          	<div class="container tab-pad">
			            <div class="grid">
			              <div class="col-1-2">
			                <div class="actions">
			                  <a class="btn file-btn">
			                    <input type="file" class="upload-jpg form-control" id="upload" #cropper (change)='uploadCropImg($event)' value="Choose a file"
			                      accept="image/*" />
			                  </a>
			                  <button *ngIf="blankCrop"class="upload-result result-color" id="sizeDisable" (click)="cropResult()" [value]="blankCrop">Crop</button>
			                </div>
			              </div><br />
			              <div class="upload-demo-wrap">
			                <div id="upload-demo"></div>
			              </div>
			            </div>
		          	</div>
	        	</div>
		  	</div>
    	</div>
      	<div class="modal-footer">
	      	<button type="button" class="btn btn-light1" (click)="c('Close click')">Cancel</button>
	        <button [hidden]="!createButton" type="submit" (click)="createUser(s.value, 'staff', 'create')" class="btn btn-primary" [disabled]="s.invalid || emailAlert">Create</button>
	        <button [hidden]="!updateButton" type="submit" (click)="createUser(s.value, 'staff', 'update')" class="btn btn-primary" [disabled]="s.invalid">Update</button>
      	</div>
	</form>
</ng-template>
<block-ui message="Deafult Message"></block-ui> -->
<!-- Customer Modal -->
<!-- <ng-template #customerModal let-c="close" let-d="dismiss">
		<div class="modal-header">
      	<h4 class="modal-title">Create Customer</h4>
      	<button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
	    	<span aria-hidden="true">&times;</span>
		</button>
		</div>
		<form novalidate #f="ngForm">
      	<div class="modal-body">
    		<div class="form-group">
	  	    	<label for="fname">First Name</label> 	
	  	    	<input type="text" class="form-control" placeholder="Enter user name" name="fname" [(ngModel)]="formFieldc.firstName" #fname="ngModel">
	  	  	</div>
	  	  	<div class="form-group">
	  	    	<label for="lname">Last Name</label> 	
	  	    	<input type="text" class="form-control" placeholder="Enter user name" name="lname" [(ngModel)]="formFieldc.lastName" #lname="ngModel">
	  	  	</div>
	  	  	<div class="form-group">
	  	    	<label for="dname">Display Name</label> 	
	  	    	<input type="text" class="form-control" placeholder="Enter user name" name="preferredName" [(ngModel)]="formFieldc.preferredName" #preferredName="ngModel" required maxlength="15">
	  	    	<span style="color:red" *ngIf="formFieldc.preferredName?.length >= 15 ">
				      Display Name cannot be more than 15 characters long.
				</span>
				<div *ngIf="preferredName.errors && (preferredName.dirty || preferredName.touched)" class="alert alert-danger">
			        <div [hidden]="!preferredName.errors.required">
			          Display name is required!
			        </div>
			    </div>
	  	  	</div>
	  	  	<div class="form-group">
	  	    	<label for="mail">Email</label> 	
	  	    	<input type="email" (keyup)="validateEmail(formFieldc.email)" class="form-control" placeholder="Enter email" name="mail" [(ngModel)]="formFieldc.email" #mail="ngModel">
	  	    	<div *ngIf="emailAlert" class="alert alert-danger">
	  	    		Please provide a valid email!
	  	    	</div>
	  	  	</div>
		  	<div class="form-group">
				<label for="pwd">Password</label>
				<input type="password" class="form-control" placeholder="Enter password" name="pwd" [(ngModel)]="formFieldc.pwd" #pwd="ngModel">
				<div *ngIf="pwd.errors && (pwd.dirty || pwd.touched)" class="alert alert-danger">
			        <div [hidden]="!pwd.errors.required">
			          Password is required!
			        </div>
			    </div>
			</div>
			<div class="form-group">
	  	    	<label for="gmail">Guardian Email</label>
	  	    		<input type="email" class="form-control" (keyup)="validateGuarmail(formFieldc.guardianEmail)" placeholder="Enter guardian mail" name="guardianmail" [(ngModel)]="formFieldc.guardianEmail" #gmail="ngModel">
	  	    	<div *ngIf="guardianAlert" class="alert alert-danger">
	  	    		Please provide a valid email!
	  	    	</div>
	  	  	</div>
	  	  	<div *ngIf="atLeastOneMail" class="alert alert-danger" style="margin-top:10px;">
  	    		Email or Guardian Email is required!
  	    	</div>
			<div class="form-group">
				<label for="exampleInputFile">Upload Profile</label>
				<div class="demo-wrap upload-demo">
		          	<div class="container tab-pad">
			            <div class="grid">
		              	<div class="col-1-2">
		                	<div class="actions">
		                		<a class="btn file-btn">
		                  		<input type="file" class="upload-jpg form-control" id="upload" #cropper (change)='uploadCropImg($event)' value="Choose a file" accept="image/*" />
		                		</a>
		                		<button *ngIf="blankCrop"class="upload-result result-color" id="sizeDisable" (click)="cropResult()" [value]="blankCrop">Crop</button>
		                	</div>
		              	</div><br />
				            <div class="upload-demo-wrap">
				              <div id="upload-demo"></div>
				            </div>
			            </div>
		       		 </div>
			    </div>
		  	</div>
		</div>
    	<div class="modal-footer">
       	<button type="button" class="btn btn-light1" (click)="c('Close click')">Cancel</button>
        	<button [hidden]="!createButton" type="submit" (click)="createUser(f.value, 'customer', 'create')" class="btn btn-primary" [disabled]="f.invalid">Submit
			</button>
      	</div>
	</form>
</ng-template> -->
<!-- 
<div class="d-flex flex-row h-100 w-100" style="display: flex;">
	<div class="col-md-2 noti-sidebar tab-pad">
		<div class="d-flex flex-column justify-content-center">
			<div [ngClass]="{'active': userType == 'all'}" class="tab-wrap">			
				<button class="btn noti-tab w-100 shadow-remove" (click)="clickTab('all')">All Users</button>
			</div>
			<div [ngClass]="{'active': userType == 'customer'}" class="tab-wrap">			
				<button class="btn noti-tab w-100 shadow-remove" (click)="clickTab('customer')">Customers</button>
			</div>
			<div [ngClass]="{'active': userType == 'staff'}" class="tab-wrap">			
				<button class="btn noti-tab w-100 shadow-remove" (click)="clickTab('staff')">Staffs</button>
			</div>
		</div>
	</div>
	<div *ngIf="userType == 'all'" class="col-md-10 min-scroll">
		<ul class="list-group-flush">
			<li class="list-group-item" *ngFor="let user of userLists; let i = index">
				<div class="count-pos">{{i+1}}- </div>
				<span *ngIf="user.preferredName != undefined">Name: {{user.preferredName}}</span>
				<span *ngIf="user.preferredName == undefined">Name: -</span>
				<div class="bt-mr">
					<span>
						Email: <input class="usermail" id="{{user.userId}}" type="text" value="{{user.email}}">
					</span>
					<span *ngIf="user.email" class="bt-copy" (click)="copyText(user.userId)">
						<img style="width: 25px;" src="./assets/img/clipboard.png" placement="top" ngbTooltip="Copy email">
					</span>
				</div>
			</li>
		</ul>
	</div>
	<div *ngIf="userType == 'customer'" class="col-md-10 min-scroll">
		<ul class="list-group-flush">
			<li class="list-group-item" *ngFor="let customer of customerLists; let i = index">
				<div class="count-pos">{{i+1}}- </div>
				<span *ngIf="customer.preferredName != undefined">Name: {{customer.preferredName}}</span>
				<span *ngIf="customer.preferredName == undefined">Name: -</span>
				<div class="bt-mr">
					<span>
						Email: <input class="usermail" id="{{customer.userId}}" type="text" value="{{customer.email}}">
					</span>
					<span *ngIf="customer.email" class="bt-copy" (click)="copyText(customer.userId)">
						<img style="width: 25px;" src="./assets/img/clipboard.png" placement="top" ngbTooltip="Copy email">
					</span>
				</div>
			</li>
		</ul>
	</div>
	<div *ngIf="userType == 'staff'" class="col-md-10 min-scroll">
		<ul class="list-group-flush">
			<li class="list-group-item" *ngFor="let staff of staffLists; let i = index">
				<div class="count-pos">{{i+1}}- </div>
				<span *ngIf="staff.preferredName != undefined">Name: {{staff.preferredName}}</span>
				<span *ngIf="staff.preferredName == undefined">Name: -</span>
				<div class="bt-mr">
					<span>
						Email: <input class="usermail" id="{{staff.userId}}" type="text" value="{{staff.email}}">
					</span>
					<span *ngIf="staff.email" class="bt-copy" (click)="copyText(staff.userId)">
						<img style="width: 25px;" src="./assets/img/clipboard.png" placement="top" ngbTooltip="Copy email">
					</span>
				</div>
			</li>
		</ul>
	</div>	
</div> -->


<app-header [ngClass]="{'stick': isSticky == true}"></app-header>
<div class="inner-wrapper" [ngClass]="{'pdactive': isSticky == true}">
	<div class="title">
		<div class="col-md-4 pad-0 mr-bt-40" style="float: left;">
			<h3>Customers</h3>
		</div>
		<div class="col-md-8 pad-0 mr-bt-40" style="float: right;">
			<button type="button" class="btn btn-primary create-button-pos" (click)="open2(customerModal)">Add new customer</button>
		</div>
		<div class="col-md-12 pad-0" style="margin-top: 35px;">
			<div class="input-group col-md-12 pad-0">
			    <input class="form-control py-2 input-search-bg" type="search" placeholder="Search customer here" id="example-search-input">
			    <span class="input-group-append">
			        <button class="bt btn-design btn-outline-secondary" type="button">
			            <i class="fa fa-search search-size"></i>
			        </button>
			     </span>
			</div>
		</div>
		<div class="row display-flex">
			<div class="col-md-6 mr-box display-block" *ngFor="let customer of customerLists; let i = index">
				<div class="box-design display-flex pos-relative">
					<div class="no-line-height">
						<div class="circular-image">
							<img src="{{customer.profilePic}}">
						</div>
					</div>
					<div class="info-side">
						<h5 class="text-vertical">{{customer.preferredName}}</h5>
						<p class="info-mail">{{customer.email}}</p>
					</div>
					<div>
						<i class="fa fa-angle-right right-arrow"></i>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div *ngIf="showFormCreate">
		<button type="button" class="back-button display-flex" (click)="back()">
			<i class="fa fa-angle-left left-arrow"></i> <p class="back-staff-txt">Customers</p>
		</button>
		<div class="col-md-12 pad-0 mr-bt-top">
			<h3>Create customer account</h3>
		</div>
		<form novalidate #f="ngForm">
			<div class="row display-flex">
				<div class="col-md-7 pad-bottom">
					<div class="form-group">
			  	    	<label for="prename" class="label-txt">What should we call you? <br> <span>e.g. How your call you or like your preferred name</span></label> 	
			  	    	<input type="text" class="form-control bt-line" placeholder="Type preferred name here" name="preferredname" [(ngModel)]="prename" #preferredname="ngModel">
			  	  	</div>
			  	  	<div class="form-group">
			  	    	<label for="fullname" class="label-txt">Full name</label> 	
			  	    	<input type="text" class="form-control bt-line" placeholder="Type full name here" name="fullname" [(ngModel)]="name" #fullname="ngModel">
			  	  	</div>
			  	  	<div class="form-group">
			  	    	<label for="email" class="label-txt">Email address</label> 	
			  	    	<input type="email" class="form-control bt-line" placeholder="Type email address here" name="email" [(ngModel)]="emailaddress" #email="ngModel">
			  	  	</div>
			  	  	<div class="form-group">
			  	    	<label for="pass" class="label-txt">Password</label> 	
			  	    	<input type="text" class="form-control bt-line" placeholder="Type password here" name="password" [(ngModel)]="pass" #password="ngModel">
			  	  	</div>
			  	  	<div class="form-group">
			  	    	<label for="guardmail" class="label-txt">Guardian email</label> 	
			  	    	<input type="email" class="form-control bt-line" placeholder="Type guardian email here" name="password" [(ngModel)]="guardianmail" #password="ngModel">
			  	  	</div>
				</div>
				<div class="col-md-5">
					<label for="upload">
						<div class="profile-box label-txt">
							<div class="form-group">
								<label for="upload" class="profile-label">Profile</label><br>
								<div class="circular-profile">
									<img src="assets/img/user.svg">
								</div>	
								<div class="demo-wrap upload-demo">
						          	<div class="container">
							            <div class="grid">
						              	<div class="col-1-2">
						                	<div class="actions">
						                		<a class="btn file-btn">
						                  		<input type="file" class="upload-jpg form-control" id="upload" #cropper (change)='uploadCropImg($event)' value="Choose a file" accept="image/*" style="display:none" />
						                		</a>
						                		<button *ngIf="blankCrop"class="upload-result result-color" id="sizeDisable" (click)="cropResult()" [value]="blankCrop">Crop</button>
						                	</div>
						              	</div><br />
								            <div class="upload-demo-wrap">
								              <div id="upload-demo"></div>
								            </div>
							            </div>
						       		</div>
							    </div>
							    <p>Update photo</p>							
							</div>
						</div>
					</label>
					<div class="button-group">
						<button type="button" class="bt cancel-button">Cancel</button>
			        	<button type="submit" (click)="createUser()" class="btn create-button" >Create
						</button>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>


