<div class="main-wrapper">
  <div class="d-flex flex-column w-100 h-100 main-wrapper">
    <div *ngIf="!showDetail" class="w-100">
      <div *ngIf="ratingLists.length == 0" class="txt-color-center">
        <h3 class="h1-strong text-c300">
          Don't have staff for this location.
        </h3>
      </div>
      <div *ngIf="ratingLists.length != 0">
        <div>
          <h3 class="pd-lft-15 h1-strong text-c300 mb-0">Average ratings</h3>
        </div>
        <div class="d-style pd-top-15">
          <div
            class="box-width"
            *ngFor="let staffRating of ratingLists; let i = index"
          >
            <div
              class="rating-box bg-s0"
              (click)="getFeedBack(staffRating.teacherId, staffRating)"
            >
              <div class="inner-box">
                <div class="circular-image">
                  <img src="{{ staffRating.profilePic }}" />
                </div>
                <div class="teacher-average-font small text-c100">
                  <span>Staff</span>
                </div>
                <h5 class="h3-strong text-c300" style="letter-spacing: 0.5px;">
                  {{ staffRating.preferredName }}
                </h5>
                <div class="wrap-rating d-flex flex-row">
                  <div class="d-flex half">
                    <h2 class="light-body-l text-c100" style="margin: 0;">
                      {{ staffRating.rating }}
                    </h2>
                    <div style="display: block;">
                      <star-rating-comp
                        [readOnly]="true"
                        [starType]="'svg'"
                        [rating]="staffRating.rating"
                      ></star-rating-comp>
                      <div class="average-rating-font small text-c100">
                        {{ staffRating.voter }}
                        <span *ngIf="staffRating.voter > 1">ratings</span
                        ><span *ngIf="staffRating.voter == 1">rating</span>
                      </div>
                    </div>
                  </div>
                  <div class="d-flex wil">
                    <button class="detail-bg" type="button">
                      <i
                        class="fa fa-angle-right right-arrow text-s60 h1-strong"
                      ></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="showDetail">
      <div class="back-wrap d-flex justify-content-between">
        <div class="back-to body-l text-c300" (click)="back()">
          <i class="fa fa-angle-left body-xl text-c200"></i>
          <p>Average ratings</p>
        </div>
        <!-- <div class="dropdown custom-dropdown">
                    <button class="btn btn-design" type="button" (click)="dropDown()">
                        Export <i class="fa fa-chevron-down dropdown-arrow"></i>
                    <span class="caret"></span></button>
                    <div class="bg-box">
                        <div id="rectangle"></div>
                        <ul class="dropdown-menu">
                          <li>Export as CSV</li>
                          <li>Export as PDF</li>
                        </ul>
                    </div>
                </div> -->
      </div>
      <div class="col-md-12 flex-show">
        <div class="col-md-6 flex-show left-side">
          <div>
            <div class="circular-image mr-top-right">
              <img src="{{ teacherProfile }}" />
            </div>
          </div>
          <div style="display: block;">
            <div class="teacher-detail-font body-l text-c100">Staff</div>
            <h4 class="teacher-name h1-strong text-c300">
              {{ teacherPreferredName }}
            </h4>
          </div>
        </div>
        <div class="col-md-6 right-side">
          <h3 class="head-rating-count h1-strong text-c100">
            {{ teacherRating }}
          </h3>
          <div style="display: block;">
            <star-rating-comp
              [readOnly]="true"
              [starType]="'svg'"
              [rating]="teacherRating"
            ></star-rating-comp>
            <div style="padding-left: 10px;" class="body-l text-c300">
              {{ teacherVote }} ratings
            </div>
          </div>
        </div>
      </div>

      <div
        class="col-md-12 card-columns"
        style="margin-top: 25px; padding-bottom: 150px;"
      >
        <div *ngFor="let detail of feedbackLists; let i = index">
          <div class="card card-wrap">
            <div class="header">
              <h5 class="body-xl text-s0">{{ detail.course.name }}</h5>
              <div class="body-l text-s0">
                Room <span class="room-dot">&#183;</span>
                {{ detail.course.room }}
              </div>
            </div>
            <div
              class="d-flex flex-row pos-gray-content"
              *ngFor="let detailVote of detail.feedbacks; let i = index"
            >
              <div class="pad-0" style="padding-right: 15px;">
                <div class="circular-detail-image">
                  <img src="{{ detailVote.profilePic }}" />
                </div>
              </div>
              <div
                class="info-group pad-0 d-flex justify-content-between flex-row w-100"
              >
                <div class="">
                  <div>
                    <p class="mr-0 body-m text-c300">
                      {{ detailVote.preferredName }}
                    </p>
                    <star-rating-comp
                      [readOnly]="true"
                      [starType]="'svg'"
                      [rating]="detailVote.rating"
                    ></star-rating-comp>
                  </div>
                  <p class="detail-message body-m text-c300">
                    {{ detailVote.message }}
                  </p>
                </div>
                <p class="detail-show-date small text-c300">
                  {{ detailVote.updatedDate }}
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      *ngIf="ratingLists.length >= 20 && !showDetail"
      class="d-flex justify-content-center load-more bg-s0"
    >
      <button
        class="btn body-m text-b100"
        (click)="showMore(ratingLists.length)"
      >
        load more
      </button>
    </div>
  </div>
</div>
