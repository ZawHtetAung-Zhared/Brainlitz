<!-- For Concept Group List Start -->
<!-- <div *ngIf="conceptList" class="d-flex justify-content-end pr-5 w-100 mt-1">
  <button class="btn btn-create" (click)="goToTestWerkz()"> Add new tag </button>
  <button class="btn btn-success" (click)="onUpdateTeskWerkz('5c8b7c80dd6ff06bc903f1d5')"> Edit tag </button>
</div> -->
<!-- *ngIf="conceptCreate &&  greterThan  && conceptEdit"  -->

<!-- <div *ngIf="greterThan && (conceptEdit || conceptCreate)"  class="d-flex w-100 align-items-center justify-content-between sticky-back-bar">
  <div class="back-to d-flex" *ngIf="!conceptEdit" (click)="backToTag('conceptCreate')">
    <i class="fa fa-angle-left"></i>
    <p>Back</p>
  </div>
  <div class="back-to d-flex" *ngIf="conceptEdit" (click)="backToTag('conceptEdit')">
    <i class="fa fa-angle-left"></i>
    <p>Back</p>
  </div>
  <div>
    <div *ngIf="!conceptEdit"><h5 class="mb-0 create-title text-center">Create Concept</h5></div>
    <div *ngIf="conceptEdit"><h5 class="mb-0 create-title text-center">Update Concept</h5></div>
    <div class="d-flex flex-row concept_info ">
      <p class="mb-0">tag</p><span class="dott">&#183;</span><p class="mb-0">{{ pickedTag.name }}</p>	
    </div>
  </div>
  <div *ngIf="!conceptEdit" class="mr-2">
    <div class="d-none">{{ validateForm() }}</div>
    <button type="button" class="btn btn-submit" [disabled]="!isConceptFormValid" (click)="createConcept()">
      Create
    </button>
  </div>
  <div *ngIf="conceptEdit" class="mr-2">
    <div class="d-none">{{ validateForm() }}</div>
    <button type="button" class="btn btn-submit" [disabled]="!isConceptFormValid"
      (click)="updateConcept(conceptId)">
      Update
    </button>
  </div>
</div> -->
<div  class="pdLR-15">
  <h2 class="testwerkzTitle mt-3 pdLR-15" *ngIf="isTestwerkztitle">TestWerkz</h2>
    <!-- Start Collection -->
    <div class="d-flex justify-content-between pdLR-15 w-100 mt-3 mb-3" *ngIf="isCollectionList">
      <label class="cTitle mb-0">Plan</label>
      <div>
        <button class="btn btn-create" (click)="goToaddNewCollection()">
          Add new Plan
        </button>
      </div>
    </div>
    <div class="d-flex collection-wrappe latestPlanLists" *ngIf="isCollectionList">
      <div  *ngFor="let col of collectionArr_slice">
        <div class="single-collection">
          <div class="single-collectin-header">
            <p class="single-collection-title">{{col.name}}</p>
          </div>
          
          <div class="single-collection-group">
            <div class="single-collection-list"  *ngFor="let concept of col.concepts;let ci = index">
              <!-- {{concept.tag[0].name  | json}} -->
               <span class="tagName" *ngFor="let tag of concept.tag;">{{tag.name}}</span>
              <div class="d-flex flex-row">
                  <span class="detail-dot"></span>
                  <div class="mb-0 list-dot-wrap detail-line collection-desc w-100" [ngClass]="{'hide-border': col.concepts?.length == ci+1}">{{concept.name}}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="viewAllDiv pdLR-15" *ngIf="isCollectionList">
      <button  class="btn-action remove-outline viewallBtn" (click)="goToCollection()">View All 
        <span class="lists-down-arrow">
            <i class="fa fa-angle-right rightArrow"></i>
        </span>
      </button>
     
    </div>
  <!-- End Collection -->

  <!-- Start Concept -->
  <div class="d-flex justify-content-between pdLR-15 w-100 mt-3 mb-3" *ngIf="conceptList">
    <label class="cTitle mb-0">Concept</label>
    <div>
      <button class="btn btn-create" (click)="goToTestWerkz()">
        Add new concept
      </button>
      <!-- <button class="btn btn-success" (click)="onUpdateTeskWerkz('5c8b7c80dd6ff06bc903f1d5')"> Edit tag </button> -->
    </div>
  </div>
  <div class="input-group col-md-12 mt-30" *ngIf="conceptList">
    <span class="input-group-append">
      <button class="bt btn-design btn-outline-secondary" type="button">
        <i class="fa fa-search search-size"></i>
      </button>
    </span>
    <input class="form-control py-2 input-search-bg" type="search" placeholder="Search concept to collect" id="example-search-input"
      (input)="getConceptSearch($event.target.value)" autocomplete="off">
  </div>
  <div class="card-columns pdLR-15" *ngIf="conceptList">
    <div class="card" *ngFor="let concept of conceptsArr">
      <div class="single-concept">
        <div class="pad-15">
          <label class="tag-name mb-0" *ngFor="let tag of concept.tag">{{
            tag.name
          }}</label>
          <p class="conceptName mb-0">{{ concept.name }}</p>
          <div class="pdlist-wrap">
            <div class="d-flex pdLine-wrap" *ngFor="let pd of concept.pd">
              <div>
                <img src="/assets/images/un-thunder-flash-w.png" />
              </div>
              <div class="pd-text pl-2 w-100">
                <p class="mb-0">
                  {{ pd.name }}
                </p>
                <div class="d-flex flex-wrap">
                  <div class="onePD" *ngFor="let content of pd.contents">
                    <div *ngIf="
                        content.type.substring(0, content.type.search('/')) ==
                        'image'
                      " class="imgWrap">
                      <img src="{{ content.url }}" />
                    </div>
                    <div *ngIf="
                        content.type.substring(0, content.type.search('/')) ==
                        'video' "
                      class="vidWrap"
                    >
                      <img src="/assets/img/play-16-x-16.png">
                      <video src="{{ content.url }}"></video>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="btnEdit-wrap d-flex justify-content-end">
          <button class="btn btn-edit" (click)="getSingleConcept(concept._id)">
            Edit
          </button>
          <!-- <button class="btn btn-edit" (click)="onUpdateTeskWerkz(concept._id)">Edit</button> -->
        </div>
      </div>
    </div>
    <div *ngIf="conceptsArr.length == this.pageConcept * 20" class="load-more">
        <!-- <div *ngIf="apgList.length >=20 && ismodule == false && iscreate == false && isshare == false && shareAPG == false && result != 0 && apgDemo.viewAPG != ''" class="load-more"> -->
        <button class="btn remove-outline" (click)="showmoreConcept(conceptsArr.length)">load more</button>
    </div>
  </div>
</div>

<!-- start collection group -->
<div *ngIf="isCollection" class="plan-list-wrapper">
  <header [ngClass]="{ blury: isfocus == true || iseditfocus == true }" style="height: 115px;">
    <div class="d-flex" [ngClass]="{ stickywrap: navIsFixed == true }">
      <div class="mr-auto p-2 pl-0 pb-0" >
        <div class="back-to d-flex" (click)="backToList()">
          <i class="fa fa-angle-left"></i>
          <p>TestWerkz</p>
        </div>
      </div>
    </div>
    <div class="d-flex justify-content-between">
        <label class="cTitle mb-0">Plan</label>
        <div>
          <button class="btn btn-create" (click)="goToaddNewCollection()">
            Add new plan
          </button>
        </div>
    </div>
  </header>
  <div class="collection-wrapper1 card-columns">
    <div class="card" *ngFor="let col of collectionarr">
      <div class="single-collection1">
        <div class="info-section">
          <div class="single-collectin-header1">
            <p class="single-collection-title1">{{col.name}}</p>
          </div>
          
          <div class="single-collection-list1-group">
            <div class="single-collection-list1"  *ngFor="let concept of col.concepts;let ci = index">
              <span class="tagName" *ngFor="let tag of concept.tag;">{{tag.name}}</span>
              <div class="d-flex flex-row">
                  <span class="detail-dot1"></span>
                  <div class="mb-0 list-dot-wrap detail-line collection-desc1 w-100" [ngClass]="{'hide-border': col.concepts?.length == ci+1}">{{concept.name}}</div>
                </div>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-end single-collectin-footer1">
          <div style="padding-top: 13px;">
            <button class="btn-action remove-outline" (click)="goTocollectionEdit(col._id)">Edit</button>
            | <button class="btn-action remove-outline" (click)="onclickCollectionDelete(colDeleteModal,col)">Delete</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- start collection create -->
<div *ngIf="isCollectionCreate || isCollectionEdit">
  <div class="col-md-12">
    <!-- <div class="createForm-wrap"> -->
      <div class="mr-auto p-2 pl-0 pb-0" >
        <div class="back-to d-flex" (click)="backTocollectionList()">
          <i class="fa fa-angle-left"></i>
          <p>TestWerkz</p>
        </div>
      </div>
      <h3 class="collection-title" *ngIf="isCollectionCreate">
        Create Plan
      </h3>
      <h3 class="collection-title" *ngIf="isCollectionEdit">
        Update Plan
      </h3>
      <div class="form-group  name-input-wrapper col-11 pr-0 pl-0">
        <div class="d-flex justify-content-between collection-title">
          <label class="form-title input-label-collection" for="address">
            Plan name
          </label>
          <div class="limit-type-wordcount">
            <span>{{ wordLength }}/60characters</span>
          </div>
        </div>

        <input type="text" class="form-control selfAssessmentName col-12" autocomplete="off"
          placeholder="Type Plan name here" name="name" maxlength="60" [(ngModel)]="collectionName"
          (focus)="focusMethod($event, 'name', $event.target.value)" (blur)="blurMethod($event, 'name')"
          (input)="changeMethod($event.target.value)" required #name="ngModel" />
        <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger">
          <div [hidden]="!name.errors.required">
            Name is required!
          </div>
        </div>
      </div>
      <div class="form-group  name-input-wrapper col-11 pr-0 pl-0">
        <div class="d-flex justify-content-between collection-description">
          <label class="form-title input-label-collection" for="address">
            Description
          </label>
          <div class="limit-type-wordcount1">
            <span>{{ des_wordLength }}/280characters</span>
          </div>
        </div>
  
        <textarea type="text" class="form-control selfAssessmentName col-12" autocomplete="off"
          placeholder="Type Plan name here" name="name" maxlength="280" [(ngModel)]="collectionDescription"
          (focus)="focusMethod($event, 'Description', $event.target.value)" (blur)="blurMethod($event, 'Description')"
          (input)="changeMethodDes($event.target.value)"></textarea>
        <!-- </div> -->
      </div>
      
  </div>
  <div class="custom-dropdown-width input-group col-md-12 all-title-font">
    <div class="input-group w-100">
      <span class="input-group-append">
        <button class="bt btn-design btn-outline-secondary" type="button">
          <i class="fa fa-search search-size"></i>
        </button>
      </span>
      <input class="form-control py-2 input-search-bg" type="search" placeholder="Search Concepts to add to this plan" 
      id="search-concept" name="searchConcept" (focus)="focusSearch($event)" (focusout)="hideSearch($event)"
      (input)="changeSearch($event.target.value, 'apg')"
      autocomplete="off"
      >
      </div>
    <div>
  
      <div class="search-result-box" *ngIf="isFocus_collection == true">
        <div class="single-result" (click)="selectData(concept._id)" *ngFor="let concept of concept_in_collection">
          <div class="d-flex">
            <div class="circle1 plus"></div>
            <div>
              <div>{{ concept.name }}</div>
              <!-- <div class="step-font font-12" *ngIf="apg.module">{{ apg.module.name }}</div>
              <div class="step-font font-12" *ngIf="!apg.module"> - </div> -->
            </div>
          </div>
        </div>
      </div>
  
    </div>

    <!-- <div *ngIf="showfixedcreate == true" class="fixedText">
      <div class="top-line">
        <button type="button" class="bt btn-apg" (click)="goToModule()">
          <div class="circle3 plus"></div>Create new APG
        </button>
      </div>
    </div> -->
  </div>
  <div class="col-md-12 pl-zero" *ngIf="showfixedcreate == true">
    <!-- <div style="
    height: 341px;
    border: 1px solid #eee;
    border-radius: 0 0 4px 4px;
    position: absolute;
  "></div> -->
  </div>
  <div  class="col-md-12 row empty-concept" *ngIf="selectedConcept.length== 0" >
    <div class="col-md-6">
      <div class="img-pos">
        <img src="assets/img/apg-list-default.png">
      </div>
    </div>
    <div class="col-md-6 flex-row">
        <div class="txt-default">
            <h3>Add Concept to this Plan</h3>
          </div>
      <div class="arrow-pos">
        <img src="assets/images/arrow.png">
      </div>
      
    </div>
  </div>
  <div *ngIf="selectedConcept.length> 0" class="col-md-12 pl-zero">
    <!-- <div class="wrap-height"> -->
    <div *ngFor="let sConcept of selectedConcept;let id = index" class="wrap-height">
      {{ sConcept.tag.length}}
      <span class="tagName_collection"  *ngFor="let tag of sConcept.tag;">{{tag.name}}</span>
      <div class="d-flex flex-row justify-content-between">
        <div class="d-flex group-text">
            <button type="button" class="bt btn-concept" (click)="removeSelectedConcept(sConcept)">
              <div class="circle2 minus"></div>
            </button>	
            <div class="conceptName_collection">{{sConcept.name}}</div>
        </div>
        <span class="lists-down-arrow" [ngClass]="{'transform-y': sConcept.isExpand}" (click)="expandAccessPoint(id,ind)">
          <i class="fa fa-angle-down" style="font-size: 25px;color: #007fff;"></i>
        </span>
      </div>
      <div *ngIf="!sConcept.isExpand" class="d-flex flex-row list-dot-wrap">
        <div  *ngFor="let pd of sConcept.pd"  class="flashImg">
            <img src="/assets/images/un-thunder-flash-w.png" />
        </div>
        <!-- <span class="dot" *ngFor="let pd of sConcept.pd"></span> -->
      </div>
      <div *ngIf="sConcept.isExpand">
        <div class="d-flex flex-row expandConcept" *ngFor="let pd of sConcept.pd;let idx = index">
          <!-- <span class="detail-dot"></span> -->
          <div class="flashImg">
              <img src="/assets/images/un-thunder-flash-w.png" />
          </div>
          <div class="mb-0 list-dot-wrap detail-line collection-desc w-100" [ngClass]="{'hide-border': sConcept.pd?.length == idx+1}">{{pd.name}}</div>
        </div>
      </div>
      <!-- <hr class="hr-style"> -->
    </div>
  </div>
 
</div>
<div class="d-flex justify-content-end form-footer" *ngIf="isCollectionCreate || isCollectionEdit">
  <div class="d-flex">
    <button type="button" class="btn btn-cancel" (click)="cancelCollection('cancel')">
      Cancel
    </button>
    <div *ngIf="isCollectionCreate">
      <div class="d-none">{{ collectionvalidateForm() }}</div>
      <button type="button" class="btn btn-submit" [disabled]="!isCollectionFormValid" (click)="createCollection()">
        Create
      </button>
    </div>
    <div  *ngIf="!isCollectionCreate">
      <div class="d-none">{{ collectionvalidateForm() }}</div>
      <button type="button" class="btn btn-submit" [disabled]="!isCollectionFormValid"
        (click)="updateCollection(collectionId)">
        Update
      </button>
    </div>
  </div>
</div>
<!-- end collection create -->
<!-- end collection group -->
<div [ngClass]="{ overlay: isfocus == true || iseditfocus == true }"></div>
<!-- For test List End -->

<!-- testing for markdown -->
<!-- <div id="editor1" contenteditable="true">
     The quick brown fox jumped over the lazy dog.
  </div>
  <button (click)="turn()">turn</button>
  <div contenteditable="true">
     For Editor 2 The quick brown fox jumped over the lazy dog.
  </div>
  <div contenteditable="true"> 
    For Editor 3 The quick brown fox jumped over the lazy dog.
  </div>
  <fieldset>
    <button class="fontStyle" onclick="document.execCommand('italic',false,null);" title="Italicize Highlighted Text"><i>I</i>
    </button>
    <button class="fontStyle" onclick="document.execCommand( 'bold',false,null);" title="Bold
     Highlighted Text"><b>B</b>
    </button>
    <button class="fontStyle" onclick="document.execCommand( 'underline',false,null);"><u>U</u>
    </button>
    <button type="button" class="btn btn-submit" (click)=openImgModal(imgModal)>Image Upload</button>
  </fieldset>
 -->

<!-- For test list create and Edit Start -->
<div *ngIf="testWerkzCategory">
  <header [ngClass]="{ blury: isfocus == true || iseditfocus == true }" style="height: 115px;" class="pl-5">
    <div class="d-flex pr-5 d-wrapper" [ngClass]="{ stickywrap: navIsFixed == true }">
      <div class="mr-auto p-2 pl-0 pb-0" (click)="backToList()">
        <div class="back-to d-flex">
          <i class="fa fa-angle-left"></i>
          <p>TestWerkz</p>
        </div>
      </div>
      <div class="pr-5">
        <button *ngIf="isEditComplete == false" class="btn category-edit" (click)="edit()" class="btn category-edit">
          Edit
        </button>
        <button *ngIf="isEditComplete == true" class="btn category-done " (click)="editComplete()">
          Done
        </button>
      </div>
    </div>
    <h3 class="category-h3" [ngClass]="{ stickywrap: navIsFixed == true }">
      Pick Tag
    </h3>
  </header>
  <div>
    <!-- <p class="card-text" [style.display]="'none'">hola</p> -->
    <div class="row pr-5 pl-5 justify-content-start mb-20">
      <div class="col-md-4 category-btn">
        <!-- <form novalidate #tagWerkz="ngForm"> -->
        <div class="d-flex justify-content-between">
          <div class="limit-word">
            <span>{{ wordLength }}/60characters</span>
          </div>
        </div>
        <input type="text" id="inp" [ngClass]="{ onfocus: isfocus == true }" class="form-control create-btn"
          placeholder="+ Create new tag" name="name" autocomplete="off" [(ngModel)]="tagWerkz.name" required
          #name="ngModel" (focus)="focusFunction('create', '', $event.target.value)"
          (blur)="blurMethod($event, 'create')" (input)="changeMethod($event.target.value)"
          *ngIf="isEditComplete == false" maxlength="60" />
        <input type="text" id="inp" [ngClass]="{ onfocus: isfocus == true, blury: iseditfocus == true }"
          class="form-control" placeholder="+ Create new tag" name="name" autocomplete="off"
          (focus)="focusFunction('create')" *ngIf="isEditComplete == true" disabled />
        <div class="d-flex justify-content-end category-btn-group" [ngClass]="{ showbtns: isfocus == true }">
          <button type="submit" class="btn" (click)="close('create')">
            <span class="closemark">
              <div class="closemark_stem"></div>
              <div class="closemark_kick"></div>
            </span>
          </button>
          <button type="submit" class="btn" (click)="createTagWerkz(tagWerkz)" [disabled]="
              tagWerkz.name == '' ||
              tagWerkz.name.length < 0 ||
              tagWerkz.name.length == 0
            ">
            <span class="checkmark">
              <div class="checkmark_stem"></div>
              <div class="checkmark_kick"></div>
            </span>
          </button>
        </div>
        <!-- </form> -->
      </div>
      <div class="col-md-4 cagetory-item" *ngFor="let tag of tagsWerkzList; let i = index">
        <!-- <form novalidate #tagWerkz="ngForm"> -->
        <div *ngIf="isEditComplete == false" class="form-check">
          <label class="form-check-label cat-label d-flex flex-column justify-content-center" [ngClass]="{
              selected: ischecked == tag._id,
              blury: isfocus == true
            }">
            <div>
              <div class="label-checked"></div>
              <input class="form-check-input" type="radio" name="inlineRadioOptions" id="tag._id"
                (click)="somethingChanged(tag._id, tag.name)" value="{{ tag.name }}" />
              {{ tag.name }}
            </div>
          </label>
        </div>
        <div *ngIf="isEditComplete == true" class="editcategory-item">
          <div class="d-flex justify-content-between">
            <div class="limit-word limit-{{ tag._id }}">
              <span>{{ wordLength }}/60characters</span>
            </div>
          </div>
          <input type="text" id="tag._id" class="form-control" [ngClass]="{
              onfocus: editValue == tag._id,
              blury: iseditfocus == true && editValue != tag._id
            }" name="name" [(ngModel)]="tag.name" autocomplete="off" required #name="ngModel"
            (focus)="focusFunction('edit', tag._id, $event.target.value)" (blur)="blurMethod($event, 'create')"
            (input)="changeMethod($event.target.value)" maxlength="60" />
          <div class="d-flex justify-content-end category-btn-group" [ngClass]="{ showbtns: editValue == tag._id }">
            <button type="submit" class="btn" (click)="close('edit', tag._id)">
              <span class="closemark">
                <div class="closemark_stem"></div>
                <div class="closemark_kick"></div>
              </span>
            </button>
            <button type="submit" class="btn" (click)="updateTagWerkz(tag)" [disabled]="tag.name.length == 0">
              <span class="checkmark">
                <div class="checkmark_stem"></div>
                <div class="checkmark_kick"></div>
              </span>
            </button>
          </div>
        </div>
        <!-- </form> -->
      </div>
    </div>
  </div>
  <!-- <div  class="d-flex justify-content-center load-more">
      <button class="btn" (click)="showMore()">load more</button>
    </div> -->
</div>
<!-- For test list create and Edit End -->

<!-- For Concept Create Start -->
<div *ngIf="conceptCreate || conceptEdit">
  <div class="d-flex w-100 align-items-center justify-content-between sticky-back-bar" [ngClass]="{'stickyNav': greterThan == true}">
    <div class="back-to d-flex" *ngIf="!conceptEdit" (click)="backToTag('conceptCreate')">
      <i class="fa fa-angle-left"></i>
      <p>Back</p>
    </div>
    <div class="back-to d-flex" *ngIf="conceptEdit" (click)="backToTag('conceptEdit')">
      <i class="fa fa-angle-left"></i>
      <p>Back</p>
    </div>
    <div>
      <div *ngIf="!conceptEdit"><h5 class="mb-0 create-title text-center">Create Concept</h5></div>
      <div *ngIf="conceptEdit"><h5 class="mb-0 create-title text-center">Update Concept</h5></div>
      <div class="d-flex flex-row concept_info ">
        <p class="mb-0">tag</p><span class="dott">&#183;</span><p class="mb-0">{{ pickedTag.name }}</p> 
      </div>
    </div>
    <div *ngIf="!conceptEdit" class="mr-2">
      <div class="d-none">{{ validateForm() }}</div>
      <button type="button" class="btn btn-submit" [disabled]="!isConceptFormValid" (click)="createConcept()">
        Create
      </button>
    </div>
    <div *ngIf="conceptEdit" class="mr-2">
      <div class="d-none">{{ validateForm() }}</div>
      <button type="button" class="btn btn-submit" [disabled]="!isConceptFormValid"
        (click)="updateConcept(conceptId)">
        Update
      </button>
    </div>
  </div>
  <div class="w-100  h-100">
    <div class="w-100 d-flex mt-1 h-100" [ngClass]="{
        'justify-content-center': classCreate == true,
        'align-items-center': classCreate == true
      }" id="conceptWrapper">
      <div class="pl-3 p-0 form-side">
        <div class=" d-flex flex-column w-100" [ngClass]="{ 'align-items-center': classCreate == true }">
          <div class="createForm-wrap">
            <div
              class="mr-auto p-2 pl-0 pb-0"
              (click)="backToTag('conceptCreate')" *ngIf="!conceptEdit">
              <div class="back-to pt-2 d-flex">
                <i class="fa fa-angle-left"></i>
                <p>Pick tag</p>
              </div>
            </div>
            <div
              class="mr-auto p-2 pl-0 pb-0"
              (click)="backToTag('conceptEdit')"
              *ngIf="conceptEdit"
            >
              <div class="back-to pt-2 d-flex">
                <i class="fa fa-angle-left"></i>
                <p>Pick tag</p>
              </div>
            </div>
            <label class="inform-text mb-0 mt-2">#{{ pickedTag.name }}</label>
            <h3 class="assessment-title" *ngIf="conceptCreate">
              Creating Concept
            </h3>
            <h3 class="assessment-title" *ngIf="conceptEdit">Edit Concept</h3>
            <div class="form-group  name-input-wrapper col-11 pr-0 pl-0">
              <div class="d-flex justify-content-between">
                <label class="form-title input-label" for="address">
                  Concept name
                </label>
                <div class="limit-type-wordcount">
                  <span>{{ wordLength }}/120characters</span>
                </div>
              </div>

              <input type="text" class="form-control selfAssessmentName col-12" autocomplete="off"
                placeholder="Type Concept name here" name="name" maxlength="120" [(ngModel)]="concept.name"
                (focus)="focusMethod($event, 'name', $event.target.value)" (blur)="blurMethod($event, 'name')"
                (input)="changeMethod($event.target.value)" required #name="ngModel" />
              <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger">
                <div [hidden]="!name.errors.required">
                  Name is required!
                </div>
              </div>
            </div>
            <div class="inform-wrapper p-0">
              <p class="icon"><span class="icon">i</span></p>
              <span class="inform-text">Some information about how do PD and QUESTION create with
                multiple lines
              </span>
            </div>
            <!-- <ng-template #content let-modal>
                <div class="modal-header">
                  <h4 class="modal-title">Modal title</h4>
                  <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <p>One fine body&hellip;</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
                </div>
              </ng-template>  -->
            <!-- Thiha Soe UI Start -->
            <!-- <div *ngFor="let pd of concepts; let i = index">
              <div class="pd-wrapper">
                <div class="pd-header">
                  <span>{{i+1}}</span>
                  <medium-editor dragula="COLUMNS" [(editorModel)]="pd.pdName" #pdtag [editorOptions]="{'toolbar': {'buttons': ['bold', 'italic', 'underline', 'image']}}"
                    (input)="onInput(imgModal,$event,pdtag,'pd')"></medium-editor>
                </div>
                <div class="pd-body">
                  <div *ngFor="let question of pd.question; let j = index">
                    <span>{{j+1}}</span>

                    <medium-editor [(editorModel)]="question.questionName" #questiontag (click)="onClickEditor(question)"
                      [editorPlaceholder]="placeholderVar" [editorOptions]=toolBarOptions (input)="onInput(imgModal,$event,questiontag,'question',j)"></medium-editor>
                    <button (click)="addQuestion(i)">Add question</button>
                    <div *ngFor="let answer of question.answers;let k = index">
                      <div class="answer-wrapper">
                        <medium-editor [(editorModel)]="answer.answer" #answertag (click)="onClickEditor(answer)"
                          [editorPlaceholder]="placeholderVar" [editorOptions]=toolBarOptions (input)="onInput(imgModal,$event,answertag,'answer',j,k)"></medium-editor>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div> -->
            <!-- Thiha Soe UI End -->

            <!-- test markdown -->
            <!-- <fieldset>
              <button class="fontStyle" onclick="document.execCommand('italic',false,null);" title="Italicize Highlighted Text"><i>I</i>
              </button>
              <button class="fontStyle" onclick="document.execCommand( 'bold',false,null);" title="Bold Highlighted Text"><b>B</b>
              </button>
              <button class="fontStyle" onclick="document.execCommand( 'insertorderedlist',false,null);">List</button>
              <button type="button" class="btn btn-submit" (click)=openImgModal(imgModal)>Image Upload</button>
              <button type="button" (click)="turn()">
                turn
              </button>
            </fieldset> -->
            <!-- <div class="d-flex">
              
            </div> -->
            <!-- <button (click)="turn()">Turn</button> -->

            <!-- Wai Yan UI Start -->
            <!-- <div *ngFor="let pd of pdLists; let i = index"> -->
            <div>
              <!-- {{performanceDemands | json}} -->

              <div *ngFor="let pd of performanceDemands; let i = index">
                <div class="d-flex flex-column pd-blog mb-2">
                  <!-- for header start -->
                  <div class="pd-name-wrapper d-flex container align-items-center">
                    <div *ngIf="this.focusPlace == 'pd' + i" class="pd-icon-wrapper align-items-center d-flex">
                      <img src="../../../assets/images/thunder-flash-w.png" alt="" class="flex-icon" />
                      <span class="pd-No">{{ i + 1 }}</span>
                    </div>
                    <div *ngIf="this.focusPlace != 'pd' + i" class="pd-icon-wrapper bg-white align-items-center d-flex">
                      <img src="../../../assets/images/un-thunder-flash-w.png" alt="" class="flex-icon" />
                      <span class="pd-No" style="color:#64707d;">{{
                        i + 1
                      }}</span>
                    </div>
                    <div class="pd-name-input-wrapper">
                      <!-- <div class="answer-tooltip-wrap" *ngIf="this.focusPlace == ('pd'+i)"> -->
                      <!-- <div class="answer-tooltip-wrap" *ngIf="pd.showTooltip" (click)="openImgModal(imgModal, 'multiple')">
                        <button>
                          <img src="assets/img/text-edit-image.png" />
                        </button>
                        <div class="answer-carret-box"></div>
                      </div> -->
                      <button class="answer-tooltip-wrap" *ngIf="pd.showTooltip" (click)="openImgModal(imgModal, 'multiple')">
                        <div>
                          <img src="assets/img/text-edit-image.png" />
                        </div>
                        <div class="answer-carret-box"></div>
                      </button>
                      <!-- <div id="pd-{{i}}" contenteditable="true" (focus)="onFocus('pd',i,'','')"></div> -->
                      <input type="text" name="" id="" placeholder="type performance demand name here"
                        class="w-100 pd-name" [(ngModel)]="pd.name" (focus)="onFocus('pd', i, '', '')" (focusout)="
                          hideTooltip('hideTooltip', 'pD', i, j, index)
                        " />
                      <!-- <textarea name="" id="" class="w-100 pd-name" (input)="autoResize($event)"></textarea> -->
                      <div *ngIf="pd.contents.length > 0" class="row" dragula="{{ i }}" [(dragulaModel)]="pd.contents">
                        <div class="col-md-4 position-relative mb-3" *ngFor="let img of pd.contents; let idx = index">
                          <!-- <img *ngIf="showRMIcon==idx" (click)="removePDImg(img,idx,i)" class="img-pd" src="./assets/img/remove-white.png"> -->
                          <div class="innerPd p-0" 
                          (mouseenter)="mouseOver($event,'pdRMI', i, idx, '')"  (mouseleave)="mouseOut($event)"
                            [ngClass]="isVideo(img) ? 'transparent-bg' : ''">
                            <img class="editablePDImg" src="{{ img.url }}" *ngIf="!isVideo(img)" />
                            <img src="../../../assets/images/play-icon.png" class="play-img" *ngIf="isVideo(img)" />
                            <video width="120" height="72" preload="metadata" *ngIf="isVideo(img)"
                              src="{{ img.url }}"></video>
                            <img *ngIf="showRemove && hoverIcon == 'pdRMI-'+ i + idx" (click)="removePDImg(img, idx, i)" class="img-pd rmIcon" [ngClass]="{'isVid':isVideo(img)}"
                              src="./assets/img/remove-white.png" />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- for header End -->

                  <div class="pd-blog-wrapper">
                    <div *ngFor="let question of pd.questions; let j = index" class="w-100 question-section d-flex"
                      id="divToHide">
                      <div *ngIf="this.focusPlace == 'q' + i + j"
                        class="check-icon-wrapper align-items-center mt-3 d-flex">
                        <img src="../../../assets/images/checked-rect.png" alt="" class="flex-icon" />
                        <span class="pd-No">{{ j + 1 }}</span>
                      </div>
                      <div *ngIf="this.focusPlace != 'q' + i + j"
                        class="check-icon-wrapper bg-white align-items-center mt-3 d-flex">
                        <img src="../../../assets/images/check-rect.png" alt="" class="flex-icon" />
                        <span class="pd-No" style="color:#64707d;">{{
                          j + 1
                        }}</span>
                      </div>
                      <div id="divToHide" class="pd-name-input-wrapper question-wrap d-flex flex-column">
                        <div class="tooltip-wrap" *ngIf="showID == 'q' + i + j">
                          <button onclick="document.execCommand('bold',false,null);">
                            <img src="assets/img/text-edit-bold.png" />
                          </button>
                          <button onclick="document.execCommand( 'italic',false,null);">
                            <img src="assets/img/text-edit-italic.png" />
                          </button>
                          <button class="bd-left" onclick="document.execCommand( 'insertorderedlist',false,null);">
                            <img src="assets/img/ordered-list.png" />
                          </button>
                          <button #btn (click)="openImgModal(imgModal, 'multiple', btn)"
                            class="question-insert-img bd-left">
                            <img class="question-insert-img" src="assets/img/text-edit-image.png" />
                          </button>

                          <div class="carret-box"></div>
                        </div>
                        <div id="q-{{ i }}-{{ j }}" class="mt-3 question contentEditQues" #t contenteditable="true"
                          data-placeholder="Type question here" (focus)="onFocus('question', i, j, '', t)"
                          (input)="onInput(t, $event, editableId, focusType)" (focusout)="onFocusOut($event)"
                          (dragstart)="onDragStart($event)" (drop)="onDrop($event)" (keyup)="getCaretPosition($event)" (keydown)="getCaretPosition($event)" (mouseup)="getCaretPosition($event)" (mousedown)="getCaretPosition($event)" (paste)="pastePlainText($event)"></div>
                        <!-- <div class="question-vd-wrapper row">
                          <div *ngFor="let video of  question.contents; let idx = index"
                            class="position-relative mr-2 ml-2 question-vd innerPd" 
                            (mouseenter)="mouseOver($event, 'qRMI', i, j, idx)"
                            (mouseleave)="mouseOut($event)"
                            [ngClass]="isVideo(video) ? 'transparent-bg' : ''">
                            <img src="../../../assets/images/play-icon.png" class="play-qimg" *ngIf="isVideo(video)" />
                            <video width="120" height="72" preload="metadata"
                              *ngIf="isVideo(video)" src="{{ video.url }}"></video>
                              <img *ngIf="showRemove && hoverIcon == 'qRMI-' + i + j + idx" (click)="removeQuestionVideo(video, idx)" class="img-qpd rmIcon"
                              src="./assets/img/remove-white.png" />
                          </div>
                        </div> -->
                        <!-- <textarea name="" id="" class="w-100 question-name" placeholder="type question here" (input)="autoResize($event)"></textarea> -->
                        <div class="" style="padding-top: 20px;" *ngFor="
                            let answer of question.answers;
                            let index = index
                          ">
                          <!-- <label class="question-checkbox">
                                  <input type="checkbox" checked="checked">
                                  <span class="answer-checkmark"></span>
                                </label> -->
                          <!-- <img src="{{ }}" alt=""> -->

                          <div class="d-flex flex-column" style="position:relative;">
                            <!-- <div class="answer-tooltip-wrap" (click)="
                                answerOpenImgModal(
                                  imgModal,
                                  'single',
                                  i,
                                  j,
                                  index
                                )
                              " *ngIf="answer.showTooltip">
                              <button>
                                <img src="assets/img/text-edit-image.png" />
                              </button>
                              <div class="answer-carret-box"></div>
                            </div> -->
                            <button class="answer-tooltip-wrap"  (click)="answerOpenImgModal(imgModal,
                                  'single',i,j,index)" *ngIf="answer.showTooltip">
                              <div><img src="assets/img/text-edit-image.png" /></div>
                              <div class="answer-carret-box"></div>
                            </button>
                            <!-- <div class="answer-carret-box"></div> -->
                            <div class="d-flex" *ngIf="question.questionType == 'MCQ-CHECKBOX'">
                              <label for="{{ 'answerMultiple' + index + i + j }}">
                                <input type="checkbox" id="{{ 'answerMultiple' + index + i + j }}"
                                  name="{{ 'answerlist' + index + i + j }}" (click)="
                                    trueAnswer(i, j, index, answer.answer)
                                  " class="d-none" value="{{ answer.answer }}" />
                                <div *ngFor="
                                    let symbol of answerSymbols;
                                    let symbolIndex = index
                                  ">
                                  <div *ngIf="
                                      index == symbolIndex &&
                                      answer.correctness == 100
                                    ">
                                    <img src="{{ imagePath }}{{ symbol }}{{
                                        answerSymbolSVG
                                      }}" alt="" />
                                  </div>

                                  <div *ngIf="
                                      index == symbolIndex &&
                                      answer.correctness == 0
                                    ">
                                    <img src="{{ imagePath }}{{ symbol }}{{
                                        answerSymbolReverseSVG
                                      }}" alt="" />
                                  </div>
                                </div>
                              </label>
                              <input type="text" class="bg-white pb-1 w-100 answer-input" [(ngModel)]="answer.answer"
                                placeholder="choice" (focusout)="
                                  hideTooltip(
                                    'hideTooltip',
                                    'answer',
                                    i,
                                    j,
                                    index
                                  )
                                " (focus)="onFocus('answer', i, j, index)" [ngClass]="{
                                  'answer-text': answer.correctness == 100
                                }" id="{{ 'answer' + i + j + index }}" (keydown)="onKeydown($event, i, j, index)"
                                autocomplete="off" />
                            </div>
                            <div class="d-flex" *ngIf="question.questionType == 'MCQ-OPTION'">
                              <label for="{{ 'answerSingle' + index + i + j }}">
                                <input type="radio" id="{{ 'answerSingle' + index + i + j }}"
                                  name="{{ 'answerlist' + index + i + j }}" (click)="
                                    trueAnswerRadio(i, j, index, answer.answer)
                                  " class="d-none" />
                                <div *ngFor="
                                    let symbol of answerSymbols;
                                    let reverserSymbolIndex = index
                                  ">
                                  <div *ngIf="
                                      index == reverserSymbolIndex &&
                                      answer.correctness == 100
                                    ">
                                    <img src="{{ imagePath }}{{ symbol }}{{
                                        answerSymbolSVG
                                      }}" alt="" />
                                  </div>

                                  <div *ngIf="
                                      index == reverserSymbolIndex &&
                                      answer.correctness == 0
                                    ">
                                    <img src="{{ imagePath }}{{ symbol }}{{
                                        answerSymbolReverseSVG
                                      }}" alt="" />
                                  </div>
                                </div>
                              </label>
                              <input type="text" class="bg-white pb-1 w-100 answer-input" [(ngModel)]="answer.answer"
                                placeholder="choice" (focusout)="
                                  hideTooltip(
                                    'hideTooltip',
                                    'answer',
                                    i,
                                    j,
                                    index
                                  )
                                " [ngClass]="{
                                  'answer-text': answer.correctness == 100
                                }" (focus)="onFocus('answer', i, j, index)" id="{{ 'answer' + i + j + index }}"
                                (keydown)="onKeydown($event, i, j, index)" autocomplete="off" />
                            </div>
                          </div>
                          <div (mouseover)="onmouseEnter($event, i, j, index)"
                            (mouseout)="onmouseLeave($event, i, j, index)" style="width:200px;">
                            <div class="answer-img-wrapper" *ngIf="answer.imgUrl.length > 0">
                              <img src="{{ answer.imgUrl }}" alt="" class="answer-img" />
                              <img (click)="deleteAnswerImg(i, j, index)" class="ans-image"
                                src="./assets/img/remove-white.png" id="{{ 'imgID' + i + j + index }}" />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="add-new-question">
                    <p (click)="addQuestion(i)" class="mb-0">
                      Add new question
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wai Yan UI End -->

            <div class="d-flex pl-3 mt-3">
              <p (click)="addPd()" class="plus-sign d-flex justify-content-center align-items-center">
                <span>+</span>
              </p>
              <p (click)="addPd()" class="mb-0 mt-1 pl-3 new-pd-text">
                Add new performance demand
              </p>
            </div>
          </div>
        </div>
      </div>
      <!-- Note Setting Max-width = 256px -->
      <div class="col-4 p-0 setting-sidebar" *ngIf="showSettingSidebar" [ngClass]="{
          'greater-than': greterThan,
          'less-than': lessThan,
          forElse: forElse
        }">
        <div class="pt-2 d-flex flex-column">
          <div class="d-flex p-3">
            <div class="align-items-center d-flex" [ngClass]="{
                'pd-icon-wrapper': focusType.type == 'pd',
                'check-icon-wrapper':
                  focusType.type == 'question' || focusType.type == 'answer'
              }">
              <img *ngIf="focusType.type == 'pd'" src="../../../assets/images/thunder-flash-w.png" alt=""
                class="flex-icon" />
              <img *ngIf="
                  focusType.type == 'question' || focusType.type == 'answer'
                " src="../../../assets/images/checked-rect.png" alt="" class="flex-icon" />
              <span class="pd-No">{{ this.focusType.no + 1 }}</span>
            </div>
            <p class="mr-auto pl-3 pd-setting" *ngIf="focusType.type == 'pd'">
              PD Setting
            </p>
            <p class="mr-auto pl-3 pd-setting" *ngIf="focusType.type == 'question'">
              Question Setting
            </p>
            <p class="mr-auto pl-3 pd-setting" *ngIf="focusType.type == 'answer'">
              Answer Setting
            </p>
            <p (click)="closeSetting()" class="close-sign d-flex justify-content-center align-items-center">
              <span><img src="../../../assets/img/settingclose/settings-close.png" alt="" /></span>
            </p>
          </div>
          <div class="p-3">
            <div *ngIf="this.focusType.type == 'pd'" class="d-flex justify-content-between w-100"
              style="border-bottom: 1px solid #edeff0;">
              <p class="setting-text">Description</p>
              <div class="toggle-wrap" (click)="this.isGlobal = !isGlobal">
                <label class="switch">
                  <input type="checkbox" (click)="isGlobal = !this.isGlobal" [checked]="isGlobal" />
                  <span class="slider round"></span>
                </label>
              </div>
            </div>
            <div *ngIf="focusType.type == 'question'"
              class="d-flex justify-content-between w-100" style="border-bottom: 1px solid #edeff0;">
              <p class="setting-text">Pick multiple</p>
              <div class="toggle-wrap">
                <label class="switch">
                  <input type="checkbox" (click)="pickMultipleAns(this.focusType)" [checked]="
                      performanceDemands[focusType.parentIdx].questions[
                        focusType.no
                      ].questionType == 'MCQ-CHECKBOX'
                    " />
                  <span class="slider round"></span>
                </label>
              </div>
            </div>
            <div class="d-flex justify-content-between mt-3 w-100" style="border-bottom: 1px solid #edeff0;">
              <div class="d-flex align-items-center">
                <p>
                  <i class="fa fa-angle-right" *ngIf="isCollapse" (click)="onClickSettingArrow($event)"></i>
                </p>
                <p>
                  <i class="fa fa-angle-down" *ngIf="!isCollapse" (click)="onClickSettingArrow($event)"></i>
                </p>
                <p class="pl-2 setting-text">Video</p>
              </div>
              <p *ngIf="focusType.type == 'question' || focusType.type == 'pd'" class="plus-sign-video d-flex justify-content-center align-items-center"
                (click)="openVideoModal(videoModal,'video')">
                <span>+</span>
              </p>
              <p *ngIf="focusType.type == 'answer'" class="plus-sign-video d-flex justify-content-center align-items-center"
                (click)="openVideoModal(videoModal,'ansVideo')">
                <span>+</span>
              </p>
            </div>
            <div class="vd-wrapper" *ngIf="!isCollapse && focusType.type == 'pd'">
              <div *ngFor="let video of performanceDemands[focusType.no].contents; let i = index">
                <div class="vd" *ngIf="isVideo(video)" (click)="onselectedVideoDiv($event, i, video)" (mouseenter)="onVidMouseEvent($event,video,'mouseenter')" (mouseleave)="onVidMouseEvent($event,video,'mouseleave')" id="img-s-{{ video._id }}">
                  <img src="../../../assets/images/play-icon.png" class="setting-play-icon" />
                  <video width="224" height="126" preload="metadata" src="{{ video.url }}"></video>
                  <img *ngIf="(video._id != undefined && isMouseOverID == video._id) || (video._id == undefined && isMouseOverID == video.contentId)" src="../../../assets/images/trash-ico.png" id="trashdiv-{{ video._id }}" class="setting-trash"
                    (click)="deleteSettingContents(i)" />
                  <div class="sidebarVidOverlay video" id="Imgoverlay{{ video._id }}" [ngClass]="{'overlayDiv': (video._id != undefined && isMouseOverID == video._id) || (video._id == undefined && isMouseOverID == video.contentId)}"></div>
                  <div class="row duration-wrapper">
                    <div class="col-md-5 start-duration">
                      <label>Start</label>
                      <input type="text" [(ngModel)]="video.start" class="duration" />
                    </div>
                    <div class="col-md-5 end-duration">
                      <label>End</label>
                      <input type="text" [(ngModel)]="video.end" class="duration" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="vd-wrapper" *ngIf="!isCollapse && focusType.type == 'question'">

              <div class="vd"
                *ngFor="let video of performanceDemands[focusType.parentIdx].questions[focusType.no].contents; let i = index"
                (click)="onselectedVideoDiv($event, i, video)" (mouseenter)="onVidMouseEvent($event,video,'mouseenter')"
                (mouseleave)="onVidMouseEvent($event,video,'mouseleave')" id="img-s-{{ video._id }}">
                <img src="../../../assets/images/play-icon.png" class="setting-play-icon" />
                <video width="224" height="126" preload="metadata" src="{{ video.url }}"></video>
                <img *ngIf="(video._id != undefined && isMouseOverID == video._id) || (video._id == undefined && isMouseOverID == video.contentId)" src="../../../assets/images/trash-ico.png" id="trashdiv-{{ video._id }}" class="setting-trash"
                  (click)="deleteSettingContents(i)" />
                  <div class="sidebarVidOverlay video" id="Imgoverlay{{ video._id }}" [ngClass]="{'overlayDiv': (video._id != undefined && isMouseOverID == video._id) || (video._id == undefined && isMouseOverID == video.contentId)}"></div>
                <div class="row duration-wrapper">
                  <div class="col-md-5 start-duration">
                    <label>Start</label>
                    <input type="text" [(ngModel)]="video.start" class="duration" />
                  </div>
                  <div class="col-md-5 end-duration">
                    <label>End</label>
                    <input type="text" [(ngModel)]="video.end" class="duration" />
                  </div>
                </div>
                <!-- </div> -->
              </div>
            </div>
            <div class="vd-wrapper" *ngIf="!isCollapse && focusType.type == 'answer'">
              <div *ngFor="let video of this.performanceDemands[this.focusType.parentIdx].questions[this.focusType.parentQuesIdx].answers[this.focusType.no].contents; let i = index">
                <div class="vd" (click)="onselectedVideoDiv($event, i, video)" (mouseenter)="onVidMouseEvent($event,video,'mouseenter')" (mouseleave)="onVidMouseEvent($event,video,'mouseleave')" id="img-s-{{ video._id }}">
                  <img src="../../../assets/images/play-icon.png" class="setting-play-icon" />
                  <video width="224" height="126" preload="metadata" src="{{ video.url }}"></video>
                  <img *ngIf="(video._id != undefined && isMouseOverID == video._id) || (video._id == undefined && isMouseOverID == video.contentId)" src="../../../assets/images/trash-ico.png" id="trashdiv-{{ video._id }}" class="setting-trash"
                  (click)="deleteSettingContents(i)" />
                  <div class="sidebarVidOverlay video" id="Imgoverlay{{ video._id }}" [ngClass]="{'overlayDiv': (video._id != undefined && isMouseOverID == video._id) || (video._id == undefined && isMouseOverID == video.contentId)}"></div>
                  <div class="row duration-wrapper">
                    <div class="col-md-5 start-duration">
                      <label>Start</label>
                      <input type="text" [(ngModel)]="video.start" class="duration" />
                    </div>
                    <div class="col-md-5 end-duration">
                      <label>End</label>
                      <input type="text" [(ngModel)]="video.end" class="duration" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div *ngIf="this.focusType.type == 'pd'" class="d-flex justify-content-between mt-3 w-100"
              style="border-bottom: 1px solid #edeff0;">
              <p class="setting-text">Randomize count</p>
              <input type="text" class="randomize-count" placeholder="0" />
            </div>
            <div *ngIf="focusType.type == 'question'"
              class="d-flex justify-content-between mt-3 w-100" style="border-bottom: 1px solid #edeff0;">
              <p class="setting-text">Duplicate question</p>
              <input type="text" class="randomize-count" placeholder="0" />
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-center align-items-center delete-btnWrap">
          <button *ngIf="focusType.type == 'pd' && performanceDemands?.length > 1" (click)="delete(focusType)">
            Delete
          </button>
          <button *ngIf="
              (focusType.type == 'question') &&
              performanceDemands[focusType.parentIdx].questions.length > 1
            " (click)="delete(focusType)">
            Delete
          </button>
          <button *ngIf="(focusType.type == 'answer') && performanceDemands[focusType.parentIdx].questions[focusType.parentQuesIdx].answers.length > 1" (click)="delete(focusType)">
            Delete
          </button>
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-between form-footer">
      <div>
        <button *ngIf="conceptEdit" type="button" class="btn-delete" (click)="onClickDeleteConcept(deletemodal, concept)">
          Delete
        </button>
      </div>
      <div class="d-flex">
        <button *ngIf="!conceptEdit" type="button" class="btn btn-cancel" (click)="cancelConcept('cancel')">
          Cancel
        </button>
        <button *ngIf="conceptEdit" type="button" class="btn btn-cancel" (click)="cancelConcept('redirect')">
          Close
        </button>
        <div *ngIf="!conceptEdit">
          <div class="d-none">{{ validateForm() }}</div>
          <button type="button" class="btn btn-submit" [disabled]="!isConceptFormValid" (click)="createConcept()">
            Create
          </button>
        </div>
        <div *ngIf="conceptEdit">
          <div class="d-none">{{ validateForm() }}</div>
          <button type="button" class="btn btn-submit" [disabled]="!isConceptFormValid"
            (click)="updateConcept(conceptId)">
            Save
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- For Concept Create End -->
  <block-ui message="Deafult Message"></block-ui>

  <!-- modal for image upload -->
  <ng-template #imgModal let-modal>
    <!-- <div class="modal-header">
    
    </div> -->
    <div class="modal-body img_upload" *ngIf="contentArr.length == 0">
      <div class="d-flex justify-content-center drop_zone">
        <div class="d-flex flex-column drop_zone_middle">
          <img src="../../../assets/img/image-drop.png" class="img_drop" />
          <label class="drop_drap_txt">Drag & drop</label>
          <span class="drop_sp">image anywhere or</span>
          <div class="upload-btn-wrapper">
            <button class="btn btn-submit uploadImgBtn exit-img">
              Upload image
            </button>
            <!-- <button class="btn btn-submit uploadImgBtn">Upload image</button> -->
            <input type="file" name="imgFile" accept="image/x-png,image/gif,image/jpeg" (change)="onloadImg($event)" />
          </div>
        </div>
      </div>
    </div>

    <div class="modal-body eimg_upload" *ngIf="contentArr.length != 0" appDnd
      (filesChangeEmiter)="onFilesChange($event)" (filesInvalidEmiter)="onFileInvalids($event)"
      [allowed_extensions]="['png', 'jpg', 'bmp', 'jpeg']">
      <div class="d-flex drop_zone_middle_eixtData">
        <img src="../../../assets/img/image-drop.png" class="eimg_drop" />
        <div class="d-flex  flex-column lblGp">
          <label class="edrop_drap_txt">Drag & drop</label>
          <span class="edrop_sp">image anywhere or</span>
        </div>
        <div class="upload-btn-wrapper">
          <button class="btn btn-submit uploadImgBtn exit-img">
            Upload image
          </button>
          <input type="file" #fileInput name="imgFile" *ngIf="modelType == 'multiple'"
            accept="image/x-png,image/gif,image/jpeg" (click)="fileInput.value = null" id="fileUpload"
            (change)="onloadImg($event)" multiple />
          <input type="file" #fileInput *ngIf="modelType == 'single'" name="imgFile"
            accept="image/x-png,image/gif,image/jpeg" (click)="fileInput.value = null" id="fileUpload"
            (change)="onloadImg($event)" single />
        </div>
      </div>

      <div class="d-flex flex-column gallery">
        <p class="g_title">Image gallery</p>
        <div class="row imgGp pb-3">
          <div class="col-md-2 imgDiv" *ngFor="let img of ImgArr; let i = index">
            <div class="d-flex justify-content-center align-items-center inner-imgDiv"
              (click)="onslectedImgDiv(img._id, img,i)" id="img-{{ img._id }}" [ngClass]="{'addImgDivBorder': imgIdArr.indexOf(img._id) != -1}"
              (mouseenter)="onImgMouseEvent($event, img._id, 'mouseenter')" (mouseleave)="onImgMouseEvent($event, img._id,'mouseleave')">
              <div id="cricle{{ img._id }}" [ngClass]="{'iconCheck': imgIdArr.indexOf(img._id) != -1}">
                <i _ngcontent-c1="" class="fa fa-check" id="check{{ img._id }}" [ngClass]="{'check': imgIdArr.indexOf(img._id) != -1}"></i>
              </div>
              <div (click)="onremoveClick(img._id)" id="trashdiv-{{ img._id }}" class="trashdivClass">
                <i _ngcontent-c1="" class="fa fa-trash" id="trash{{ img._id }}" [ngStyle]="imgIdArr.indexOf(img._id) != -1 && isMouseOverID == img._id ? {'opacity': 1} : {'opacity': 0}"></i>
              </div>
              <img src="{{ img.url }}" class="gShowImag" id="gShowImag-{{ img._id }}"  [ngClass]="{'addgshwoImg': imgIdArr.indexOf(img._id) != -1}"/>
              <div class="imgName" *ngIf="imgIdArr.indexOf(img._id) != -1 && isMouseOverID == img._id">
                {{ (img.name.length > 17) ? (img.name | slice:0:14)+'...' : (img.name) }}
              </div>
              <div class="Imgoverlay" id="Imgoverlay{{ img._id }}" [ngClass]="{'overlayDiv': imgIdArr.indexOf(img._id) != -1 && isMouseOverID == img._id}"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- {{ImgArr.length}} -->
    <!-- {{contentArr.length}}
{{content_size}}
{{contentRes.length}} -->
    <div class="d-flex justify-content-center">
      <div *ngIf="contentArr.length >= content_size && contentRes.length !=0">
        <button class="btn remove-outline" (click)="showMoreContent(ImgArr.length)">load more</button>
      </div>
    </div>
    <div class="modal-footer" *ngIf="this.modelType == 'multiple'">
    <div *ngIf="selectedImgArr && selectedImgArr.length >= 1 " class="mr-auto ml-3 d-flex justify-content-center align-items-center video-pick">
        <p class="slected-content-text mb-0 pb-0">
          <span *ngIf="selectedImgArr.length == 1"> A  image picked</span>
          <span *ngIf="selectedImgArr.length > 1">{{ selectedImgArr.length }} images picked</span>
        </p>
      </div>
      <a class="cancelbtn" (click)="cancelModal()">Cancel</a>
      <button type="button" class="btn btn-submit insertBtn" *ngIf="selectedImgArr.length != 0" (click)="insertImg()">
        Insert
      </button>
      <button type="button" class="btn btn-submit insertBtn" *ngIf="selectedImgArr.length == 0" disabled="true">
        Insert
      </button>
    </div>
    <div class="modal-footer" *ngIf="this.modelType == 'single'">
      <a class="cancelbtn" (click)="cancelModal()">Cancel</a>
      <button type="button" class="btn btn-submit insertBtn" *ngIf="isDisabelInsert" (click)="insertImg()">
        Insert
      </button>
      <button type="button" class="btn btn-submit insertBtn" *ngIf="!isDisabelInsert" disabled="true">
        Insert
      </button>
    </div>
  </ng-template>

  <!-- modal for video upload -->
  <ng-template #videoModal let-modal>
    <!-- <div class="modal-header">
    
    </div> -->
    <div class="modal-body img_upload" *ngIf="contentArr.length == 0">
      <div class="d-flex justify-content-center drop_zone for-video">
        <div class="d-flex flex-column drop_zone_middle">
          <img src="../../../assets/images/video-drop.png" class="img_drop" />
          <label class="drop_drap_txt">Drag & drop</label>
          <span class="drop_sp">video anywhere or</span>
          <div class="upload-btn-wrapper">
            <button class="btn btn-submit uploadImgBtn exit-img">
              Upload video
            </button>
            <!-- <button class="btn btn-submit uploadImgBtn">Upload image</button> -->
            <input type="file" name="imgFile" #fileInput (click)="fileInput.value = null" accept="video/mp4,video/*"
              (change)="onloadImg($event)" />
          </div>
        </div>
      </div>
    </div>

    <div class="modal-body eimg_upload_video" *ngIf="contentArr.length != 0" appDnd
      (filesChangeEmiter)="onFilesChange($event)" (filesInvalidEmiter)="onFileInvalids($event)"
      [allowed_extensions]="['mp4', 'mov']">
      <div class="d-flex drop_zone_middle_eixtData for-video">
        <img src="../../../assets/images/video-drop.png" class="eimg_drop" />
        <div class="d-flex  flex-column lblGp">
          <label class="edrop_drap_txt">Drag & drop</label>
          <span class="edrop_sp">image anywhere or</span>
        </div>
        <div class="upload-btn-wrapper">
          <button class="btn btn-submit uploadImgBtn exit-img">
            Upload video
          </button>
          <input type="file" #fileInput (click)="fileInput.value = null" name="imgFile" accept=".mp4,.mov"
            (change)="onloadImg($event)" />

          <!-- <input type="file" #fileInput name="imgFile" *ngIf="modelType == 'video'" accept="image/x-png,image/gif,image/jpeg"
            (click)="fileInput.value = null" id="fileUpload" (change)="onloadImg($event)" multiple /> -->
          <!-- <input type="file" #fileInput *ngIf="modelType == 'single'" name="imgFile" accept="image/x-png,image/gif,image/jpeg"
            (click)="fileInput.value = null" id="fileUpload" (change)="onloadImg($event)" single /> -->
        </div>
      </div>
      <div class="d-flex flex-column gallery">
        <p class="g_title">Video gallery</p>
        <!-- <input type="text" class="w-100" (input)= "contentSearch($event.target.value)" > -->
        <div class="input-group mt-3 mb-3">
          <span class="input-group-append">
            <button class="bt btn-design btn-outline-secondary" type="button">
              <i class="fa fa-search search-size"></i>
            </button>
          </span>
          <input class="form-control py-2 input-search-bg" type="search" placeholder="Search Videos"
            id="example-search-input" (input)="contentSearch($event.target.value)" autocomplete="off">
        </div>
        <div class="row imgGp pt-3">
          <div class="col-md-3 vidDiv" *ngFor="let video of videoArr; let i = index" [class.disabled]="!video.duration">
            <div class="inner-imgVideo" (click)="onslectedImgDiv(video._id, video)" id="img-{{ video._id }}" [ngClass]="{'hightlight': vidIdArr.indexOf(video._id) != -1, 'not-selected':vidIdArr.indexOf(video._id) == -1 }"
              (mouseenter)="onVidMouseEvent($event, video._id,'mouseenter')" (mouseleave)="onVidMouseEvent($event, video._id,'mouseleave')">
              <div id="cricle{{ video._id }}" [ngClass]="{'video-circle': vidIdArr.indexOf(video._id) != -1}">
                <i class="fa fa-check" id="check{{ video._id }}" [ngClass]="{'checkedVid': vidIdArr.indexOf(video._id) != -1}"></i>
              </div>
              <div (click)="onremoveClick(video._id)" id="trashdiv-{{ video._id }}" class="video-trashDiv">
                <i class="fa fa-trash" id="trash{{ video._id }}" [ngStyle]="vidIdArr.indexOf(video._id) != -1 && isMouseOverID == video._id ?{'opacity': 1} : {'opacity': 0}"></i>
              </div>
              <video width="216" height="130" preload="metadata" src="{{ video.url }}"
                (loadedmetadata)="onMetadata($event, i)"></video>
              <!-- <canvas id="canvas-{{video._id}}" ></canvas> -->
              <div id="play{{ video._id }}" class="play-circle">
                <img src="../../../assets/images/play-icon.png" />
              </div>
              <div class="videoNameShort" [ngClass]="{'videoNameLong': video.name.length > 26}">
                {{ (video.name.length > 40) ? (video.name | slice:0:40)+'...':(video.name) }}
              </div>

              <div class="VidOverlay video" id="Imgoverlay{{ video._id }}" [ngClass]="{'overlayDiv': vidIdArr.indexOf(video._id) != -1 && isMouseOverID == video._id}"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="d-flex justify-content-center" *ngIf="result && result.length == 20">
      <div>
        <button class="btn remove-outline" (click)="showMoreVideo()">load more</button>
      </div>
    </div>
    <div class="modal-footer">
      <div *ngIf="selectedVideoArr && selectedVideoArr.length >= 1 " class="mr-auto ml-3 d-flex justify-content-center align-items-center video-pick">
        <p class="slected-content-text mb-0 pb-0">
          <span *ngIf="selectedVideoArr.length == 1"> A  video picked</span>
          <span *ngIf="selectedVideoArr.length > 1">{{ selectedVideoArr.length }} videos picked</span>
        </p>
      </div>
      <a class="cancelbtn" (click)="cancelModal()">Cancel</a>
      <button type="button" class="btn btn-submit insertBtn" [disabled]="selectedVideoArr.length == 0"
        (click)="insertImg()">
        Insert
      </button>
      <!-- <button type="button" class="btn btn-submit insertBtn" *ngIf="selectedImgArr.length ==0" disabled=true>Insert</button> -->
    </div>
  </ng-template>
  <ng-template #deletemodal let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h3 class="modal-title">Confirm delete?</h3>
      <!-- <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button> -->
    </div>
    <div class="modal-body pdf-confirm">
      <p>
        Are You sure you want to delete
        <span class="target">"{{ concept.name }}"</span>?
      </p>
    </div>
    <div class="modal-footer">
      <button type="submit" class="btn modal-cancel-btn" (click)="c('Close click')">
        Cancel
      </button>
      <button type="submit" class="btn modal-delete-btn" (click)="conceptDelete(concept.id)">
        Delete
      </button>
    </div>
  </ng-template>
</div>

<ng-template #colDeleteModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h3 class="modal-title">Confirm delete?</h3>
    <!-- <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button> -->
  </div>
  <div class="modal-body pdf-confirm">
    <p>
      Are You sure you want to delete
      <span class="target">"{{ deleteCollection.name }}"</span>?
    </p>
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn modal-cancel-btn" (click)="c('Close click')">
      Cancel
    </button>
    <button type="submit" class="btn modal-delete-btn" (click)="collectionDelete(deleteCollection._id)">
      Delete
    </button>
  </div>
</ng-template>