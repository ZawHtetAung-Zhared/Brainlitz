<div>
  <div class=" d-flex title-div justify-content-between">
    <h2>Invoice Reports</h2>
    <div style="position: relative;">
      <button class="btn-export" (click)="showExportOption($event, 'paid')">
        <span>Export</span><i class="fa fa-chevron-down downIcon"></i>
      </button>
      <div *ngIf="showDp" class="option-dp">
        <div class="inv-opt bottom-border" (click)="exportInvoiceLists('PAID')">
          Paid
        </div>
        <div class="inv-opt" (click)="exportInvoiceLists('UNPAID')">Unpaid</div>
        <!-- <div class="inv-opt" (click)="exportInvoiceLists('PAID[PARTIAL]')">
          Paid partial
        </div> -->
      </div>
    </div>
  </div>
  <div class="table-wrapper">
    <table class="inv-table">
      <tr class="header-wrapper">
        <td>Invoice#</td>
        <td>To</td>
        <td>Date</td>
        <td>Due date</td>
        <td>Last send date</td>
        <td>Status</td>
        <td>Action</td>
      </tr>
      <tr class="invList" *ngFor="let invoice of invoiceList">
        <td>
          {{ invoice.refInvoiceId }}
        </td>
        <td>
          {{
            invoice.userDetails.preferredName == ''
              ? invoice.user.email
              : invoice.userDetails.preferredName
          }}
        </td>
        <td>
          {{ invoice.updatedDate | dateFormat }}
        </td>
        <td *ngIf="invoice.noti != null">
          {{ invoice.noti.createdDate | dateFormat }}
        </td>
        <td *ngIf="invoice.noti == null">
          -
        </td>
        <td>
          {{ invoice.dueDate | dateFormat }}
        </td>
        <td>
          <span
            [ngStyle]="{
              color:
                invoice.status == 'PAID'
                  ? '#009940'
                  : invoice.status == 'UNPAID'
                  ? '#F23A30'
                  : '#F26500'
            }"
            >{{
              invoice.status == 'PAID[PARTIAL]'
                ? 'Paid partial'
                : invoice.status == 'PAID'
                ? 'Paid'
                : 'Unpaid'
            }}</span
          >
        </td>
        <td>
          <button
            class="view-inv-btn"
            (click)="openModal(invoice, classEnrollModal)"
          >
            View invoice
          </button>
        </td>
      </tr>
    </table>
  </div>
</div>
<div
  *ngIf="invlistsResult.length >= 20"
  class="d-flex justify-content-center load-more"
>
  <button class="btn remove-outline" (click)="showMore(invoiceList.length)">
    load more
  </button>
</div>
<ng-template #classEnrollModal let-c="close" let-d="dismiss">
  <app-invoice
    [custDetail]="custDetail"
    [course]="selectedCourse"
    (closed)="closeModal('closeInv')"
    class="app-inv-wrap"
  ></app-invoice>
</ng-template>
<block-ui message="Deafult Message"></block-ui>
