<div>
  <div class=" d-flex title-div justify-content-between">
    <h2 class="h1-strong text-c300">Invoice reports</h2>
    <div style="position: relative;">
      <button
        class="btn-export body-l bg-b100 text-s0"
        (click)="showExportOption($event, 'paid')"
      >
        <span>Export</span><i class="fa fa-chevron-down downIcon small"></i>
      </button>
      <div *ngIf="showDp" class="option-dp body-l text-c300 bg-s0">
        <div class="inv-opt bottom-border" (click)="exportInvoiceLists('PAID')">
          Paid
        </div>
        <div class="inv-opt" (click)="exportInvoiceLists('UNPAID')">Unpaid</div>
        <!-- <div class="inv-opt" (click)="exportInvoiceLists('PAID[PARTIAL]')">
          Paid partial
        </div> -->
      </div>
    </div>
  </div>
  <div class="table-wrapper">
    <table class="inv-table">
      <tr class="header-wrapper body-l text-c300">
        <td>Invoice#</td>
        <td>To</td>
        <td>Date</td>
        <td>Due date</td>
        <td>Last send date</td>
        <td>Status</td>
        <td>Action</td>
      </tr>
      <tr class="invList body-m" *ngFor="let invoice of invoiceList">
        <td class="text-c300">
          {{ invoice.refInvoiceId }}
        </td>
        <td class="text-c300">
          {{
            invoice.userDetails.preferredName == ''
              ? invoice.user.email
              : invoice.userDetails.preferredName
          }}
        </td>
        <td class="text-c300">
          {{ invoice.updatedDate | dateFormat }}
        </td>
        <td class="text-c300">
          {{ invoice.dueDate | dateFormat }}
        </td>
        <td style="text-align: center;" class="text-c300">
          <span *ngIf="invoice.noti != null">
            {{ invoice.noti.createdDate | dateFormat }}
          </span>
          <span *ngIf="invoice.noti == null"> - </span>
        </td>
        <td>
          <span
            [ngClass]="
              invoice.status == 'PAID'
                ? 'text-g100'
                : invoice.status == 'UNPAID'
                ? 'text-r100'
                : 'text-partial'
            "
          >
            {{
              invoice.status == 'PAID[PARTIAL]'
                ? 'Partially paid'
                : invoice.status == 'PAID'
                ? 'Paid'
                : 'Unpaid'
            }}</span
          >
        </td>
        <td>
          <button
            class="view-inv-btn body-m text-b100"
            (click)="openModal(invoice, classEnrollModal)"
          >
            View invoice
          </button>
        </td>
      </tr>
    </table>
  </div>
</div>
<div
  *ngIf="invlistsResult.length >= 20"
  class="d-flex justify-content-center load-more bg-s0"
>
  <button
    class="btn remove-outline text-b100 body-m"
    (click)="showMore(invoiceList.length)"
  >
    load more
  </button>
</div>
<ng-template #classEnrollModal let-c="close" let-d="dismiss">
  <app-invoice
    [custDetail]="custDetail"
    [course]="selectedCourse"
    [invoiceId]="invoiceID2"
    (closed)="closeModal('closeInv')"
    class="app-inv-wrap"
  ></app-invoice>
</ng-template>
<block-ui message="Deafult Message"></block-ui>
