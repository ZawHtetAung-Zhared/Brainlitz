<div class="d-flex flex-row h-100 w-100">
	<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2 noti-sidebar">
		<div class="d-flex flex-column justify-content-center">
			<div [ngClass]="{'active': notiType == 'send'}" class="tab-wrap">			
				<button class="btn noti-tab w-100" (click)="clickTab('send')">Send notification</button>
			</div>
			<div [ngClass]="{'active': notiType == 'view'}" class="tab-wrap">			
				<button class="btn noti-tab w-100" (click)="clickTab('view')">View sent history</button>
			</div>
		</div>
	</div>
	<block-ui message="Deafult Message"></block-ui>
	<div class="col-xs-12 col-sm-12 col-md-10 col-lg-10 w-100 overflow noti-wrapper">	
		<div *ngIf="notiType == 'send'">
			<h2 class="title-heading">Send notification</h2>
			<div class="d-flex flex-row">
				<div class="col-xs-12 col-sm-12 col-md-8 col-lg-8">
					<form novalidate #notiForm="ngForm" class="notif">
						<div class="form-group">
						  	<label for="address">Send to</label>
						  	<div class="d-flex">
								<div class="form-check form-check-inline tool-checked">
								  <label [ngClass]="{'selected': isChecked == 'allcustomer'}" class="form-check-label">
								    <input class="form-check-input" type="radio" name="type" id="type1" value="allcustomer" [(ngModel)]="item.type" #type="ngModel" [checked]='true' (click)="somethingChanged('allcustomer')"> All customers
								  </label>
								</div>
								<div [ngClass]="{'selected': isChecked == 'allstaff'}" class="form-check form-check-inline tool-checked">
								  <label class="form-check-label">
								    <input class="form-check-input" type="radio" name="type" id="type2" value="allstaff" [(ngModel)]="item.type" #type="ngModel" (click)="somethingChanged('allstaff')"> All staffs
								  </label>
								</div>
								<div [ngClass]="{'selected': isChecked == 'category'}" class="form-check form-check-inline tool-checked">
								  <label class="form-check-label">
								    <input class="form-check-input" type="radio" name="type" id="type3" value="category" [(ngModel)]="item.type" #type="ngModel" (click)="somethingChanged('category')"> Category
								  </label>
								</div>
								<div [ngClass]="{'selected': isChecked == 'course'}" class="form-check form-check-inline tool-checked">
								  <label class="form-check-label">
								    <input class="form-check-input" type="radio" name="type" id="type4" value="course" [(ngModel)]="item.type" #type="ngModel" (click)="somethingChanged('course')"> Selected course
								  </label>
								</div>
								<div class="form-check form-check-inline tool-checked">
								  <label [ngClass]="{'selected': isChecked == 'user'}" class="form-check-label">
								    <input class="form-check-input" type="radio" name="type" id="type5" value="user" [(ngModel)]="item.type" #type="ngModel" (click)="somethingChanged('user')"> Selected user
								  </label>
								</div>
							</div>
						</div>

						<div *ngIf="isChecked == 'category'" class="form-group choose-cat">
							<label for="typeahead-focus">Search for a category:</label>	
							<input
							  id="typeahead-focus"
							  type="text"
							  class="form-control"
							  name="itemID"
							  [(ngModel)]="item.itemID"
							  #itemID="ngModel"
							  (focus)="focus$.next($event.target.value)"
							  (click)="click$.next($event.target.value)"
							  [ngbTypeahead]="search"
							  #instance="ngbTypeahead"
							  (ngModelChange)="valuechange($event, 'category')"
							/>
						</div>
						<div *ngIf="isChecked == 'course'" class="form-group">
							<label for="typeahead-focus">Search for a course:</label>	
							<input
							  id="typeahead-focus"
							  type="text"
							  class="form-control"
							  name="itemID"
							  [(ngModel)]="item.itemID"
							  #itemID="ngModel"
							  (focus)="focus$.next($event.target.value)"
							  (click)="click$.next($event.target.value)"
							  [ngbTypeahead]="search"
							  #instance="ngbTypeahead"
							  (ngModelChange)="valuechange($event, 'course')"
							/>
						</div>
						<div *ngIf="isChecked == 'user'" class="form-group">
							<label for="typeahead-focus">Search for a user:</label>	
							<input
							  id="typeahead-focus"
							  type="text"
							  class="form-control"
							  name="itemID"
							  [(ngModel)]="item.itemID"
							  #itemID="ngModel"
							  (focus)="focus$.next($event.target.value)"
							  (click)="click$.next($event.target.value)"
							  [ngbTypeahead]="search"
							  #instance="ngbTypeahead"
							/>
						</div>
						<!-- <div class="form-group">
							<div class="form-check">
							    <label class="form-check-label">
							      <input type="checkbox" class="form-check-input" name="activeUser" [(ngModel)]="item.activeUser" #activeUser="ngModel">
							      Only active users
							    </label>
							</div>
						</div> -->
						<div class="form-group">
						  <label for="address" class="lable-title">Subject</label>
						  <input type="text" class="form-control" placeholder="Type subject line here..." name="subject" [(ngModel)]="item.subject" #subject="ngModel" required>
						</div>
						<div class="form-group">
						  <label for="address" class="lable-title">Message</label>
						  <textarea class="form-control" rows="5" placeholder="Write message" name="message" [(ngModel)]="item.message" #message="ngModel" required></textarea>
						</div>			
						<div>
							<button type="reset" class="btn btn-light1" (click)="resetForm()">Reset</button>
							<button type="submit" (click)="sendNoti(item)" class="btn btn-primary">Submit</button>
						</div>
					</form>
				</div>
				<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
					<div class="user-count">
						<p>{{userCount}}</p>
					</div>
				</div>
			</div>
		</div>
		<div *ngIf="notiType == 'view'">
			<img src="https://about.canva.com/wp-content/uploads/sites/3/2015/01/children_bookcover.png">
			<div *ngFor="let noti of notiLists; let i = index" class="single-noti">
				<p><span>Title:</span>--{{noti.title}}</p>
				<p><span>Message:</span>--{{noti.message}}</p>
				<p><span>Sent by:</span>--{{noti.sender.preferredName}}</p>
				<p><span>Date:</span>--{{log.createdDate}}</p>
				<div *ngFor="let log of noti.logs; let i = index" id="{{log.notiId}}">
					<p><span>Sent to:</span>--{{log.user.preferredName}}</p>
				</div>
				<!-- <p><span>Sent by:</span>--{{noti.logs.sender.preferredName}}</p> -->
				<!-- <p><span>Sent to:</span>--{{noti.user.preferredName}}</p> -->
				<!-- <div>
					<h4>{{noti.date.day}}/{{noti.date.month}}/{{noti.date.year}}</h4>
					<ul>
						<li *ngFor="let info of noti.noti; let i = index" id="{{info._id}}">
							<p><span>Title:</span>--{{info.title}}</p>
							<p><span>Message:</span>--{{info.message}}</p>
							<p><span>Date:</span>--{{info.createdDate}}</p>
						</li>
					</ul>
				</div> -->
			</div>
		</div>
	</div>
</div>